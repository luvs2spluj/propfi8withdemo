var ek=Object.defineProperty;var tk=(t,e,r)=>e in t?ek(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ve=(t,e,r)=>(tk(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Zv={exports:{}},xu={},eb={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),rk=Symbol.for("react.portal"),nk=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),ik=Symbol.for("react.profiler"),ok=Symbol.for("react.provider"),ak=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),ck=Symbol.for("react.suspense"),uk=Symbol.for("react.memo"),dk=Symbol.for("react.lazy"),Tg=Symbol.iterator;function hk(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var tb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rb=Object.assign,nb={};function oo(t,e,r){this.props=t,this.context=e,this.refs=nb,this.updater=r||tb}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sb(){}sb.prototype=oo.prototype;function Kf(t,e,r){this.props=t,this.context=e,this.refs=nb,this.updater=r||tb}var Gf=Kf.prototype=new sb;Gf.constructor=Kf;rb(Gf,oo.prototype);Gf.isPureReactComponent=!0;var Og=Array.isArray,ib=Object.prototype.hasOwnProperty,Yf={current:null},ob={key:!0,ref:!0,__self:!0,__source:!0};function ab(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ib.call(e,n)&&!ob.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Ma,type:t,key:i,ref:o,props:s,_owner:Yf.current}}function fk(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ig=/\/+/g;function md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pk(""+t.key):e.toString(36)}function ic(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case rk:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+md(o,0):n,Og(s)?(r="",t!=null&&(r=t.replace(Ig,"$&/")+"/"),ic(s,e,r,"",function(u){return u})):s!=null&&(Jf(s)&&(s=fk(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Og(t))for(var a=0;a<t.length;a++){i=t[a];var c=n+md(i,a);o+=ic(i,e,r,c,s)}else if(c=hk(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=n+md(i,a++),o+=ic(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,r){if(t==null)return t;var n=[],s=0;return ic(t,n,"","",function(i){return e.call(r,i,s++)}),n}function gk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},oc={transition:null},mk={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:oc,ReactCurrentOwner:Yf};function lb(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:ul,forEach:function(t,e,r){ul(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!Jf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=oo;Ne.Fragment=nk;Ne.Profiler=ik;Ne.PureComponent=Kf;Ne.StrictMode=sk;Ne.Suspense=ck;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;Ne.act=lb;Ne.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=rb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Yf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)ib.call(e,c)&&!ob.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Ma,type:t.type,key:s,ref:i,props:n,_owner:o}};Ne.createContext=function(t){return t={$$typeof:ak,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ok,_context:t},t.Consumer=t};Ne.createElement=ab;Ne.createFactory=function(t){var e=ab.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:lk,render:t}};Ne.isValidElement=Jf;Ne.lazy=function(t){return{$$typeof:dk,_payload:{_status:-1,_result:t},_init:gk}};Ne.memo=function(t,e){return{$$typeof:uk,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};Ne.unstable_act=lb;Ne.useCallback=function(t,e){return Ut.current.useCallback(t,e)};Ne.useContext=function(t){return Ut.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return Ut.current.useEffect(t,e)};Ne.useId=function(){return Ut.current.useId()};Ne.useImperativeHandle=function(t,e,r){return Ut.current.useImperativeHandle(t,e,r)};Ne.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return Ut.current.useMemo(t,e)};Ne.useReducer=function(t,e,r){return Ut.current.useReducer(t,e,r)};Ne.useRef=function(t){return Ut.current.useRef(t)};Ne.useState=function(t){return Ut.current.useState(t)};Ne.useSyncExternalStore=function(t,e,r){return Ut.current.useSyncExternalStore(t,e,r)};Ne.useTransition=function(){return Ut.current.useTransition()};Ne.version="18.3.1";eb.exports=Ne;var T=eb.exports;const Y=qf(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=T,yk=Symbol.for("react.element"),vk=Symbol.for("react.fragment"),bk=Object.prototype.hasOwnProperty,wk=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_k={key:!0,ref:!0,__self:!0,__source:!0};function cb(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)bk.call(e,n)&&!_k.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:yk,type:t,key:i,ref:o,props:s,_owner:wk.current}}xu.Fragment=vk;xu.jsx=cb;xu.jsxs=cb;Zv.exports=xu;var l=Zv.exports,d0={},ub={exports:{}},hr={},db={exports:{}},hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var R=z.length;z.push($);e:for(;0<R;){var O=R-1>>>1,I=z[O];if(0<s(I,$))z[O]=$,z[R]=I,R=O;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var $=z[0],R=z.pop();if(R!==$){z[0]=R;e:for(var O=0,I=z.length,D=I>>>1;O<D;){var B=2*(O+1)-1,X=z[B],J=B+1,ee=z[J];if(0>s(X,R))J<I&&0>s(ee,X)?(z[O]=ee,z[J]=R,O=J):(z[O]=X,z[B]=R,O=B);else if(J<I&&0>s(ee,R))z[O]=ee,z[J]=R,O=J;else break e}}return $}function s(z,$){var R=z.sortIndex-$.sortIndex;return R!==0?R:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,h=3,p=!1,x=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=z)n(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(u)}}function k(z){if(g=!1,b(z),!x)if(r(c)!==null)x=!0,G(C);else{var $=r(u);$!==null&&W(k,$.startTime-z)}}function C(z,$){x=!1,g&&(g=!1,y(w),w=-1),p=!0;var R=h;try{for(b($),f=r(c);f!==null&&(!(f.expirationTime>$)||z&&!A());){var O=f.callback;if(typeof O=="function"){f.callback=null,h=f.priorityLevel;var I=O(f.expirationTime<=$);$=t.unstable_now(),typeof I=="function"?f.callback=I:f===r(c)&&n(c),b($)}else n(c);f=r(c)}if(f!==null)var D=!0;else{var B=r(u);B!==null&&W(k,B.startTime-$),D=!1}return D}finally{f=null,h=R,p=!1}}var E=!1,j=null,w=-1,_=5,S=-1;function A(){return!(t.unstable_now()-S<_)}function N(){if(j!==null){var z=t.unstable_now();S=z;var $=!0;try{$=j(!0,z)}finally{$?F():(E=!1,j=null)}}else E=!1}var F;if(typeof m=="function")F=function(){m(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,K=M.port2;M.port1.onmessage=N,F=function(){K.postMessage(null)}}else F=function(){v(N,0)};function G(z){j=z,E||(E=!0,F())}function W(z,$){w=v(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,G(C))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var R=h;h=$;try{return z()}finally{h=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var R=h;h=z;try{return $()}finally{h=R}},t.unstable_scheduleCallback=function(z,$,R){var O=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?O+R:O):R=O,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=R+I,z={id:d++,callback:$,priorityLevel:z,startTime:R,expirationTime:I,sortIndex:-1},R>O?(z.sortIndex=R,e(u,z),r(c)===null&&z===r(u)&&(g?(y(w),w=-1):g=!0,W(k,R-O))):(z.sortIndex=I,e(c,z),x||p||(x=!0,G(C))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var $=h;return function(){var R=h;h=$;try{return z.apply(this,arguments)}finally{h=R}}}})(hb);db.exports=hb;var kk=db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=T,dr=kk;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fb=new Set,ua={};function ti(t,e){Hi(t,e),Hi(t+"Capture",e)}function Hi(t,e){for(ua[t]=e,t=0;t<e.length;t++)fb.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h0=Object.prototype.hasOwnProperty,Ck=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fg={},Rg={};function jk(t){return h0.call(Rg,t)?!0:h0.call(Fg,t)?!1:Ck.test(t)?Rg[t]=!0:(Fg[t]=!0,!1)}function Ek(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nk(t,e,r,n){if(e===null||typeof e>"u"||Ek(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xf=/[\-:]([a-z])/g;function Qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xf,Qf);Et[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xf,Qf);Et[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xf,Qf);Et[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zf(t,e,r,n){var s=Et.hasOwnProperty(e)?Et[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nk(e,r,s,n)&&(r=null),n||s===null?jk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Dn=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),_i=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),ep=Symbol.for("react.strict_mode"),f0=Symbol.for("react.profiler"),pb=Symbol.for("react.provider"),gb=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),p0=Symbol.for("react.suspense"),g0=Symbol.for("react.suspense_list"),rp=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),mb=Symbol.for("react.offscreen"),Bg=Symbol.iterator;function mo(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,xd;function Io(t){if(xd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||""}return`
`+xd+t}var yd=!1;function vd(t,e){if(!t||yd)return"";yd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{yd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Io(t):""}function Ak(t){switch(t.tag){case 5:return Io(t.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return t=vd(t.type,!1),t;case 11:return t=vd(t.type.render,!1),t;case 1:return t=vd(t.type,!0),t;default:return""}}function m0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ki:return"Fragment";case _i:return"Portal";case f0:return"Profiler";case ep:return"StrictMode";case p0:return"Suspense";case g0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gb:return(t.displayName||"Context")+".Consumer";case pb:return(t._context.displayName||"Context")+".Provider";case tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rp:return e=t.displayName||null,e!==null?e:m0(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return m0(t(e))}catch{}}return null}function Pk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m0(e);case 8:return e===ep?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Dk(t){var e=xb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hl(t){t._valueTracker||(t._valueTracker=Dk(t))}function yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=xb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x0(t,e){var r=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Lg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vb(t,e){e=e.checked,e!=null&&Zf(t,"checked",e,!1)}function y0(t,e){vb(t,e);var r=cs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?v0(t,e.type,r):e.hasOwnProperty("defaultValue")&&v0(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function v0(t,e,r){(e!=="number"||Ac(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Fo=Array.isArray;function Fi(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function b0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $g(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(Fo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cs(r)}}function bb(t,e){var r=cs(e.value),n=cs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function zg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,_b=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tk=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){Tk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function kb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function Sb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=kb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Ok=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _0(t,e){if(e){if(Ok[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function k0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S0=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var C0=null,Ri=null,Bi=null;function Ug(t){if(t=Ua(t)){if(typeof C0!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=_u(e),C0(t.stateNode,t.type,e))}}function Cb(t){Ri?Bi?Bi.push(t):Bi=[t]:Ri=t}function jb(){if(Ri){var t=Ri,e=Bi;if(Bi=Ri=null,Ug(t),e)for(t=0;t<e.length;t++)Ug(e[t])}}function Eb(t,e){return t(e)}function Nb(){}var bd=!1;function Ab(t,e,r){if(bd)return t(e,r);bd=!0;try{return Eb(t,e,r)}finally{bd=!1,(Ri!==null||Bi!==null)&&(Nb(),jb())}}function ha(t,e){var r=t.stateNode;if(r===null)return null;var n=_u(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var j0=!1;if(Sn)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){j0=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{j0=!1}function Ik(t,e,r,n,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Ho=!1,Pc=null,Dc=!1,E0=null,Fk={onError:function(t){Ho=!0,Pc=t}};function Rk(t,e,r,n,s,i,o,a,c){Ho=!1,Pc=null,Ik.apply(Fk,arguments)}function Bk(t,e,r,n,s,i,o,a,c){if(Rk.apply(this,arguments),Ho){if(Ho){var u=Pc;Ho=!1,Pc=null}else throw Error(ne(198));Dc||(Dc=!0,E0=u)}}function ri(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(ri(t)!==t)throw Error(ne(188))}function Lk(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Vg(s),t;if(i===n)return Vg(s),e;i=i.sibling}throw Error(ne(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function Db(t){return t=Lk(t),t!==null?Tb(t):null}function Tb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tb(t);if(e!==null)return e;t=t.sibling}return null}var Ob=dr.unstable_scheduleCallback,Hg=dr.unstable_cancelCallback,Mk=dr.unstable_shouldYield,$k=dr.unstable_requestPaint,lt=dr.unstable_now,zk=dr.unstable_getCurrentPriorityLevel,sp=dr.unstable_ImmediatePriority,Ib=dr.unstable_UserBlockingPriority,Tc=dr.unstable_NormalPriority,Uk=dr.unstable_LowPriority,Fb=dr.unstable_IdlePriority,yu=null,Xr=null;function Vk(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:qk,Hk=Math.log,Wk=Math.LN2;function qk(t){return t>>>=0,t===0?32:31-(Hk(t)/Wk|0)|0}var pl=64,gl=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Ro(a):(i&=o,i!==0&&(n=Ro(i)))}else o=r&~s,o!==0?n=Ro(o):i!==0&&(n=Ro(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zr(e),s=1<<r,n|=t[r],e&=~s;return n}function Kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zr(i),a=1<<o,c=s[o];c===-1?(!(a&r)||a&n)&&(s[o]=Kk(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function N0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rb(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function wd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function $a(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=r}function Yk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-zr(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function ip(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Le=0;function Bb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lb,op,Mb,$b,zb,A0=!1,ml=[],es=null,ts=null,rs=null,fa=new Map,pa=new Map,Wn=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wg(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function yo(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&op(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Xk(t,e,r,n,s){switch(e){case"focusin":return es=yo(es,t,e,r,n,s),!0;case"dragenter":return ts=yo(ts,t,e,r,n,s),!0;case"mouseover":return rs=yo(rs,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,yo(fa.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,yo(pa.get(i)||null,t,e,r,n,s)),!0}return!1}function Ub(t){var e=Bs(t.target);if(e!==null){var r=ri(e);if(r!==null){if(e=r.tag,e===13){if(e=Pb(r),e!==null){t.blockedOn=e,zb(t.priority,function(){Mb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=P0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);S0=n,r.target.dispatchEvent(n),S0=null}else return e=Ua(r),e!==null&&op(e),t.blockedOn=r,!1;e.shift()}return!0}function qg(t,e,r){ac(t)&&r.delete(e)}function Qk(){A0=!1,es!==null&&ac(es)&&(es=null),ts!==null&&ac(ts)&&(ts=null),rs!==null&&ac(rs)&&(rs=null),fa.forEach(qg),pa.forEach(qg)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,A0||(A0=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,Qk)))}function ga(t){function e(s){return vo(s,t)}if(0<ml.length){vo(ml[0],t);for(var r=1;r<ml.length;r++){var n=ml[r];n.blockedOn===t&&(n.blockedOn=null)}}for(es!==null&&vo(es,t),ts!==null&&vo(ts,t),rs!==null&&vo(rs,t),fa.forEach(e),pa.forEach(e),r=0;r<Wn.length;r++)n=Wn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wn.length&&(r=Wn[0],r.blockedOn===null);)Ub(r),r.blockedOn===null&&Wn.shift()}var Li=Dn.ReactCurrentBatchConfig,Ic=!0;function Zk(t,e,r,n){var s=Le,i=Li.transition;Li.transition=null;try{Le=1,ap(t,e,r,n)}finally{Le=s,Li.transition=i}}function eS(t,e,r,n){var s=Le,i=Li.transition;Li.transition=null;try{Le=4,ap(t,e,r,n)}finally{Le=s,Li.transition=i}}function ap(t,e,r,n){if(Ic){var s=P0(t,e,r,n);if(s===null)Dd(t,e,n,Fc,r),Wg(t,n);else if(Xk(s,t,e,r,n))n.stopPropagation();else if(Wg(t,n),e&4&&-1<Jk.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&Lb(i),i=P0(t,e,r,n),i===null&&Dd(t,e,n,Fc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Dd(t,e,n,null,r)}}var Fc=null;function P0(t,e,r,n){if(Fc=null,t=np(n),t=Bs(t),t!==null)if(e=ri(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Pb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function Vb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zk()){case sp:return 1;case Ib:return 4;case Tc:case Uk:return 16;case Fb:return 536870912;default:return 16}default:return 16}}var Gn=null,lp=null,lc=null;function Hb(){if(lc)return lc;var t,e=lp,r=e.length,n,s="value"in Gn?Gn.value:Gn.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return lc=s.slice(t,1<n?1-n:void 0)}function cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xl(){return!0}function Kg(){return!1}function fr(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xl:Kg,this.isPropagationStopped=Kg,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=fr(ao),za=rt({},ao,{view:0,detail:0}),tS=fr(za),_d,kd,bo,vu=rt({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(_d=t.screenX-bo.screenX,kd=t.screenY-bo.screenY):kd=_d=0,bo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:kd}}),Gg=fr(vu),rS=rt({},vu,{dataTransfer:0}),nS=fr(rS),sS=rt({},za,{relatedTarget:0}),Sd=fr(sS),iS=rt({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),oS=fr(iS),aS=rt({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lS=fr(aS),cS=rt({},ao,{data:0}),Yg=fr(cS),uS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hS[t])?!!e[t]:!1}function up(){return fS}var pS=rt({},za,{key:function(t){if(t.key){var e=uS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gS=fr(pS),mS=rt({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jg=fr(mS),xS=rt({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),yS=fr(xS),vS=rt({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),bS=fr(vS),wS=rt({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_S=fr(wS),kS=[9,13,27,32],dp=Sn&&"CompositionEvent"in window,Wo=null;Sn&&"documentMode"in document&&(Wo=document.documentMode);var SS=Sn&&"TextEvent"in window&&!Wo,Wb=Sn&&(!dp||Wo&&8<Wo&&11>=Wo),Xg=String.fromCharCode(32),Qg=!1;function qb(t,e){switch(t){case"keyup":return kS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function CS(t,e){switch(t){case"compositionend":return Kb(e);case"keypress":return e.which!==32?null:(Qg=!0,Xg);case"textInput":return t=e.data,t===Xg&&Qg?null:t;default:return null}}function jS(t,e){if(Si)return t==="compositionend"||!dp&&qb(t,e)?(t=Hb(),lc=lp=Gn=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wb&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ES[t.type]:e==="textarea"}function Gb(t,e,r,n){Cb(n),e=Rc(e,"onChange"),0<e.length&&(r=new cp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var qo=null,ma=null;function NS(t){i1(t,0)}function bu(t){var e=Ei(t);if(yb(e))return t}function AS(t,e){if(t==="change")return e}var Yb=!1;if(Sn){var Cd;if(Sn){var jd="oninput"in document;if(!jd){var em=document.createElement("div");em.setAttribute("oninput","return;"),jd=typeof em.oninput=="function"}Cd=jd}else Cd=!1;Yb=Cd&&(!document.documentMode||9<document.documentMode)}function tm(){qo&&(qo.detachEvent("onpropertychange",Jb),ma=qo=null)}function Jb(t){if(t.propertyName==="value"&&bu(ma)){var e=[];Gb(e,ma,t,np(t)),Ab(NS,e)}}function PS(t,e,r){t==="focusin"?(tm(),qo=e,ma=r,qo.attachEvent("onpropertychange",Jb)):t==="focusout"&&tm()}function DS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bu(ma)}function TS(t,e){if(t==="click")return bu(e)}function OS(t,e){if(t==="input"||t==="change")return bu(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vr=typeof Object.is=="function"?Object.is:IS;function xa(t,e){if(Vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!h0.call(e,s)||!Vr(t[s],e[s]))return!1}return!0}function rm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nm(t,e){var r=rm(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rm(r)}}function Xb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qb(){for(var t=window,e=Ac();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ac(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FS(t){var e=Qb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Xb(r.ownerDocument.documentElement,r)){if(n!==null&&hp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=nm(r,i);var o=nm(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RS=Sn&&"documentMode"in document&&11>=document.documentMode,Ci=null,D0=null,Ko=null,T0=!1;function sm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;T0||Ci==null||Ci!==Ac(n)||(n=Ci,"selectionStart"in n&&hp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ko&&xa(Ko,n)||(Ko=n,n=Rc(D0,"onSelect"),0<n.length&&(e=new cp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ci)))}function yl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ji={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},Ed={},Zb={};Sn&&(Zb=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function wu(t){if(Ed[t])return Ed[t];if(!ji[t])return t;var e=ji[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Zb)return Ed[t]=e[r];return t}var e1=wu("animationend"),t1=wu("animationiteration"),r1=wu("animationstart"),n1=wu("transitionend"),s1=new Map,im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){s1.set(t,e),ti(e,[t])}for(var Nd=0;Nd<im.length;Nd++){var Ad=im[Nd],BS=Ad.toLowerCase(),LS=Ad[0].toUpperCase()+Ad.slice(1);fs(BS,"on"+LS)}fs(e1,"onAnimationEnd");fs(t1,"onAnimationIteration");fs(r1,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(n1,"onTransitionEnd");Hi("onMouseEnter",["mouseout","mouseover"]);Hi("onMouseLeave",["mouseout","mouseover"]);Hi("onPointerEnter",["pointerout","pointerover"]);Hi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function om(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Bk(n,e,void 0,t),t.currentTarget=null}function i1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;om(s,a,u),i=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;om(s,a,u),i=c}}}if(Dc)throw t=E0,Dc=!1,E0=null,t}function qe(t,e){var r=e[B0];r===void 0&&(r=e[B0]=new Set);var n=t+"__bubble";r.has(n)||(o1(e,t,2,!1),r.add(n))}function Pd(t,e,r){var n=0;e&&(n|=4),o1(r,t,n,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function ya(t){if(!t[vl]){t[vl]=!0,fb.forEach(function(r){r!=="selectionchange"&&(MS.has(r)||Pd(r,!1,t),Pd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,Pd("selectionchange",!1,e))}}function o1(t,e,r,n){switch(Vb(e)){case 1:var s=Zk;break;case 4:s=eS;break;default:s=ap}r=s.bind(null,e,r,t),s=void 0,!j0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Dd(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bs(a),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Ab(function(){var u=i,d=np(r),f=[];e:{var h=s1.get(t);if(h!==void 0){var p=cp,x=t;switch(t){case"keypress":if(cc(r)===0)break e;case"keydown":case"keyup":p=gS;break;case"focusin":x="focus",p=Sd;break;case"focusout":x="blur",p=Sd;break;case"beforeblur":case"afterblur":p=Sd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=yS;break;case e1:case t1:case r1:p=oS;break;case n1:p=bS;break;case"scroll":p=tS;break;case"wheel":p=_S;break;case"copy":case"cut":case"paste":p=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jg}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var m=u,b;m!==null;){b=m;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,y!==null&&(k=ha(m,y),k!=null&&g.push(va(m,k,b)))),v)break;m=m.return}0<g.length&&(h=new p(h,x,null,r,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==S0&&(x=r.relatedTarget||r.fromElement)&&(Bs(x)||x[Cn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(x=r.relatedTarget||r.toElement,p=u,x=x?Bs(x):null,x!==null&&(v=ri(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(g=Gg,k="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=Jg,k="onPointerLeave",y="onPointerEnter",m="pointer"),v=p==null?h:Ei(p),b=x==null?h:Ei(x),h=new g(k,m+"leave",p,r,d),h.target=v,h.relatedTarget=b,k=null,Bs(d)===u&&(g=new g(y,m+"enter",x,r,d),g.target=b,g.relatedTarget=v,k=g),v=k,p&&x)t:{for(g=p,y=x,m=0,b=g;b;b=ci(b))m++;for(b=0,k=y;k;k=ci(k))b++;for(;0<m-b;)g=ci(g),m--;for(;0<b-m;)y=ci(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=ci(g),y=ci(y)}g=null}else g=null;p!==null&&am(f,h,p,g,!1),x!==null&&v!==null&&am(f,v,x,g,!0)}}e:{if(h=u?Ei(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=AS;else if(Zg(h))if(Yb)C=OS;else{C=DS;var E=PS}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=TS);if(C&&(C=C(t,u))){Gb(f,C,r,d);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&v0(h,"number",h.value)}switch(E=u?Ei(u):window,t){case"focusin":(Zg(E)||E.contentEditable==="true")&&(Ci=E,D0=u,Ko=null);break;case"focusout":Ko=D0=Ci=null;break;case"mousedown":T0=!0;break;case"contextmenu":case"mouseup":case"dragend":T0=!1,sm(f,r,d);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":sm(f,r,d)}var j;if(dp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Si?qb(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Wb&&r.locale!=="ko"&&(Si||w!=="onCompositionStart"?w==="onCompositionEnd"&&Si&&(j=Hb()):(Gn=d,lp="value"in Gn?Gn.value:Gn.textContent,Si=!0)),E=Rc(u,w),0<E.length&&(w=new Yg(w,t,null,r,d),f.push({event:w,listeners:E}),j?w.data=j:(j=Kb(r),j!==null&&(w.data=j)))),(j=SS?CS(t,r):jS(t,r))&&(u=Rc(u,"onBeforeInput"),0<u.length&&(d=new Yg("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}i1(f,e)})}function va(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Rc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,r),i!=null&&n.unshift(va(t,i,s)),i=ha(t,e),i!=null&&n.push(va(t,i,s))),t=t.return}return n}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function am(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,s?(c=ha(r,i),c!=null&&o.unshift(va(r,c,a))):s||(c=ha(r,i),c!=null&&o.push(va(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var $S=/\r\n?/g,zS=/\u0000|\uFFFD/g;function lm(t){return(typeof t=="string"?t:""+t).replace($S,`
`).replace(zS,"")}function bl(t,e,r){if(e=lm(e),lm(t)!==e&&r)throw Error(ne(425))}function Bc(){}var O0=null,I0=null;function F0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,US=typeof clearTimeout=="function"?clearTimeout:void 0,cm=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof cm<"u"?function(t){return cm.resolve(null).then(t).catch(HS)}:R0;function HS(t){setTimeout(function(){throw t})}function Td(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ga(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ga(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function um(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Jr="__reactFiber$"+lo,ba="__reactProps$"+lo,Cn="__reactContainer$"+lo,B0="__reactEvents$"+lo,WS="__reactListeners$"+lo,qS="__reactHandles$"+lo;function Bs(t){var e=t[Jr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Cn]||r[Jr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=um(t);t!==null;){if(r=t[Jr])return r;t=um(t)}return e}t=r,r=t.parentNode}return null}function Ua(t){return t=t[Jr]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function _u(t){return t[ba]||null}var L0=[],Ni=-1;function ps(t){return{current:t}}function Ke(t){0>Ni||(t.current=L0[Ni],L0[Ni]=null,Ni--)}function He(t,e){Ni++,L0[Ni]=t.current,t.current=e}var us={},Ot=ps(us),Jt=ps(!1),Ks=us;function Wi(t,e){var r=t.type.contextTypes;if(!r)return us;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(t){return t=t.childContextTypes,t!=null}function Lc(){Ke(Jt),Ke(Ot)}function dm(t,e,r){if(Ot.current!==us)throw Error(ne(168));He(Ot,e),He(Jt,r)}function a1(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ne(108,Pk(t)||"Unknown",s));return rt({},r,n)}function Mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Ks=Ot.current,He(Ot,t),He(Jt,Jt.current),!0}function hm(t,e,r){var n=t.stateNode;if(!n)throw Error(ne(169));r?(t=a1(t,e,Ks),n.__reactInternalMemoizedMergedChildContext=t,Ke(Jt),Ke(Ot),He(Ot,t)):Ke(Jt),He(Jt,r)}var pn=null,ku=!1,Od=!1;function l1(t){pn===null?pn=[t]:pn.push(t)}function KS(t){ku=!0,l1(t)}function gs(){if(!Od&&pn!==null){Od=!0;var t=0,e=Le;try{var r=pn;for(Le=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}pn=null,ku=!1}catch(s){throw pn!==null&&(pn=pn.slice(t+1)),Ob(sp,gs),s}finally{Le=e,Od=!1}}return null}var Ai=[],Pi=0,$c=null,zc=0,mr=[],xr=0,Gs=null,yn=1,vn="";function Ps(t,e){Ai[Pi++]=zc,Ai[Pi++]=$c,$c=t,zc=e}function c1(t,e,r){mr[xr++]=yn,mr[xr++]=vn,mr[xr++]=Gs,Gs=t;var n=yn;t=vn;var s=32-zr(n)-1;n&=~(1<<s),r+=1;var i=32-zr(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,yn=1<<32-zr(e)+s|r<<s|n,vn=i+t}else yn=1<<i|r<<s|n,vn=t}function fp(t){t.return!==null&&(Ps(t,1),c1(t,1,0))}function pp(t){for(;t===$c;)$c=Ai[--Pi],Ai[Pi]=null,zc=Ai[--Pi],Ai[Pi]=null;for(;t===Gs;)Gs=mr[--xr],mr[xr]=null,vn=mr[--xr],mr[xr]=null,yn=mr[--xr],mr[xr]=null}var cr=null,ar=null,Je=!1,Rr=null;function u1(t,e){var r=wr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cr=t,ar=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cr=t,ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Gs!==null?{id:yn,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=wr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,cr=t,ar=null,!0):!1;default:return!1}}function M0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $0(t){if(Je){var e=ar;if(e){var r=e;if(!fm(t,e)){if(M0(t))throw Error(ne(418));e=ns(r.nextSibling);var n=cr;e&&fm(t,e)?u1(n,r):(t.flags=t.flags&-4097|2,Je=!1,cr=t)}}else{if(M0(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Je=!1,cr=t}}}function pm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function wl(t){if(t!==cr)return!1;if(!Je)return pm(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F0(t.type,t.memoizedProps)),e&&(e=ar)){if(M0(t))throw d1(),Error(ne(418));for(;e;)u1(t,e),e=ns(e.nextSibling)}if(pm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ar=ns(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ar=null}}else ar=cr?ns(t.stateNode.nextSibling):null;return!0}function d1(){for(var t=ar;t;)t=ns(t.nextSibling)}function qi(){ar=cr=null,Je=!1}function gp(t){Rr===null?Rr=[t]:Rr.push(t)}var GS=Dn.ReactCurrentBatchConfig;function wo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function _l(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gm(t){var e=t._init;return e(t._payload)}function h1(t){function e(y,m){if(t){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=as(y,m),y.index=0,y.sibling=null,y}function i(y,m,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,k){return m===null||m.tag!==6?(m=$d(b,y.mode,k),m.return=y,m):(m=s(m,b),m.return=y,m)}function c(y,m,b,k){var C=b.type;return C===ki?d(y,m,b.props.children,k,b.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&gm(C)===m.type)?(k=s(m,b.props),k.ref=wo(y,m,b),k.return=y,k):(k=mc(b.type,b.key,b.props,null,y.mode,k),k.ref=wo(y,m,b),k.return=y,k)}function u(y,m,b,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=zd(b,y.mode,k),m.return=y,m):(m=s(m,b.children||[]),m.return=y,m)}function d(y,m,b,k,C){return m===null||m.tag!==7?(m=Hs(b,y.mode,k,C),m.return=y,m):(m=s(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=$d(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case dl:return b=mc(m.type,m.key,m.props,null,y.mode,b),b.ref=wo(y,null,m),b.return=y,b;case _i:return m=zd(m,y.mode,b),m.return=y,m;case zn:var k=m._init;return f(y,k(m._payload),b)}if(Fo(m)||mo(m))return m=Hs(m,y.mode,b,null),m.return=y,m;_l(y,m)}return null}function h(y,m,b,k){var C=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(y,m,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return b.key===C?c(y,m,b,k):null;case _i:return b.key===C?u(y,m,b,k):null;case zn:return C=b._init,h(y,m,C(b._payload),k)}if(Fo(b)||mo(b))return C!==null?null:d(y,m,b,k,null);_l(y,b)}return null}function p(y,m,b,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(b)||null,a(m,y,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case dl:return y=y.get(k.key===null?b:k.key)||null,c(m,y,k,C);case _i:return y=y.get(k.key===null?b:k.key)||null,u(m,y,k,C);case zn:var E=k._init;return p(y,m,b,E(k._payload),C)}if(Fo(k)||mo(k))return y=y.get(b)||null,d(m,y,k,C,null);_l(m,k)}return null}function x(y,m,b,k){for(var C=null,E=null,j=m,w=m=0,_=null;j!==null&&w<b.length;w++){j.index>w?(_=j,j=null):_=j.sibling;var S=h(y,j,b[w],k);if(S===null){j===null&&(j=_);break}t&&j&&S.alternate===null&&e(y,j),m=i(S,m,w),E===null?C=S:E.sibling=S,E=S,j=_}if(w===b.length)return r(y,j),Je&&Ps(y,w),C;if(j===null){for(;w<b.length;w++)j=f(y,b[w],k),j!==null&&(m=i(j,m,w),E===null?C=j:E.sibling=j,E=j);return Je&&Ps(y,w),C}for(j=n(y,j);w<b.length;w++)_=p(j,y,w,b[w],k),_!==null&&(t&&_.alternate!==null&&j.delete(_.key===null?w:_.key),m=i(_,m,w),E===null?C=_:E.sibling=_,E=_);return t&&j.forEach(function(A){return e(y,A)}),Je&&Ps(y,w),C}function g(y,m,b,k){var C=mo(b);if(typeof C!="function")throw Error(ne(150));if(b=C.call(b),b==null)throw Error(ne(151));for(var E=C=null,j=m,w=m=0,_=null,S=b.next();j!==null&&!S.done;w++,S=b.next()){j.index>w?(_=j,j=null):_=j.sibling;var A=h(y,j,S.value,k);if(A===null){j===null&&(j=_);break}t&&j&&A.alternate===null&&e(y,j),m=i(A,m,w),E===null?C=A:E.sibling=A,E=A,j=_}if(S.done)return r(y,j),Je&&Ps(y,w),C;if(j===null){for(;!S.done;w++,S=b.next())S=f(y,S.value,k),S!==null&&(m=i(S,m,w),E===null?C=S:E.sibling=S,E=S);return Je&&Ps(y,w),C}for(j=n(y,j);!S.done;w++,S=b.next())S=p(j,y,w,S.value,k),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?w:S.key),m=i(S,m,w),E===null?C=S:E.sibling=S,E=S);return t&&j.forEach(function(N){return e(y,N)}),Je&&Ps(y,w),C}function v(y,m,b,k){if(typeof b=="object"&&b!==null&&b.type===ki&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:e:{for(var C=b.key,E=m;E!==null;){if(E.key===C){if(C=b.type,C===ki){if(E.tag===7){r(y,E.sibling),m=s(E,b.props.children),m.return=y,y=m;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&gm(C)===E.type){r(y,E.sibling),m=s(E,b.props),m.ref=wo(y,E,b),m.return=y,y=m;break e}r(y,E);break}else e(y,E);E=E.sibling}b.type===ki?(m=Hs(b.props.children,y.mode,k,b.key),m.return=y,y=m):(k=mc(b.type,b.key,b.props,null,y.mode,k),k.ref=wo(y,m,b),k.return=y,y=k)}return o(y);case _i:e:{for(E=b.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){r(y,m.sibling),m=s(m,b.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else e(y,m);m=m.sibling}m=zd(b,y.mode,k),m.return=y,y=m}return o(y);case zn:return E=b._init,v(y,m,E(b._payload),k)}if(Fo(b))return x(y,m,b,k);if(mo(b))return g(y,m,b,k);_l(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(r(y,m.sibling),m=s(m,b),m.return=y,y=m):(r(y,m),m=$d(b,y.mode,k),m.return=y,y=m),o(y)):r(y,m)}return v}var Ki=h1(!0),f1=h1(!1),Uc=ps(null),Vc=null,Di=null,mp=null;function xp(){mp=Di=Vc=null}function yp(t){var e=Uc.current;Ke(Uc),t._currentValue=e}function z0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Mi(t,e){Vc=t,mp=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function jr(t){var e=t._currentValue;if(mp!==t)if(t={context:t,memoizedValue:e,next:null},Di===null){if(Vc===null)throw Error(ne(308));Di=t,Vc.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return e}var Ls=null;function vp(t){Ls===null?Ls=[t]:Ls.push(t)}function p1(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,vp(e)):(r.next=s.next,s.next=r),e.interleaved=r,jn(t,n)}function jn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Un=!1;function bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,jn(t,r)}return s=n.interleaved,s===null?(e.next=e,vp(n)):(e.next=s.next,s.next=e),n.interleaved=e,jn(t,r)}function uc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ip(t,r)}}function mm(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hc(t,e,r,n){var s=t.updateQueue;Un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,a=i;do{var h=a.lane,p=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,g=a;switch(h=e,p=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(p,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,h=typeof x=="function"?x.call(p,f,h):x,h==null)break e;f=rt({},f,h);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Js|=o,t.lanes=o,t.memoizedState=f}}function xm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ne(191,s));s.call(n)}}}var Va={},Qr=ps(Va),wa=ps(Va),_a=ps(Va);function Ms(t){if(t===Va)throw Error(ne(174));return t}function wp(t,e){switch(He(_a,e),He(wa,t),He(Qr,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:w0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=w0(e,t)}Ke(Qr),He(Qr,e)}function Gi(){Ke(Qr),Ke(wa),Ke(_a)}function m1(t){Ms(_a.current);var e=Ms(Qr.current),r=w0(e,t.type);e!==r&&(He(wa,t),He(Qr,r))}function _p(t){wa.current===t&&(Ke(Qr),Ke(wa))}var et=ps(0);function Wc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function kp(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var dc=Dn.ReactCurrentDispatcher,Fd=Dn.ReactCurrentBatchConfig,Ys=0,tt=null,mt=null,_t=null,qc=!1,Go=!1,ka=0,YS=0;function At(){throw Error(ne(321))}function Sp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Vr(t[r],e[r]))return!1;return!0}function Cp(t,e,r,n,s,i){if(Ys=i,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?ZS:eC,t=r(n,s),Go){i=0;do{if(Go=!1,ka=0,25<=i)throw Error(ne(301));i+=1,_t=mt=null,e.updateQueue=null,dc.current=tC,t=r(n,s)}while(Go)}if(dc.current=Kc,e=mt!==null&&mt.next!==null,Ys=0,_t=mt=tt=null,qc=!1,e)throw Error(ne(300));return t}function jp(){var t=ka!==0;return ka=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?tt.memoizedState=_t=t:_t=_t.next=t,_t}function Er(){if(mt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=_t===null?tt.memoizedState:_t.next;if(e!==null)_t=e,mt=t;else{if(t===null)throw Error(ne(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?tt.memoizedState=_t=t:_t=_t.next=t}return _t}function Sa(t,e){return typeof e=="function"?e(t):e}function Rd(t){var e=Er(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=mt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((Ys&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=n):c=c.next=f,tt.lanes|=d,Js|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=a,Vr(n,e.memoizedState)||(Yt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,tt.lanes|=i,Js|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Bd(t){var e=Er(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Vr(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function x1(){}function y1(t,e){var r=tt,n=Er(),s=e(),i=!Vr(n.memoizedState,s);if(i&&(n.memoizedState=s,Yt=!0),n=n.queue,Ep(w1.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||_t!==null&&_t.memoizedState.tag&1){if(r.flags|=2048,Ca(9,b1.bind(null,r,n,s,e),void 0,null),kt===null)throw Error(ne(349));Ys&30||v1(r,e,s)}return s}function v1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function b1(t,e,r,n){e.value=r,e.getSnapshot=n,_1(e)&&k1(t)}function w1(t,e,r){return r(function(){_1(e)&&k1(t)})}function _1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Vr(t,r)}catch{return!0}}function k1(t){var e=jn(t,1);e!==null&&Ur(e,t,1,-1)}function ym(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=QS.bind(null,tt,t),[e.memoizedState,t]}function Ca(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function S1(){return Er().memoizedState}function hc(t,e,r,n){var s=Kr();tt.flags|=t,s.memoizedState=Ca(1|e,r,void 0,n===void 0?null:n)}function Su(t,e,r,n){var s=Er();n=n===void 0?null:n;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,n!==null&&Sp(n,o.deps)){s.memoizedState=Ca(e,r,i,n);return}}tt.flags|=t,s.memoizedState=Ca(1|e,r,i,n)}function vm(t,e){return hc(8390656,8,t,e)}function Ep(t,e){return Su(2048,8,t,e)}function C1(t,e){return Su(4,2,t,e)}function j1(t,e){return Su(4,4,t,e)}function E1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N1(t,e,r){return r=r!=null?r.concat([t]):null,Su(4,4,E1.bind(null,e,t),r)}function Np(){}function A1(t,e){var r=Er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Sp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function P1(t,e){var r=Er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Sp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function D1(t,e,r){return Ys&21?(Vr(r,e)||(r=Rb(),tt.lanes|=r,Js|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=r)}function JS(t,e){var r=Le;Le=r!==0&&4>r?r:4,t(!0);var n=Fd.transition;Fd.transition={};try{t(!1),e()}finally{Le=r,Fd.transition=n}}function T1(){return Er().memoizedState}function XS(t,e,r){var n=os(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},O1(t))I1(e,r);else if(r=p1(t,e,r,n),r!==null){var s=zt();Ur(r,t,n,s),F1(r,e,n)}}function QS(t,e,r){var n=os(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(O1(t))I1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Vr(a,o)){var c=e.interleaved;c===null?(s.next=s,vp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=p1(t,e,s,n),r!==null&&(s=zt(),Ur(r,t,n,s),F1(r,e,n))}}function O1(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function I1(t,e){Go=qc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function F1(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ip(t,r)}}var Kc={readContext:jr,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},ZS={readContext:jr,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:jr,useEffect:vm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,hc(4194308,4,E1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var r=Kr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Kr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=XS.bind(null,tt,t),[n.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:ym,useDebugValue:Np,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=ym(!1),e=t[0];return t=JS.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=tt,s=Kr();if(Je){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),kt===null)throw Error(ne(349));Ys&30||v1(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,vm(w1.bind(null,n,i,t),[t]),n.flags|=2048,Ca(9,b1.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Kr(),e=kt.identifierPrefix;if(Je){var r=vn,n=yn;r=(n&~(1<<32-zr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ka++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=YS++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eC={readContext:jr,useCallback:A1,useContext:jr,useEffect:Ep,useImperativeHandle:N1,useInsertionEffect:C1,useLayoutEffect:j1,useMemo:P1,useReducer:Rd,useRef:S1,useState:function(){return Rd(Sa)},useDebugValue:Np,useDeferredValue:function(t){var e=Er();return D1(e,mt.memoizedState,t)},useTransition:function(){var t=Rd(Sa)[0],e=Er().memoizedState;return[t,e]},useMutableSource:x1,useSyncExternalStore:y1,useId:T1,unstable_isNewReconciler:!1},tC={readContext:jr,useCallback:A1,useContext:jr,useEffect:Ep,useImperativeHandle:N1,useInsertionEffect:C1,useLayoutEffect:j1,useMemo:P1,useReducer:Bd,useRef:S1,useState:function(){return Bd(Sa)},useDebugValue:Np,useDeferredValue:function(t){var e=Er();return mt===null?e.memoizedState=t:D1(e,mt.memoizedState,t)},useTransition:function(){var t=Bd(Sa)[0],e=Er().memoizedState;return[t,e]},useMutableSource:x1,useSyncExternalStore:y1,useId:T1,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function U0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:rt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Cu={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=zt(),s=os(t),i=_n(n,s);i.payload=e,r!=null&&(i.callback=r),e=ss(t,i,s),e!==null&&(Ur(e,t,s,n),uc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=zt(),s=os(t),i=_n(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ss(t,i,s),e!==null&&(Ur(e,t,s,n),uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=zt(),n=os(t),s=_n(r,n);s.tag=2,e!=null&&(s.callback=e),e=ss(t,s,n),e!==null&&(Ur(e,t,n,r),uc(e,t,n))}};function bm(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!xa(r,n)||!xa(s,i):!0}function R1(t,e,r){var n=!1,s=us,i=e.contextType;return typeof i=="object"&&i!==null?i=jr(i):(s=Xt(e)?Ks:Ot.current,n=e.contextTypes,i=(n=n!=null)?Wi(t,s):us),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function V0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},bp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jr(i):(i=Xt(e)?Ks:Ot.current,s.context=Wi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(U0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cu.enqueueReplaceState(s,s.state,null),Hc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yi(t,e){try{var r="",n=e;do r+=Ak(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ld(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function H0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rC=typeof WeakMap=="function"?WeakMap:Map;function B1(t,e,r){r=_n(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yc||(Yc=!0,ef=n),H0(t,e)},r}function L1(t,e,r){r=_n(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){H0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){H0(t,e),typeof n!="function"&&(is===null?is=new Set([this]):is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function _m(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rC;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=mC.bind(null,t,e,r),e.then(t,t))}function km(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sm(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=_n(-1,1),e.tag=2,ss(r,e,1))),r.lanes|=1),t)}var nC=Dn.ReactCurrentOwner,Yt=!1;function Lt(t,e,r,n){e.child=t===null?f1(e,null,r,n):Ki(e,t.child,r,n)}function Cm(t,e,r,n,s){r=r.render;var i=e.ref;return Mi(e,s),n=Cp(t,e,r,n,i,s),r=jp(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(Je&&r&&fp(e),e.flags|=1,Lt(t,e,n,s),e.child)}function jm(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Rp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,M1(t,e,i,n,s)):(t=mc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:xa,r(o,n)&&t.ref===e.ref)return En(t,e,s)}return e.flags|=1,t=as(i,n),t.ref=e.ref,t.return=e,e.child=t}function M1(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(xa(i,n)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,En(t,e,s)}return W0(t,e,r,n,s)}function $1(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Oi,sr),sr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Oi,sr),sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,He(Oi,sr),sr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,He(Oi,sr),sr|=n;return Lt(t,e,s,r),e.child}function z1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function W0(t,e,r,n,s){var i=Xt(r)?Ks:Ot.current;return i=Wi(e,i),Mi(e,s),r=Cp(t,e,r,n,i,s),n=jp(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(Je&&n&&fp(e),e.flags|=1,Lt(t,e,r,s),e.child)}function Em(t,e,r,n,s){if(Xt(r)){var i=!0;Mc(e)}else i=!1;if(Mi(e,s),e.stateNode===null)fc(t,e),R1(e,r,n),V0(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=Xt(r)?Ks:Ot.current,u=Wi(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&wm(e,o,n,u),Un=!1;var h=e.memoizedState;o.state=h,Hc(e,n,o,s),c=e.memoizedState,a!==n||h!==c||Jt.current||Un?(typeof d=="function"&&(U0(e,r,d,n),c=e.memoizedState),(a=Un||bm(e,r,a,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,g1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Or(e.type,a),o.props=u,f=e.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=jr(c):(c=Xt(r)?Ks:Ot.current,c=Wi(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==c)&&wm(e,o,n,c),Un=!1,h=e.memoizedState,o.state=h,Hc(e,n,o,s);var x=e.memoizedState;a!==f||h!==x||Jt.current||Un?(typeof p=="function"&&(U0(e,r,p,n),x=e.memoizedState),(u=Un||bm(e,r,u,n,h,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return q0(t,e,r,n,i,s)}function q0(t,e,r,n,s,i){z1(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&hm(e,r,!1),En(t,e,i);n=e.stateNode,nC.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ki(e,t.child,null,i),e.child=Ki(e,null,a,i)):Lt(t,e,a,i),e.memoizedState=n.state,s&&hm(e,r,!0),e.child}function U1(t){var e=t.stateNode;e.pendingContext?dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dm(t,e.context,!1),wp(t,e.containerInfo)}function Nm(t,e,r,n,s){return qi(),gp(s),e.flags|=256,Lt(t,e,r,n),e.child}var K0={dehydrated:null,treeContext:null,retryLane:0};function G0(t){return{baseLanes:t,cachePool:null,transitions:null}}function V1(t,e,r){var n=e.pendingProps,s=et.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(et,s&1),t===null)return $0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,n,0,null),t=Hs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=G0(r),e.memoizedState=K0,t):Ap(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sC(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=as(s,c),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=as(a,i):(i=Hs(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?G0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=K0,n}return i=t.child,t=i.sibling,n=as(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ap(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kl(t,e,r,n){return n!==null&&gp(n),Ki(e,t.child,null,r),t=Ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sC(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Ld(Error(ne(422))),kl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Nu({mode:"visible",children:n.children},s,0,null),i=Hs(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ki(e,t.child,null,o),e.child.memoizedState=G0(o),e.memoizedState=K0,i);if(!(e.mode&1))return kl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(ne(419)),n=Ld(i,n,void 0),kl(t,e,o,n)}if(a=(o&t.childLanes)!==0,Yt||a){if(n=kt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jn(t,s),Ur(n,t,s,-1))}return Fp(),n=Ld(Error(ne(421))),kl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ar=ns(s.nextSibling),cr=e,Je=!0,Rr=null,t!==null&&(mr[xr++]=yn,mr[xr++]=vn,mr[xr++]=Gs,yn=t.id,vn=t.overflow,Gs=e),e=Ap(e,n.children),e.flags|=4096,e)}function Am(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),z0(t.return,e,r)}function Md(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function H1(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Lt(t,e,n.children,r),n=et.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Am(t,r,e);else if(t.tag===19)Am(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(He(et,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Wc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Md(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Md(e,!0,r,null,i);break;case"together":Md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Js|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=as(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=as(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function iC(t,e,r){switch(e.tag){case 3:U1(e),qi();break;case 5:m1(e);break;case 1:Xt(e.type)&&Mc(e);break;case 4:wp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;He(Uc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(He(et,et.current&1),e.flags|=128,null):r&e.child.childLanes?V1(t,e,r):(He(et,et.current&1),t=En(t,e,r),t!==null?t.sibling:null);He(et,et.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return H1(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(et,et.current),n)break;return null;case 22:case 23:return e.lanes=0,$1(t,e,r)}return En(t,e,r)}var W1,Y0,q1,K1;W1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Y0=function(){};q1=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ms(Qr.current);var i=null;switch(r){case"input":s=x0(t,s),n=x0(t,n),i=[];break;case"select":s=rt({},s,{value:void 0}),n=rt({},n,{value:void 0}),i=[];break;case"textarea":s=b0(t,s),n=b0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Bc)}_0(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ua.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ua.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&qe("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};K1=function(t,e,r,n){r!==n&&(e.flags|=4)};function _o(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oC(t,e,r){var n=e.pendingProps;switch(pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Xt(e.type)&&Lc(),Pt(e),null;case 3:return n=e.stateNode,Gi(),Ke(Jt),Ke(Ot),kp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rr!==null&&(nf(Rr),Rr=null))),Y0(t,e),Pt(e),null;case 5:_p(e);var s=Ms(_a.current);if(r=e.type,t!==null&&e.stateNode!=null)q1(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ne(166));return Pt(e),null}if(t=Ms(Qr.current),wl(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Jr]=e,n[ba]=i,t=(e.mode&1)!==0,r){case"dialog":qe("cancel",n),qe("close",n);break;case"iframe":case"object":case"embed":qe("load",n);break;case"video":case"audio":for(s=0;s<Bo.length;s++)qe(Bo[s],n);break;case"source":qe("error",n);break;case"img":case"image":case"link":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"input":Lg(n,i),qe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},qe("invalid",n);break;case"textarea":$g(n,i),qe("invalid",n)}_0(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&bl(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&bl(n.textContent,a,t),s=["children",""+a]):ua.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",n)}switch(r){case"input":hl(n),Mg(n,i,!0);break;case"textarea":hl(n),zg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Bc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Jr]=e,t[ba]=n,W1(t,e,!1,!1),e.stateNode=t;e:{switch(o=k0(r,n),r){case"dialog":qe("cancel",t),qe("close",t),s=n;break;case"iframe":case"object":case"embed":qe("load",t),s=n;break;case"video":case"audio":for(s=0;s<Bo.length;s++)qe(Bo[s],t);s=n;break;case"source":qe("error",t),s=n;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=n;break;case"details":qe("toggle",t),s=n;break;case"input":Lg(t,n),s=x0(t,n),qe("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=rt({},n,{value:void 0}),qe("invalid",t);break;case"textarea":$g(t,n),s=b0(t,n),qe("invalid",t);break;default:s=n}_0(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Sb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_b(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&da(t,c):typeof c=="number"&&da(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?c!=null&&i==="onScroll"&&qe("scroll",t):c!=null&&Zf(t,i,c,o))}switch(r){case"input":hl(t),Mg(t,n,!1);break;case"textarea":hl(t),zg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Fi(t,!!n.multiple,i,!1):n.defaultValue!=null&&Fi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)K1(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Ms(_a.current),Ms(Qr.current),wl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Jr]=e,(i=n.nodeValue!==r)&&(t=cr,t!==null))switch(t.tag){case 3:bl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jr]=e,e.stateNode=n}return Pt(e),null;case 13:if(Ke(et),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&ar!==null&&e.mode&1&&!(e.flags&128))d1(),qi(),e.flags|=98560,i=!1;else if(i=wl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Jr]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Rr!==null&&(nf(Rr),Rr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?yt===0&&(yt=3):Fp())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Gi(),Y0(t,e),t===null&&ya(e.stateNode.containerInfo),Pt(e),null;case 10:return yp(e.type._context),Pt(e),null;case 17:return Xt(e.type)&&Lc(),Pt(e),null;case 19:if(Ke(et),i=e.memoizedState,i===null)return Pt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)_o(i,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wc(t),o!==null){for(e.flags|=128,_o(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return He(et,et.current&1|2),e.child}t=t.sibling}i.tail!==null&&lt()>Ji&&(e.flags|=128,n=!0,_o(i,!1),e.lanes=4194304)}else{if(!n)if(t=Wc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Je)return Pt(e),null}else 2*lt()-i.renderingStartTime>Ji&&r!==1073741824&&(e.flags|=128,n=!0,_o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=lt(),e.sibling=null,r=et.current,He(et,n?r&1|2:r&1),e):(Pt(e),null);case 22:case 23:return Ip(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?sr&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function aC(t,e){switch(pp(e),e.tag){case 1:return Xt(e.type)&&Lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),Ke(Jt),Ke(Ot),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _p(e),null;case 13:if(Ke(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(et),null;case 4:return Gi(),null;case 10:return yp(e.type._context),null;case 22:case 23:return Ip(),null;case 24:return null;default:return null}}var Sl=!1,Tt=!1,lC=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ti(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){st(t,e,n)}else r.current=null}function J0(t,e,r){try{r()}catch(n){st(t,e,n)}}var Pm=!1;function cC(t,e){if(O0=Ic,t=Qb(),hp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(a=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===r&&++u===s&&(a=o),h===i&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(I0={focusedElem:t,selectionRange:r},Ic=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,v=x.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Or(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(k){st(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return x=Pm,Pm=!1,x}function Yo(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&J0(e,r,i)}s=s.next}while(s!==n)}}function ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function X0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function G1(t){var e=t.alternate;e!==null&&(t.alternate=null,G1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jr],delete e[ba],delete e[B0],delete e[WS],delete e[qS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y1(t){return t.tag===5||t.tag===3||t.tag===4}function Dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Q0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Bc));else if(n!==4&&(t=t.child,t!==null))for(Q0(t,e,r),t=t.sibling;t!==null;)Q0(t,e,r),t=t.sibling}function Z0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Z0(t,e,r),t=t.sibling;t!==null;)Z0(t,e,r),t=t.sibling}var Ct=null,Ir=!1;function On(t,e,r){for(r=r.child;r!==null;)J1(t,e,r),r=r.sibling}function J1(t,e,r){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(yu,r)}catch{}switch(r.tag){case 5:Tt||Ti(r,e);case 6:var n=Ct,s=Ir;Ct=null,On(t,e,r),Ct=n,Ir=s,Ct!==null&&(Ir?(t=Ct,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ct.removeChild(r.stateNode));break;case 18:Ct!==null&&(Ir?(t=Ct,r=r.stateNode,t.nodeType===8?Td(t.parentNode,r):t.nodeType===1&&Td(t,r),ga(t)):Td(Ct,r.stateNode));break;case 4:n=Ct,s=Ir,Ct=r.stateNode.containerInfo,Ir=!0,On(t,e,r),Ct=n,Ir=s;break;case 0:case 11:case 14:case 15:if(!Tt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&J0(r,e,o),s=s.next}while(s!==n)}On(t,e,r);break;case 1:if(!Tt&&(Ti(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){st(r,e,a)}On(t,e,r);break;case 21:On(t,e,r);break;case 22:r.mode&1?(Tt=(n=Tt)||r.memoizedState!==null,On(t,e,r),Tt=n):On(t,e,r);break;default:On(t,e,r)}}function Tm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lC),e.forEach(function(n){var s=yC.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Dr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Ir=!1;break e;case 3:Ct=a.stateNode.containerInfo,Ir=!0;break e;case 4:Ct=a.stateNode.containerInfo,Ir=!0;break e}a=a.return}if(Ct===null)throw Error(ne(160));J1(i,o,s),Ct=null,Ir=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){st(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X1(e,t),e=e.sibling}function X1(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),Wr(t),n&4){try{Yo(3,t,t.return),ju(3,t)}catch(g){st(t,t.return,g)}try{Yo(5,t,t.return)}catch(g){st(t,t.return,g)}}break;case 1:Dr(e,t),Wr(t),n&512&&r!==null&&Ti(r,r.return);break;case 5:if(Dr(e,t),Wr(t),n&512&&r!==null&&Ti(r,r.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(g){st(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vb(s,i),k0(a,o);var u=k0(a,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Sb(s,f):d==="dangerouslySetInnerHTML"?_b(s,f):d==="children"?da(s,f):Zf(s,d,f,u)}switch(a){case"input":y0(s,i);break;case"textarea":bb(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Fi(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fi(s,!!i.multiple,i.defaultValue,!0):Fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ba]=i}catch(g){st(t,t.return,g)}}break;case 6:if(Dr(e,t),Wr(t),n&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){st(t,t.return,g)}}break;case 3:if(Dr(e,t),Wr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(g){st(t,t.return,g)}break;case 4:Dr(e,t),Wr(t);break;case 13:Dr(e,t),Wr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tp=lt())),n&4&&Tm(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Tt=(u=Tt)||d,Dr(e,t),Tt=u):Dr(e,t),Wr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ce=t,d=t.child;d!==null;){for(f=ce=d;ce!==null;){switch(h=ce,p=h.child,h.tag){case 0:case 11:case 14:case 15:Yo(4,h,h.return);break;case 1:Ti(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){st(n,r,g)}}break;case 5:Ti(h,h.return);break;case 22:if(h.memoizedState!==null){Im(f);continue}}p!==null?(p.return=h,ce=p):Im(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=kb("display",o))}catch(g){st(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){st(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dr(e,t),Wr(t),n&4&&Tm(t);break;case 21:break;default:Dr(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Y1(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(da(s,""),n.flags&=-33);var i=Dm(t);Z0(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Dm(t);Q0(t,a,o);break;default:throw Error(ne(161))}}catch(c){st(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uC(t,e,r){ce=t,Q1(t)}function Q1(t,e,r){for(var n=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Sl;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Tt;a=Sl;var u=Tt;if(Sl=o,(Tt=c)&&!u)for(ce=s;ce!==null;)o=ce,c=o.child,o.tag===22&&o.memoizedState!==null?Fm(s):c!==null?(c.return=o,ce=c):Fm(s);for(;i!==null;)ce=i,Q1(i),i=i.sibling;ce=s,Sl=a,Tt=u}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):Om(t)}}function Om(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||ju(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Tt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Or(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xm(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}xm(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ga(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Tt||e.flags&512&&X0(e)}catch(h){st(e,e.return,h)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function Im(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function Fm(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ju(4,e)}catch(c){st(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){st(e,s,c)}}var i=e.return;try{X0(e)}catch(c){st(e,i,c)}break;case 5:var o=e.return;try{X0(e)}catch(c){st(e,o,c)}}}catch(c){st(e,e.return,c)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var dC=Math.ceil,Gc=Dn.ReactCurrentDispatcher,Pp=Dn.ReactCurrentOwner,Sr=Dn.ReactCurrentBatchConfig,Oe=0,kt=null,ht=null,jt=0,sr=0,Oi=ps(0),yt=0,ja=null,Js=0,Eu=0,Dp=0,Jo=null,qt=null,Tp=0,Ji=1/0,hn=null,Yc=!1,ef=null,is=null,Cl=!1,Yn=null,Jc=0,Xo=0,tf=null,pc=-1,gc=0;function zt(){return Oe&6?lt():pc!==-1?pc:pc=lt()}function os(t){return t.mode&1?Oe&2&&jt!==0?jt&-jt:GS.transition!==null?(gc===0&&(gc=Rb()),gc):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Vb(t.type)),t):1}function Ur(t,e,r,n){if(50<Xo)throw Xo=0,tf=null,Error(ne(185));$a(t,r,n),(!(Oe&2)||t!==kt)&&(t===kt&&(!(Oe&2)&&(Eu|=r),yt===4&&qn(t,jt)),Qt(t,n),r===1&&Oe===0&&!(e.mode&1)&&(Ji=lt()+500,ku&&gs()))}function Qt(t,e){var r=t.callbackNode;Gk(t,e);var n=Oc(t,t===kt?jt:0);if(n===0)r!==null&&Hg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Hg(r),e===1)t.tag===0?KS(Rm.bind(null,t)):l1(Rm.bind(null,t)),VS(function(){!(Oe&6)&&gs()}),r=null;else{switch(Bb(n)){case 1:r=sp;break;case 4:r=Ib;break;case 16:r=Tc;break;case 536870912:r=Fb;break;default:r=Tc}r=ow(r,Z1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Z1(t,e){if(pc=-1,gc=0,Oe&6)throw Error(ne(327));var r=t.callbackNode;if($i()&&t.callbackNode!==r)return null;var n=Oc(t,t===kt?jt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xc(t,n);else{e=n;var s=Oe;Oe|=2;var i=tw();(kt!==t||jt!==e)&&(hn=null,Ji=lt()+500,Vs(t,e));do try{pC();break}catch(a){ew(t,a)}while(1);xp(),Gc.current=i,Oe=s,ht!==null?e=0:(kt=null,jt=0,e=yt)}if(e!==0){if(e===2&&(s=N0(t),s!==0&&(n=s,e=rf(t,s))),e===1)throw r=ja,Vs(t,0),qn(t,n),Qt(t,lt()),r;if(e===6)qn(t,n);else{if(s=t.current.alternate,!(n&30)&&!hC(s)&&(e=Xc(t,n),e===2&&(i=N0(t),i!==0&&(n=i,e=rf(t,i))),e===1))throw r=ja,Vs(t,0),qn(t,n),Qt(t,lt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ne(345));case 2:Ds(t,qt,hn);break;case 3:if(qn(t,n),(n&130023424)===n&&(e=Tp+500-lt(),10<e)){if(Oc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=R0(Ds.bind(null,t,qt,hn),e);break}Ds(t,qt,hn);break;case 4:if(qn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-zr(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dC(n/1960))-n,10<n){t.timeoutHandle=R0(Ds.bind(null,t,qt,hn),n);break}Ds(t,qt,hn);break;case 5:Ds(t,qt,hn);break;default:throw Error(ne(329))}}}return Qt(t,lt()),t.callbackNode===r?Z1.bind(null,t):null}function rf(t,e){var r=Jo;return t.current.memoizedState.isDehydrated&&(Vs(t,e).flags|=256),t=Xc(t,e),t!==2&&(e=qt,qt=r,e!==null&&nf(e)),t}function nf(t){qt===null?qt=t:qt.push.apply(qt,t)}function hC(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Vr(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~Dp,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zr(e),n=1<<r;t[r]=-1,e&=~n}}function Rm(t){if(Oe&6)throw Error(ne(327));$i();var e=Oc(t,0);if(!(e&1))return Qt(t,lt()),null;var r=Xc(t,e);if(t.tag!==0&&r===2){var n=N0(t);n!==0&&(e=n,r=rf(t,n))}if(r===1)throw r=ja,Vs(t,0),qn(t,e),Qt(t,lt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,qt,hn),Qt(t,lt()),null}function Op(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(Ji=lt()+500,ku&&gs())}}function Xs(t){Yn!==null&&Yn.tag===0&&!(Oe&6)&&$i();var e=Oe;Oe|=1;var r=Sr.transition,n=Le;try{if(Sr.transition=null,Le=1,t)return t()}finally{Le=n,Sr.transition=r,Oe=e,!(Oe&6)&&gs()}}function Ip(){sr=Oi.current,Ke(Oi)}function Vs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,US(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(pp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lc();break;case 3:Gi(),Ke(Jt),Ke(Ot),kp();break;case 5:_p(n);break;case 4:Gi();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:yp(n.type._context);break;case 22:case 23:Ip()}r=r.return}if(kt=t,ht=t=as(t.current,null),jt=sr=e,yt=0,ja=null,Dp=Eu=Js=0,qt=Jo=null,Ls!==null){for(e=0;e<Ls.length;e++)if(r=Ls[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ls=null}return t}function ew(t,e){do{var r=ht;try{if(xp(),dc.current=Kc,qc){for(var n=tt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qc=!1}if(Ys=0,_t=mt=tt=null,Go=!1,ka=0,Pp.current=null,r===null||r.return===null){yt=1,ja=e,ht=null;break}e:{var i=t,o=r.return,a=r,c=e;if(e=jt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=km(o);if(p!==null){p.flags&=-257,Sm(p,o,a,i,e),p.mode&1&&_m(i,u,e),e=p,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){_m(i,u,e),Fp();break e}c=Error(ne(426))}}else if(Je&&a.mode&1){var v=km(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Sm(v,o,a,i,e),gp(Yi(c,a));break e}}i=c=Yi(c,a),yt!==4&&(yt=2),Jo===null?Jo=[i]:Jo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=B1(i,c,e);mm(i,y);break e;case 1:a=c;var m=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(is===null||!is.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=L1(i,a,e);mm(i,k);break e}}i=i.return}while(i!==null)}nw(r)}catch(C){e=C,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(1)}function tw(){var t=Gc.current;return Gc.current=Kc,t===null?Kc:t}function Fp(){(yt===0||yt===3||yt===2)&&(yt=4),kt===null||!(Js&268435455)&&!(Eu&268435455)||qn(kt,jt)}function Xc(t,e){var r=Oe;Oe|=2;var n=tw();(kt!==t||jt!==e)&&(hn=null,Vs(t,e));do try{fC();break}catch(s){ew(t,s)}while(1);if(xp(),Oe=r,Gc.current=n,ht!==null)throw Error(ne(261));return kt=null,jt=0,yt}function fC(){for(;ht!==null;)rw(ht)}function pC(){for(;ht!==null&&!Mk();)rw(ht)}function rw(t){var e=iw(t.alternate,t,sr);t.memoizedProps=t.pendingProps,e===null?nw(t):ht=e,Pp.current=null}function nw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=aC(r,e),r!==null){r.flags&=32767,ht=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ht=null;return}}else if(r=oC(r,e,sr),r!==null){ht=r;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);yt===0&&(yt=5)}function Ds(t,e,r){var n=Le,s=Sr.transition;try{Sr.transition=null,Le=1,gC(t,e,r,n)}finally{Sr.transition=s,Le=n}return null}function gC(t,e,r,n){do $i();while(Yn!==null);if(Oe&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Yk(t,i),t===kt&&(ht=kt=null,jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Cl||(Cl=!0,ow(Tc,function(){return $i(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Sr.transition,Sr.transition=null;var o=Le;Le=1;var a=Oe;Oe|=4,Pp.current=null,cC(t,r),X1(r,t),FS(I0),Ic=!!O0,I0=O0=null,t.current=r,uC(r),$k(),Oe=a,Le=o,Sr.transition=i}else t.current=r;if(Cl&&(Cl=!1,Yn=t,Jc=s),i=t.pendingLanes,i===0&&(is=null),Vk(r.stateNode),Qt(t,lt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yc)throw Yc=!1,t=ef,ef=null,t;return Jc&1&&t.tag!==0&&$i(),i=t.pendingLanes,i&1?t===tf?Xo++:(Xo=0,tf=t):Xo=0,gs(),null}function $i(){if(Yn!==null){var t=Bb(Jc),e=Sr.transition,r=Le;try{if(Sr.transition=null,Le=16>t?16:t,Yn===null)var n=!1;else{if(t=Yn,Yn=null,Jc=0,Oe&6)throw Error(ne(331));var s=Oe;for(Oe|=4,ce=t.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ce=u;ce!==null;){var d=ce;switch(d.tag){case 0:case 11:case 15:Yo(8,d,i)}var f=d.child;if(f!==null)f.return=d,ce=f;else for(;ce!==null;){d=ce;var h=d.sibling,p=d.return;if(G1(d),d===u){ce=null;break}if(h!==null){h.return=p,ce=h;break}ce=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ce=y;break e}ce=i.return}}var m=t.current;for(ce=m;ce!==null;){o=ce;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ce=b;else e:for(o=m;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ju(9,a)}}catch(C){st(a,a.return,C)}if(a===o){ce=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ce=k;break e}ce=a.return}}if(Oe=s,gs(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(yu,t)}catch{}n=!0}return n}finally{Le=r,Sr.transition=e}}return!1}function Bm(t,e,r){e=Yi(r,e),e=B1(t,e,1),t=ss(t,e,1),e=zt(),t!==null&&($a(t,1,e),Qt(t,e))}function st(t,e,r){if(t.tag===3)Bm(t,t,r);else for(;e!==null;){if(e.tag===3){Bm(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(is===null||!is.has(n))){t=Yi(r,t),t=L1(e,t,1),e=ss(e,t,1),t=zt(),e!==null&&($a(e,1,t),Qt(e,t));break}}e=e.return}}function mC(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&r,kt===t&&(jt&r)===r&&(yt===4||yt===3&&(jt&130023424)===jt&&500>lt()-Tp?Vs(t,0):Dp|=r),Qt(t,e)}function sw(t,e){e===0&&(t.mode&1?(e=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):e=1);var r=zt();t=jn(t,e),t!==null&&($a(t,e,r),Qt(t,r))}function xC(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sw(t,r)}function yC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(e),sw(t,r)}var iw;iw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Yt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Yt=!1,iC(t,e,r);Yt=!!(t.flags&131072)}else Yt=!1,Je&&e.flags&1048576&&c1(e,zc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;fc(t,e),t=e.pendingProps;var s=Wi(e,Ot.current);Mi(e,r),s=Cp(null,e,n,t,s,r);var i=jp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(n)?(i=!0,Mc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bp(e),s.updater=Cu,e.stateNode=s,s._reactInternals=e,V0(e,n,t,r),e=q0(null,e,n,!0,i,r)):(e.tag=0,Je&&i&&fp(e),Lt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=bC(n),t=Or(n,t),s){case 0:e=W0(null,e,n,t,r);break e;case 1:e=Em(null,e,n,t,r);break e;case 11:e=Cm(null,e,n,t,r);break e;case 14:e=jm(null,e,n,Or(n.type,t),r);break e}throw Error(ne(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Or(n,s),W0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Or(n,s),Em(t,e,n,s,r);case 3:e:{if(U1(e),t===null)throw Error(ne(387));n=e.pendingProps,i=e.memoizedState,s=i.element,g1(t,e),Hc(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Yi(Error(ne(423)),e),e=Nm(t,e,n,r,s);break e}else if(n!==s){s=Yi(Error(ne(424)),e),e=Nm(t,e,n,r,s);break e}else for(ar=ns(e.stateNode.containerInfo.firstChild),cr=e,Je=!0,Rr=null,r=f1(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qi(),n===s){e=En(t,e,r);break e}Lt(t,e,n,r)}e=e.child}return e;case 5:return m1(e),t===null&&$0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,F0(n,s)?o=null:i!==null&&F0(n,i)&&(e.flags|=32),z1(t,e),Lt(t,e,o,r),e.child;case 6:return t===null&&$0(e),null;case 13:return V1(t,e,r);case 4:return wp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ki(e,null,n,r):Lt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Or(n,s),Cm(t,e,n,s,r);case 7:return Lt(t,e,e.pendingProps,r),e.child;case 8:return Lt(t,e,e.pendingProps.children,r),e.child;case 12:return Lt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,He(Uc,n._currentValue),n._currentValue=o,i!==null)if(Vr(i.value,o)){if(i.children===s.children&&!Jt.current){e=En(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=_n(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),z0(i.return,r,e),a.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),z0(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Mi(e,r),s=jr(s),n=n(s),e.flags|=1,Lt(t,e,n,r),e.child;case 14:return n=e.type,s=Or(n,e.pendingProps),s=Or(n.type,s),jm(t,e,n,s,r);case 15:return M1(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Or(n,s),fc(t,e),e.tag=1,Xt(n)?(t=!0,Mc(e)):t=!1,Mi(e,r),R1(e,n,s),V0(e,n,s,r),q0(null,e,n,!0,t,r);case 19:return H1(t,e,r);case 22:return $1(t,e,r)}throw Error(ne(156,e.tag))};function ow(t,e){return Ob(t,e)}function vC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,e,r,n){return new vC(t,e,r,n)}function Rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bC(t){if(typeof t=="function")return Rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tp)return 11;if(t===rp)return 14}return 2}function as(t,e){var r=t.alternate;return r===null?(r=wr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mc(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ki:return Hs(r.children,s,i,e);case ep:o=8,s|=8;break;case f0:return t=wr(12,r,e,s|2),t.elementType=f0,t.lanes=i,t;case p0:return t=wr(13,r,e,s),t.elementType=p0,t.lanes=i,t;case g0:return t=wr(19,r,e,s),t.elementType=g0,t.lanes=i,t;case mb:return Nu(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pb:o=10;break e;case gb:o=9;break e;case tp:o=11;break e;case rp:o=14;break e;case zn:o=16,n=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=wr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Hs(t,e,r,n){return t=wr(7,t,n,e),t.lanes=r,t}function Nu(t,e,r,n){return t=wr(22,t,n,e),t.elementType=mb,t.lanes=r,t.stateNode={isHidden:!1},t}function $d(t,e,r){return t=wr(6,t,null,e),t.lanes=r,t}function zd(t,e,r){return e=wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wC(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bp(t,e,r,n,s,i,o,a,c){return t=new wC(t,e,r,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(i),t}function _C(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function aw(t){if(!t)return us;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(Xt(r))return a1(t,r,e)}return e}function lw(t,e,r,n,s,i,o,a,c){return t=Bp(r,n,!0,t,s,i,o,a,c),t.context=aw(null),r=t.current,n=zt(),s=os(r),i=_n(n,s),i.callback=e??null,ss(r,i,s),t.current.lanes=s,$a(t,s,n),Qt(t,n),t}function Au(t,e,r,n){var s=e.current,i=zt(),o=os(s);return r=aw(r),e.context===null?e.context=r:e.pendingContext=r,e=_n(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ss(s,e,o),t!==null&&(Ur(t,s,o,i),uc(t,s,o)),o}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Lp(t,e){Lm(t,e),(t=t.alternate)&&Lm(t,e)}function kC(){return null}var cw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mp(t){this._internalRoot=t}Pu.prototype.render=Mp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Au(t,e,null,null)};Pu.prototype.unmount=Mp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xs(function(){Au(null,t,null,null)}),e[Cn]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=$b();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wn.length&&e!==0&&e<Wn[r].priority;r++);Wn.splice(r,0,t),r===0&&Ub(t)}};function $p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mm(){}function SC(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Qc(o);i.call(u)}}var o=lw(e,n,t,0,null,!1,!1,"",Mm);return t._reactRootContainer=o,t[Cn]=o.current,ya(t.nodeType===8?t.parentNode:t),Xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=Qc(c);a.call(u)}}var c=Bp(t,0,!1,null,null,!1,!1,"",Mm);return t._reactRootContainer=c,t[Cn]=c.current,ya(t.nodeType===8?t.parentNode:t),Xs(function(){Au(e,c,r,n)}),c}function Tu(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Qc(o);a.call(c)}}Au(e,o,t,s)}else o=SC(r,e,t,s,n);return Qc(o)}Lb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ro(e.pendingLanes);r!==0&&(ip(e,r|1),Qt(e,lt()),!(Oe&6)&&(Ji=lt()+500,gs()))}break;case 13:Xs(function(){var n=jn(t,1);if(n!==null){var s=zt();Ur(n,t,1,s)}}),Lp(t,1)}};op=function(t){if(t.tag===13){var e=jn(t,134217728);if(e!==null){var r=zt();Ur(e,t,134217728,r)}Lp(t,134217728)}};Mb=function(t){if(t.tag===13){var e=os(t),r=jn(t,e);if(r!==null){var n=zt();Ur(r,t,e,n)}Lp(t,e)}};$b=function(){return Le};zb=function(t,e){var r=Le;try{return Le=t,e()}finally{Le=r}};C0=function(t,e,r){switch(e){case"input":if(y0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=_u(n);if(!s)throw Error(ne(90));yb(n),y0(n,s)}}}break;case"textarea":bb(t,r);break;case"select":e=r.value,e!=null&&Fi(t,!!r.multiple,e,!1)}};Eb=Op;Nb=Xs;var CC={usingClientEntryPoint:!1,Events:[Ua,Ei,_u,Cb,jb,Op]},ko={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jC={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Db(t),t===null?null:t.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||kC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{yu=jl.inject(jC),Xr=jl}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CC;hr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$p(e))throw Error(ne(200));return _C(t,e,null,r)};hr.createRoot=function(t,e){if(!$p(t))throw Error(ne(299));var r=!1,n="",s=cw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bp(t,1,!1,null,null,r,!1,n,s),t[Cn]=e.current,ya(t.nodeType===8?t.parentNode:t),new Mp(e)};hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=Db(e),t=t===null?null:t.stateNode,t};hr.flushSync=function(t){return Xs(t)};hr.hydrate=function(t,e,r){if(!Du(e))throw Error(ne(200));return Tu(null,t,e,!0,r)};hr.hydrateRoot=function(t,e,r){if(!$p(t))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=cw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=lw(e,null,t,1,r??null,s,!1,i,o),t[Cn]=e.current,ya(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Pu(e)};hr.render=function(t,e,r){if(!Du(e))throw Error(ne(200));return Tu(null,t,e,!1,r)};hr.unmountComponentAtNode=function(t){if(!Du(t))throw Error(ne(40));return t._reactRootContainer?(Xs(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};hr.unstable_batchedUpdates=Op;hr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Du(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Tu(t,e,r,!1,n)};hr.version="18.3.1-next-f1338f8080-20240426";function uw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uw)}catch(t){console.error(t)}}uw(),ub.exports=hr;var dw=ub.exports,$m=dw;d0.createRoot=$m.createRoot,d0.hydrateRoot=$m.hydrateRoot;const EC="modulepreload",NC=function(t){return"/"+t},zm={},Cr=function(e,r,n){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=NC(i),i in zm)return;zm[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":EC,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var AC=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function hw({packageName:t,customMessages:e}){let r=t;function n(i,o){if(!o)return`${r}: ${i}`;let a=i;const c=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const u of c){const d=(o[u[1]]||"").toString();a=a.replace(`{{${u[1]}}}`,d)}return`${r}: ${a}`}const s={...AC,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(s,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(s.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(s.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(s.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}var fw=Object.defineProperty,PC=Object.getOwnPropertyDescriptor,DC=Object.getOwnPropertyNames,TC=Object.prototype.hasOwnProperty,OC=(t,e)=>{for(var r in e)fw(t,r,{get:e[r],enumerable:!0})},Um=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of DC(e))!TC.call(t,s)&&s!==r&&fw(t,s,{get:()=>e[s],enumerable:!(n=PC(e,s))||n.enumerable});return t},IC=(t,e,r)=>(Um(t,e,"default"),r&&Um(r,e,"default")),pw=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,FC=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],gw="pk_live_",RC="pk_test_";function mw(t){if(!t.endsWith("$"))return!1;const e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}function Vm(t,e={}){if(t=t||"",!t||!sf(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!sf(t))throw new Error("Publishable key not valid.");return null}const r=t.startsWith(gw)?"production":"development";let n;try{n=pw(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!mw(n)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=n.slice(0,-1);return e.proxyUrl?s=e.proxyUrl:r!=="development"&&e.domain&&e.isSatellite&&(s=`clerk.${e.domain}`),{instanceType:r,frontendApi:s}}function sf(t=""){try{if(!(t.startsWith(gw)||t.startsWith(RC)))return!1;const r=t.split("_");if(r.length!==3)return!1;const n=r[2];if(!n)return!1;const s=pw(n);return mw(s)}catch{return!1}}function BC(){const t=new Map;return{isDevOrStagingUrl:e=>{if(!e)return!1;const r=typeof e=="string"?e:e.hostname;let n=t.get(r);return n===void 0&&(n=FC.some(s=>r.endsWith(s)),t.set(r,n)),n}}}var LC="METHOD_CALLED",MC=.1;function $C(t,e){return{event:LC,eventSamplingRate:MC,payload:{method:t,...e}}}var xw={exports:{}},yw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=T;function zC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var UC=typeof Object.is=="function"?Object.is:zC,VC=Xi.useState,HC=Xi.useEffect,WC=Xi.useLayoutEffect,qC=Xi.useDebugValue;function KC(t,e){var r=e(),n=VC({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return WC(function(){s.value=r,s.getSnapshot=e,Ud(s)&&i({inst:s})},[t,r,e]),HC(function(){return Ud(s)&&i({inst:s}),t(function(){Ud(s)&&i({inst:s})})},[t]),qC(r),r}function Ud(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!UC(t,r)}catch{return!0}}function GC(t,e){return e()}var YC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GC:KC;yw.useSyncExternalStore=Xi.useSyncExternalStore!==void 0?Xi.useSyncExternalStore:YC;xw.exports=yw;var vw=xw.exports;const bw=0,ww=1,_w=2,Hm=3;var Wm=Object.prototype.hasOwnProperty;function of(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&of(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(Wm.call(t,r)&&++n&&!Wm.call(e,r)||!(r in e)||!of(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const Br=new WeakMap,Jn=()=>{},xt=Jn(),Zc=Object,Se=t=>t===xt,br=t=>typeof t=="function",Nn=(t,e)=>({...t,...e}),kw=t=>br(t.then),Vd={},El={},zp="undefined",Ha=typeof window!=zp,af=typeof document!=zp,JC=Ha&&"Deno"in window,XC=()=>Ha&&typeof window.requestAnimationFrame!=zp,Vn=(t,e)=>{const r=Br.get(t);return[()=>!Se(e)&&t.get(e)||Vd,n=>{if(!Se(e)){const s=t.get(e);e in El||(El[e]=s),r[5](e,Nn(s,n),s||Vd)}},r[6],()=>!Se(e)&&e in El?El[e]:!Se(e)&&t.get(e)||Vd]};let lf=!0;const QC=()=>lf,[cf,uf]=Ha&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Jn,Jn],ZC=()=>{const t=af&&document.visibilityState;return Se(t)||t!=="hidden"},ej=t=>(af&&document.addEventListener("visibilitychange",t),cf("focus",t),()=>{af&&document.removeEventListener("visibilitychange",t),uf("focus",t)}),tj=t=>{const e=()=>{lf=!0,t()},r=()=>{lf=!1};return cf("online",e),cf("offline",r),()=>{uf("online",e),uf("offline",r)}},rj={isOnline:QC,isVisible:ZC},nj={initFocus:ej,initReconnect:tj},qm=!Y.useId,Ea=!Ha||JC,sj=t=>XC()?window.requestAnimationFrame(t):setTimeout(t,1),Qo=Ea?T.useEffect:T.useLayoutEffect,Hd=typeof navigator<"u"&&navigator.connection,Km=!Ea&&Hd&&(["slow-2g","2g"].includes(Hd.effectiveType)||Hd.saveData),Nl=new WeakMap,ij=t=>Zc.prototype.toString.call(t),Wd=(t,e)=>t===`[object ${e}]`;let oj=0;const df=t=>{const e=typeof t,r=ij(t),n=Wd(r,"Date"),s=Wd(r,"RegExp"),i=Wd(r,"Object");let o,a;if(Zc(t)===t&&!n&&!s){if(o=Nl.get(t),o)return o;if(o=++oj+"~",Nl.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=df(t[a])+",";Nl.set(t,o)}if(i){o="#";const c=Zc.keys(t).sort();for(;!Se(a=c.pop());)Se(t[a])||(o+=a+":"+df(t[a])+",");Nl.set(t,o)}}else o=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Qi=t=>{if(br(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?df(t):"",[t,e]};let aj=0;const hf=()=>++aj;async function Sw(...t){const[e,r,n,s]=t,i=Nn({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=h=>typeof a=="function"?a(h):a!==!1,d=i.throwOnError;if(br(r)){const h=r,p=[],x=e.keys();for(const g of x)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&p.push(g);return Promise.all(p.map(f))}return f(r);async function f(h){const[p]=Qi(h);if(!p)return;const[x,g]=Vn(e,p),[v,y,m,b]=Br.get(e),k=()=>{const M=v[p];return(br(i.revalidate)?i.revalidate(x().data,h):i.revalidate!==!1)&&(delete m[p],delete b[p],M&&M[0])?M[0](_w).then(()=>x().data):x().data};if(t.length<3)return k();let C=n,E,j=!1;const w=hf();y[p]=[w,0];const _=!Se(c),S=x(),A=S.data,N=S._c,F=Se(N)?A:N;if(_&&(c=br(c)?c(F,A):c,g({data:c,_c:F})),br(C))try{C=C(F)}catch(M){E=M,j=!0}if(C&&kw(C))if(C=await C.catch(M=>{E=M,j=!0}),w!==y[p][0]){if(j)throw E;return C}else j&&_&&u(E)&&(o=!0,g({data:F,_c:xt}));if(o&&!j)if(br(o)){const M=o(C,F);g({data:M,error:xt,_c:xt})}else g({data:C,error:xt,_c:xt});if(y[p][1]=hf(),Promise.resolve(k()).then(()=>{g({_c:xt})}),j){if(d)throw E;return}return C}}const Gm=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},Cw=(t,e)=>{if(!Br.has(t)){const r=Nn(nj,e),n=Object.create(null),s=Sw.bind(xt,t);let i=Jn;const o=Object.create(null),a=(d,f)=>{const h=o[d]||[];return o[d]=h,h.push(f),()=>h.splice(h.indexOf(f),1)},c=(d,f,h)=>{t.set(d,f);const p=o[d];if(p)for(const x of p)x(f,h)},u=()=>{if(!Br.has(t)&&(Br.set(t,[n,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Ea)){const d=r.initFocus(setTimeout.bind(xt,Gm.bind(xt,n,bw))),f=r.initReconnect(setTimeout.bind(xt,Gm.bind(xt,n,ww)));i=()=>{d&&d(),f&&f(),Br.delete(t)}}};return u(),[t,s,u,i]}return[t,Br.get(t)[4]]},lj=(t,e,r,n,s)=>{const i=r.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;!Se(i)&&o>i||setTimeout(n,a,s)},cj=of,[Wa,jw]=Cw(new Map),Ew=Nn({onLoadingSlow:Jn,onSuccess:Jn,onError:Jn,onErrorRetry:lj,onDiscarded:Jn,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Km?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Km?5e3:3e3,compare:cj,isPaused:()=>!1,cache:Wa,mutate:jw,fallback:{}},rj),Nw=(t,e)=>{const r=Nn(t,e);if(e){const{use:n,fallback:s}=t,{use:i,fallback:o}=e;n&&i&&(r.use=n.concat(i)),s&&o&&(r.fallback=Nn(s,o))}return r},ff=T.createContext({}),uj=t=>{const{value:e}=t,r=T.useContext(ff),n=br(e),s=T.useMemo(()=>n?e(r):e,[n,r,e]),i=T.useMemo(()=>n?s:Nw(r,s),[n,r,s]),o=s&&s.provider,a=T.useRef(xt);o&&!a.current&&(a.current=Cw(o(i.cache||Wa),s));const c=a.current;return c&&(i.cache=c[0],i.mutate=c[1]),Qo(()=>{if(c)return c[2]&&c[2](),c[3]},[]),T.createElement(ff.Provider,Nn(t,{value:i}))},Aw="$inf$",Pw=Ha&&window.__SWR_DEVTOOLS_USE__,dj=Pw?window.__SWR_DEVTOOLS_USE__:[],hj=()=>{Pw&&(window.__SWR_DEVTOOLS_REACT__=Y)},Dw=t=>br(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Tw=()=>Nn(Ew,T.useContext(ff)),fj=(t,e)=>{const[r,n]=Qi(t),[,,,s]=Br.get(Wa);if(s[r])return s[r];const i=e(n);return s[r]=i,i},pj=t=>(e,r,n)=>t(e,r&&((...i)=>{const[o]=Qi(e),[,,,a]=Br.get(Wa);if(o.startsWith(Aw))return r(...i);const c=a[o];return Se(c)?r(...i):(delete a[o],c)}),n),gj=dj.concat(pj),mj=t=>function(...r){const n=Tw(),[s,i,o]=Dw(r),a=Nw(n,o);let c=t;const{use:u}=a,d=(u||[]).concat(gj);for(let f=d.length;f--;)c=d[f](c);return c(s,i||a.fetcher||null,a)},xj=(t,e,r)=>{const n=e[t]||(e[t]=[]);return n.push(r),()=>{const s=n.indexOf(r);s>=0&&(n[s]=n[n.length-1],n.pop())}},yj=(t,e)=>(...r)=>{const[n,s,i]=Dw(r),o=(i.use||[]).concat(e);return t(n,s,{...i,use:o})};hj();const vj=()=>{},bj=vj(),pf=Object,Ym=t=>t===bj,wj=t=>typeof t=="function",Al=new WeakMap,_j=t=>pf.prototype.toString.call(t),qd=(t,e)=>t===`[object ${e}]`;let kj=0;const gf=t=>{const e=typeof t,r=_j(t),n=qd(r,"Date"),s=qd(r,"RegExp"),i=qd(r,"Object");let o,a;if(pf(t)===t&&!n&&!s){if(o=Al.get(t),o)return o;if(o=++kj+"~",Al.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=gf(t[a])+",";Al.set(t,o)}if(i){o="#";const c=pf.keys(t).sort();for(;!Ym(a=c.pop());)Ym(t[a])||(o+=a+":"+gf(t[a])+",");Al.set(t,o)}}else o=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Sj=t=>{if(wj(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?gf(t):"",[t,e]},Cj=t=>Sj(t)[0],Kd=Y.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Gd={dedupe:!0},jj=(t,e,r)=>{const{cache:n,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:h}=r,[p,x,g,v]=Br.get(n),[y,m]=Qi(t),b=T.useRef(!1),k=T.useRef(!1),C=T.useRef(y),E=T.useRef(e),j=T.useRef(r),w=()=>j.current,_=()=>w().isVisible()&&w().isOnline(),[S,A,N,F]=Vn(n,y),M=T.useRef({}).current,K=Se(o)?Se(r.fallback)?xt:r.fallback[y]:o,G=(Q,te)=>{for(const ie in M){const oe=ie;if(oe==="data"){if(!s(Q[oe],te[oe])&&(!Se(Q[oe])||!s(X,te[oe])))return!1}else if(te[oe]!==Q[oe])return!1}return!0},W=T.useMemo(()=>{const Q=(()=>!y||!e?!1:Se(a)?w().isPaused()||i?!1:c!==!1:a)(),te=we=>{const De=Nn(we);return delete De._k,Q?{isValidating:!0,isLoading:!0,...De}:De},ie=S(),oe=F(),be=te(ie),fe=ie===oe?be:te(oe);let xe=be;return[()=>{const we=te(S());return G(we,xe)?(xe.data=we.data,xe.isLoading=we.isLoading,xe.isValidating=we.isValidating,xe.error=we.error,xe):(xe=we,we)},()=>fe]},[n,y]),z=vw.useSyncExternalStore(T.useCallback(Q=>N(y,(te,ie)=>{G(ie,te)||Q()}),[n,y]),W[0],W[1]),$=!b.current,R=p[y]&&p[y].length>0,O=z.data,I=Se(O)?K&&kw(K)?Kd(K):K:O,D=z.error,B=T.useRef(I),X=h?Se(O)?Se(B.current)?I:B.current:O:I,J=(()=>R&&!Se(D)?!1:$&&!Se(a)?a:w().isPaused()?!1:i?Se(I)?!1:c:Se(I)||c)(),ee=!!(y&&e&&$&&J),re=Se(z.isValidating)?ee:z.isValidating,de=Se(z.isLoading)?ee:z.isLoading,ge=T.useCallback(async Q=>{const te=E.current;if(!y||!te||k.current||w().isPaused())return!1;let ie,oe,be=!0;const fe=Q||{},xe=!g[y]||!fe.dedupe,we=()=>qm?!k.current&&y===C.current&&b.current:y===C.current,De={isValidating:!1,isLoading:!1},Me=()=>{A(De)},ut=()=>{const Ie=g[y];Ie&&Ie[1]===oe&&delete g[y]},Fe={isValidating:!0};Se(S().data)&&(Fe.isLoading=!0);try{if(xe&&(A(Fe),r.loadingTimeout&&Se(S().data)&&setTimeout(()=>{be&&we()&&w().onLoadingSlow(y,r)},r.loadingTimeout),g[y]=[te(m),hf()]),[ie,oe]=g[y],ie=await ie,xe&&setTimeout(ut,r.dedupingInterval),!g[y]||g[y][1]!==oe)return xe&&we()&&w().onDiscarded(y),!1;De.error=xt;const Ie=x[y];if(!Se(Ie)&&(oe<=Ie[0]||oe<=Ie[1]||Ie[1]===0))return Me(),xe&&we()&&w().onDiscarded(y),!1;const Ce=S().data;De.data=s(Ce,ie)?Ce:ie,xe&&we()&&w().onSuccess(ie,y,r)}catch(Ie){ut();const Ce=w(),{shouldRetryOnError:ze}=Ce;Ce.isPaused()||(De.error=Ie,xe&&we()&&(Ce.onError(Ie,y,Ce),(ze===!0||br(ze)&&ze(Ie))&&(!w().revalidateOnFocus||!w().revalidateOnReconnect||_())&&Ce.onErrorRetry(Ie,y,Ce,Ft=>{const Zt=p[y];Zt&&Zt[0]&&Zt[0](Hm,Ft)},{retryCount:(fe.retryCount||0)+1,dedupe:!0})))}return be=!1,Me(),!0},[y,n]),ue=T.useCallback((...Q)=>Sw(n,C.current,...Q),[]);if(Qo(()=>{E.current=e,j.current=r,Se(O)||(B.current=O)}),Qo(()=>{if(!y)return;const Q=ge.bind(xt,Gd);let te=0;w().revalidateOnFocus&&(te=Date.now()+w().focusThrottleInterval);const oe=xj(y,p,(be,fe={})=>{if(be==bw){const xe=Date.now();w().revalidateOnFocus&&xe>te&&_()&&(te=xe+w().focusThrottleInterval,Q())}else if(be==ww)w().revalidateOnReconnect&&_()&&Q();else{if(be==_w)return ge();if(be==Hm)return ge(fe)}});return k.current=!1,C.current=y,b.current=!0,A({_k:m}),J&&(g[y]||(Se(I)||Ea?Q():sj(Q))),()=>{k.current=!0,oe()}},[y]),Qo(()=>{let Q;function te(){const oe=br(u)?u(S().data):u;oe&&Q!==-1&&(Q=setTimeout(ie,oe))}function ie(){!S().error&&(d||w().isVisible())&&(f||w().isOnline())?ge(Gd).then(te):te()}return te(),()=>{Q&&(clearTimeout(Q),Q=-1)}},[u,d,f,y]),T.useDebugValue(X),i&&Se(I)&&y){if(!qm&&Ea)throw new Error("Fallback data is required when using Suspense in SSR.");E.current=e,j.current=r,k.current=!1;const Q=v[y];if(!Se(Q)){const te=ue(Q);Kd(te)}if(Se(D)){const te=ge(Gd);Se(X)||(te.status="fulfilled",te.value=!0),Kd(te)}else throw D}return{mutate:ue,get data(){return M.data=!0,X},get error(){return M.error=!0,D},get isValidating(){return M.isValidating=!0,re},get isLoading(){return M.isLoading=!0,de}}},Ej=Zc.defineProperty(uj,"defaultValue",{value:Ew}),Up=mj(jj),Nj=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Ej,default:Up,mutate:jw,preload:fj,unstable_serialize:Cj,useSWRConfig:Tw},Symbol.toStringTag,{value:"Module"})),Aj=()=>{},Pj=Aj(),mf=Object,Jm=t=>t===Pj,Dj=t=>typeof t=="function",Pl=new WeakMap,Tj=t=>mf.prototype.toString.call(t),Yd=(t,e)=>t===`[object ${e}]`;let Oj=0;const xf=t=>{const e=typeof t,r=Tj(t),n=Yd(r,"Date"),s=Yd(r,"RegExp"),i=Yd(r,"Object");let o,a;if(mf(t)===t&&!n&&!s){if(o=Pl.get(t),o)return o;if(o=++Oj+"~",Pl.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=xf(t[a])+",";Pl.set(t,o)}if(i){o="#";const c=mf.keys(t).sort();for(;!Jm(a=c.pop());)Jm(t[a])||(o+=a+":"+xf(t[a])+",");Pl.set(t,o)}}else o=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Ij=t=>{if(Dj(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?xf(t):"",[t,e]},Fj=t=>Ij(t?t(0,null):null)[0],Jd=Promise.resolve(),Rj=t=>(e,r,n)=>{const s=T.useRef(!1),{cache:i,initialSize:o=1,revalidateAll:a=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:d=!1,parallel:f=!1}=n,[,,,h]=Br.get(Wa);let p;try{p=Fj(e),p&&(p=Aw+p)}catch{}const[x,g,v]=Vn(i,p),y=T.useCallback(()=>Se(x()._l)?o:x()._l,[i,p,o]);vw.useSyncExternalStore(T.useCallback(w=>p?v(p,()=>{w()}):()=>{},[i,p]),y,y);const m=T.useCallback(()=>{const w=x()._l;return Se(w)?o:w},[p,o]),b=T.useRef(m());Qo(()=>{if(!s.current){s.current=!0;return}p&&g({_l:c?b.current:m()})},[p,i]);const k=d&&!s.current,C=t(p,async w=>{const _=x()._i,S=x()._r;g({_r:xt});const A=[],N=m(),[F]=Vn(i,w),M=F().data,K=[];let G=null;for(let W=0;W<N;++W){const[z,$]=Qi(e(W,f?null:G));if(!z)break;const[R,O]=Vn(i,z);let I=R().data;const D=a||_||Se(I)||u&&!W&&!Se(M)||k||M&&!Se(M[W])&&!n.compare(M[W],I);if(r&&(typeof S=="function"?S(I,$):D)){const B=async()=>{if(!(z in h))I=await r($);else{const J=h[z];delete h[z],I=await J}O({data:I,_k:$}),A[W]=I};f?K.push(B):await B()}else A[W]=I;f||(G=I)}return f&&await Promise.all(K.map(W=>W())),g({_i:xt}),A},n),E=T.useCallback(function(w,_){const S=typeof _=="boolean"?{revalidate:_}:_||{},A=S.revalidate!==!1;return p?(A&&(Se(w)?g({_i:!0,_r:S.revalidate}):g({_i:!1,_r:S.revalidate})),arguments.length?C.mutate(w,{...S,revalidate:A}):C.mutate()):Jd},[p,i]),j=T.useCallback(w=>{if(!p)return Jd;const[,_]=Vn(i,p);let S;if(br(w)?S=w(m()):typeof w=="number"&&(S=w),typeof S!="number")return Jd;_({_l:S}),b.current=S;const A=[],[N]=Vn(i,p);let F=null;for(let M=0;M<S;++M){const[K]=Qi(e(M,F)),[G]=Vn(i,K),W=K?G().data:xt;if(Se(W))return E(N().data);A.push(W),F=W}return E(A)},[p,i,E,m]);return{size:m(),setSize:j,mutate:E,get data(){return C.data},get error(){return C.error},get isValidating(){return C.isValidating},get isLoading(){return C.isLoading}}},Bj=yj(Up,Rj);var Xm=Object.prototype.hasOwnProperty;function Qm(t,e,r){for(r of t.keys())if(Zo(r,e))return r}function Zo(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&Zo(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=Qm(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=Qm(e,s),!s)||!Zo(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(Xm.call(t,r)&&++n&&!Xm.call(e,r)||!(r in e)||!Zo(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}function Lj(t,e){if(!t)throw typeof e=="string"?new Error(e):new Error(`${e.displayName} not found`)}var rn=(t,e)=>{const{assertCtxFn:r=Lj}=e||{},n=Y.createContext(void 0);return n.displayName=t,[n,()=>{const o=Y.useContext(n);return r(o,`${t} not found`),o.value},()=>{const o=Y.useContext(n);return o?o.value:{}}]},Vp={};OC(Vp,{useSWR:()=>Up,useSWRInfinite:()=>Bj});IC(Vp,Nj);var[Ow,Hp]=rn("ClerkInstanceContext"),[Mj,$j]=rn("UserContext"),[zj,RO]=rn("ClientContext"),[Uj,BO]=rn("SessionContext");Y.createContext({});var[Vj,LO]=rn("CheckoutContext"),Hj=({children:t,...e})=>Y.createElement(Vj.Provider,{value:{value:e}},t),[Wj,MO]=rn("OrganizationContext"),qj=({children:t,organization:e,swrConfig:r})=>Y.createElement(Vp.SWRConfig,{value:r},Y.createElement(Wj.Provider,{value:{value:{organization:e}}},t));function Wp(t){if(!Y.useContext(Ow)){if(typeof t=="function"){t();return}throw new Error(`${t} can only be used within the <ClerkProvider /> component.

Possible fixes:
1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.
2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.

Learn more: https://clerk.com/docs/components/clerk-provider`.trim())}}typeof window<"u"?Y.useLayoutEffect:Y.useEffect;var Zm="useUser";function qa(){var r;Wp(Zm);const t=$j();return(r=Hp().telemetry)==null||r.record($C(Zm)),t===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:t===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:t}}var Kj=()=>(Wp("useClerk"),Hp()),ex=Zo,Gj=t=>{const e=T.useRef(t);return T.useEffect(()=>{e.current=t},[t]),e.current},tr=(t,e,r)=>{const n=!!r,s=T.useRef(r);T.useEffect(()=>{s.current=r},[r]),T.useEffect(()=>{if(!n||!t)return()=>{};const i=(...o)=>{s.current&&s.current(...o)};return t.on(e,i),()=>{t.off(e,i)}},[n,e,t,s])},Iw=Y.createContext(null);Iw.displayName="ElementsContext";var Yj=(t,e)=>{if(!t)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${e} in an <Elements> provider.`);return t},eu=t=>t!==null&&typeof t=="object",Jj=(t,e,r)=>eu(t)?Object.keys(t).reduce((n,s)=>{const i=!eu(e)||!Fw(t[s],e[s]);return r.includes(s)?(i&&console.warn(`Unsupported prop change: options.${s} is not a mutable property.`),n):i?{...n||{},[s]:t[s]}:n},null):null,tx="[object Object]",Fw=(t,e)=>{if(!eu(t)||!eu(e))return t===e;const r=Array.isArray(t),n=Array.isArray(e);if(r!==n)return!1;const s=Object.prototype.toString.call(t)===tx,i=Object.prototype.toString.call(e)===tx;if(s!==i)return!1;if(!s&&!r)return t===e;const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;const c={};for(let p=0;p<o.length;p+=1)c[o[p]]=!0;for(let p=0;p<a.length;p+=1)c[a[p]]=!0;const u=Object.keys(c);if(u.length!==o.length)return!1;const d=t,f=e,h=p=>Fw(d[p],f[p]);return u.every(h)},rx=t=>{const e=Y.useContext(Iw);return Yj(e,t)},Xj=t=>t.charAt(0).toUpperCase()+t.slice(1),Qj=(t,e)=>{const r=`${Xj(t)}Element`,i=e?o=>{rx(`mounts <${r}>`);const{id:a,className:c}=o;return Y.createElement("div",{id:a,className:c})}:({id:o,className:a,fallback:c,options:u={},onBlur:d,onFocus:f,onReady:h,onChange:p,onEscape:x,onClick:g,onLoadError:v,onLoaderStart:y,onNetworksChange:m,onConfirm:b,onCancel:k,onShippingAddressChange:C,onShippingRateChange:E})=>{const j=rx(`mounts <${r}>`),w="elements"in j?j.elements:null,[_,S]=Y.useState(null),A=Y.useRef(null),N=Y.useRef(null),[F,M]=T.useState(!1);tr(_,"blur",d),tr(_,"focus",f),tr(_,"escape",x),tr(_,"click",g),tr(_,"loaderror",v),tr(_,"loaderstart",y),tr(_,"networkschange",m),tr(_,"confirm",b),tr(_,"cancel",k),tr(_,"shippingaddresschange",C),tr(_,"shippingratechange",E),tr(_,"change",p);let K;h&&(K=()=>{M(!0),h(_)}),tr(_,"ready",K),Y.useLayoutEffect(()=>{if(A.current===null&&N.current!==null&&w){let W=null;w&&(W=w.create(t,u)),A.current=W,S(W),W&&W.mount(N.current)}},[w,u]);const G=Gj(u);return Y.useEffect(()=>{if(!A.current)return;const W=Jj(u,G,["paymentRequest"]);W&&"update"in A.current&&A.current.update(W)},[u,G]),Y.useLayoutEffect(()=>()=>{if(A.current&&typeof A.current.destroy=="function")try{A.current.destroy(),A.current=null}catch{}},[]),Y.createElement(Y.Fragment,null,!F&&c,Y.createElement("div",{id:o,style:{height:F?"unset":"0px",visibility:F?"visible":"hidden"},className:a,ref:N}))};return i.displayName=r,i.__elementType=t,i},Zj=typeof window>"u";Qj("payment",Zj);rn("StripeLibsContext");rn("PaymentElementContext");rn("StripeUtilsContext");var Zr=hw({packageName:"@clerk/clerk-react"});function eE(t){Zr.setMessages(t).setPackageName(t)}var[tE,$O]=rn("AuthContext"),rE=Ow,nE=Hp,sE="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",iE=t=>`You've passed multiple children components to <${t}/>. You can only pass a single child component or text.`,Xd="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",oE="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",aE="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",lE="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",cE="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",uE=t=>`<${t} /> can only accept <${t}.Page /> and <${t}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,dE=t=>`Missing props. <${t}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,hE=t=>`Missing props. <${t}.Link /> component requires the following props: url, label and labelIcon.`,fE="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",pE="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",gE="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",mE="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",xE="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",yE="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",vE="Missing props. <UserButton.Action /> component requires the following props: label.",bE=t=>{Wp(()=>{Zr.throwMissingClerkProviderError({source:t})})},Qe=(t,e)=>{const n=(typeof e=="string"?e:e==null?void 0:e.component)||t.displayName||t.name||"Component";t.displayName=n;const s=typeof e=="string"?void 0:e,i=o=>{bE(n||"withClerk");const a=nE();return!a.loaded&&!(s!=null&&s.renderWhileLoading)?null:Y.createElement(t,{...o,component:n,clerk:a})};return i.displayName=`withClerk(${n})`,i},wE=()=>{try{return!1}catch{}return!1},_E=()=>{try{return!1}catch{}return!1},kE=()=>{try{return!0}catch{}return!1},nx=new Set,qp=(t,e,r)=>{const n=_E()||kE(),s=r??t;nx.has(s)||n||(nx.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))};Qe(({clerk:t,...e})=>{const{client:r,session:n}=t,s=r.signedInSessions?r.signedInSessions.length>0:r.activeSessions&&r.activeSessions.length>0;return Y.useEffect(()=>{n===null&&s?t.redirectToAfterSignOut():t.redirectToSignIn(e)},[]),null},"RedirectToSignIn");Qe(({clerk:t,...e})=>(Y.useEffect(()=>{t.redirectToSignUp(e)},[]),null),"RedirectToSignUp");Qe(({clerk:t,...e})=>(Y.useEffect(()=>{t.redirectToTasks(e)},[]),null),"RedirectToTasks");Qe(({clerk:t})=>(Y.useEffect(()=>{qp("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),t.redirectToUserProfile()},[]),null),"RedirectToUserProfile");Qe(({clerk:t})=>(Y.useEffect(()=>{qp("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),t.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");Qe(({clerk:t})=>(Y.useEffect(()=>{qp("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),t.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");Qe(({clerk:t,...e})=>(Y.useEffect(()=>{t.handleRedirectCallback(e)},[]),null),"AuthenticateWithRedirectCallback");var $t=t=>{wE()&&console.error(`Clerk: ${t}`)};function Qd(t,e,r){if(typeof t=="function")return t(e);if(typeof t<"u")return t;if(typeof r<"u")return r}var sx=(t,...e)=>{const r={...t};for(const n of e)delete r[n];return r},Ou=t=>e=>{try{return Y.Children.only(t)}catch{return Zr.throw(iE(e))}},Iu=(t,e)=>(t||(t=e),typeof t=="string"&&(t=Y.createElement("button",null,t)),t),Fu=t=>(...e)=>{if(t&&typeof t=="function")return t(...e)};function SE(t){return typeof t=="function"}var Dl=new Map;function CE(t,e,r=1){Y.useEffect(()=>{const n=Dl.get(t)||0;return n==r?Zr.throw(e):(Dl.set(t,n+1),()=>{Dl.set(t,(Dl.get(t)||1)-1)})},[])}function jE(t,e,r){const n=t.displayName||t.name||e||"Component",s=i=>(CE(e,r),Y.createElement(t,{...i}));return s.displayName=`withMaxAllowedInstancesGuard(${n})`,s}var ea=t=>{const[e,r]=T.useState(new Map);return t.map(n=>({id:n.id,mount:s=>r(i=>new Map(i).set(String(n.id),s)),unmount:()=>r(s=>{const i=new Map(s);return i.set(String(n.id),null),i}),portal:()=>{const s=e.get(String(n.id));return s?dw.createPortal(n.component,s):null}}))},Mt=(t,e)=>!!t&&Y.isValidElement(t)&&(t==null?void 0:t.type)===e,Rw=(t,e)=>Mw({children:t,reorderItemsLabels:["account","security"],LinkComponent:Ga,PageComponent:Ka,MenuItemsComponent:Bu,componentName:"UserProfile"},e),Bw=(t,e)=>Mw({children:t,reorderItemsLabels:["general","members"],LinkComponent:Mu,PageComponent:Lu,componentName:"OrganizationProfile"},e),Lw=t=>{const e=[],r=[Mu,Lu,Bu,Ka,Ga];return Y.Children.forEach(t,n=>{r.some(s=>Mt(n,s))||e.push(n)}),e},Mw=(t,e)=>{const{children:r,LinkComponent:n,PageComponent:s,MenuItemsComponent:i,reorderItemsLabels:o,componentName:a}=t,{allowForAnyChildren:c=!1}=e||{},u=[];Y.Children.forEach(r,m=>{if(!Mt(m,s)&&!Mt(m,n)&&!Mt(m,i)){m&&!c&&$t(uE(a));return}const{props:b}=m,{children:k,label:C,url:E,labelIcon:j}=b;if(Mt(m,s))if(ix(b,o))u.push({label:C});else if(Zd(b))u.push({label:C,labelIcon:j,children:k,url:E});else{$t(dE(a));return}if(Mt(m,n))if(eh(b))u.push({label:C,labelIcon:j,url:E});else{$t(hE(a));return}});const d=[],f=[],h=[];u.forEach((m,b)=>{if(Zd(m)){d.push({component:m.children,id:b}),f.push({component:m.labelIcon,id:b});return}eh(m)&&h.push({component:m.labelIcon,id:b})});const p=ea(d),x=ea(f),g=ea(h),v=[],y=[];return u.forEach((m,b)=>{if(ix(m,o)){v.push({label:m.label});return}if(Zd(m)){const{portal:k,mount:C,unmount:E}=p.find(S=>S.id===b),{portal:j,mount:w,unmount:_}=x.find(S=>S.id===b);v.push({label:m.label,url:m.url,mount:C,unmount:E,mountIcon:w,unmountIcon:_}),y.push(k),y.push(j);return}if(eh(m)){const{portal:k,mount:C,unmount:E}=g.find(j=>j.id===b);v.push({label:m.label,url:m.url,mountIcon:C,unmountIcon:E}),y.push(k);return}}),{customPages:v,customPagesPortals:y}},ix=(t,e)=>{const{children:r,label:n,url:s,labelIcon:i}=t;return!r&&!s&&!i&&e.some(o=>o===n)},Zd=t=>{const{children:e,label:r,url:n,labelIcon:s}=t;return!!e&&!!n&&!!s&&!!r},eh=t=>{const{children:e,label:r,url:n,labelIcon:s}=t;return!e&&!!n&&!!s&&!!r},EE=(t,e)=>{var r;return NE({children:t,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:Bu,MenuActionComponent:zw,MenuLinkComponent:Uw,UserProfileLinkComponent:Ga,UserProfilePageComponent:Ka,allowForAnyChildren:(r=e==null?void 0:e.allowForAnyChildren)!=null?r:!1})},NE=({children:t,MenuItemsComponent:e,MenuActionComponent:r,MenuLinkComponent:n,UserProfileLinkComponent:s,UserProfilePageComponent:i,reorderItemsLabels:o,allowForAnyChildren:a=!1})=>{const c=[],u=[],d=[];Y.Children.forEach(t,g=>{if(!Mt(g,e)&&!Mt(g,s)&&!Mt(g,i)){g&&!a&&$t(fE);return}if(Mt(g,s)||Mt(g,i))return;const{props:v}=g;Y.Children.forEach(v.children,y=>{if(!Mt(y,r)&&!Mt(y,n)){y&&$t(pE);return}const{props:m}=y,{label:b,labelIcon:k,href:C,onClick:E,open:j}=m;if(Mt(y,r))if(ox(m,o))c.push({label:b});else if(th(m)){const w={label:b,labelIcon:k};if(E!==void 0)c.push({...w,onClick:E});else if(j!==void 0)c.push({...w,open:j.startsWith("/")?j:`/${j}`});else{$t("Custom menu item must have either onClick or open property");return}}else{$t(vE);return}if(Mt(y,n))if(rh(m))c.push({label:b,labelIcon:k,href:C});else{$t(yE);return}})});const f=[],h=[];c.forEach((g,v)=>{th(g)&&f.push({component:g.labelIcon,id:v}),rh(g)&&h.push({component:g.labelIcon,id:v})});const p=ea(f),x=ea(h);return c.forEach((g,v)=>{if(ox(g,o)&&u.push({label:g.label}),th(g)){const{portal:y,mount:m,unmount:b}=p.find(C=>C.id===v),k={label:g.label,mountIcon:m,unmountIcon:b};"onClick"in g?k.onClick=g.onClick:"open"in g&&(k.open=g.open),u.push(k),d.push(y)}if(rh(g)){const{portal:y,mount:m,unmount:b}=x.find(k=>k.id===v);u.push({label:g.label,href:g.href,mountIcon:m,unmountIcon:b}),d.push(y)}}),{customMenuItems:u,customMenuItemsPortals:d}},ox=(t,e)=>{const{children:r,label:n,onClick:s,labelIcon:i}=t;return!r&&!s&&!i&&e.some(o=>o===n)},th=t=>{const{label:e,labelIcon:r,onClick:n,open:s}=t;return!!r&&!!e&&(typeof n=="function"||typeof s=="string")},rh=t=>{const{label:e,href:r,labelIcon:n}=t;return!!r&&!!n&&!!e},AE=t=>{const e=t==null?void 0:t.isReady;return r=>new Promise((n,s)=>{const{root:i=document==null?void 0:document.body,selector:o,timeout:a=0}=r;if(!i){s(new Error("No root element provided"));return}let c=i;if(o&&(c=i==null?void 0:i.querySelector(o)),e(c,o)){n();return}const u=new MutationObserver(d=>{for(const f of d)if(!c&&o&&(c=i==null?void 0:i.querySelector(o)),(t.childList&&f.type==="childList"||t.attributes&&f.type==="attributes")&&e(c,o)){u.disconnect(),n();return}});u.observe(i,t),a>0&&setTimeout(()=>{u.disconnect(),s(new Error(`Timeout waiting for ${o}`))},a)})},PE=AE({childList:!0,subtree:!0,isReady:(t,e)=>{var r;return!!(t!=null&&t.childElementCount)&&((r=t==null?void 0:t.matches)==null?void 0:r.call(t,e))&&t.childElementCount>0}});function pr(t,e){const r=T.useRef(),[n,s]=T.useState("rendering");return T.useEffect(()=>{if(!t)throw new Error("Clerk: no component name provided, unable to detect mount.");if(typeof window<"u"&&!r.current){const i=`[data-clerk-component="${t}"]`,o=e==null?void 0:e.selector;r.current=PE({selector:o?i+o:i}).then(()=>{s("rendered")}).catch(()=>{s("error")})}},[t,e==null?void 0:e.selector]),n}var Tl=t=>"mount"in t,ax=t=>"open"in t,lx=t=>t==null?void 0:t.map(({mountIcon:e,unmountIcon:r,...n})=>n),Ht=class extends Y.PureComponent{constructor(){super(...arguments),this.rootRef=Y.createRef()}componentDidUpdate(t){var e,r,n,s;if(!Tl(t)||!Tl(this.props))return;const i=sx(t.props,"customPages","customMenuItems","children"),o=sx(this.props.props,"customPages","customMenuItems","children"),a=((e=i.customPages)==null?void 0:e.length)!==((r=o.customPages)==null?void 0:r.length),c=((n=i.customMenuItems)==null?void 0:n.length)!==((s=o.customMenuItems)==null?void 0:s.length),u=lx(t.props.customMenuItems),d=lx(this.props.props.customMenuItems);(!ex(i,o)||!ex(u,d)||a||c)&&this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(Tl(this.props)&&this.props.mount(this.rootRef.current,this.props.props),ax(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(Tl(this.props)&&this.props.unmount(this.rootRef.current),ax(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:t=!1}=this.props,e={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return Y.createElement(Y.Fragment,null,!t&&Y.createElement("div",{...e}),this.props.children)}},Ru=t=>{var e,r;return Y.createElement(Y.Fragment,null,(e=t==null?void 0:t.customPagesPortals)==null?void 0:e.map((n,s)=>T.createElement(n,{key:s})),(r=t==null?void 0:t.customMenuItemsPortals)==null?void 0:r.map((n,s)=>T.createElement(n,{key:s})))};Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountSignIn,unmount:t.unmountSignIn,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"SignIn",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountSignUp,unmount:t.unmountSignUp,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"SignUp",renderWhileLoading:!0});function Ka({children:t}){return $t(oE),Y.createElement(Y.Fragment,null,t)}function Ga({children:t}){return $t(aE),Y.createElement(Y.Fragment,null,t)}var DE=Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}},{customPages:a,customPagesPortals:c}=Rw(n.children);return Y.createElement(Y.Fragment,null,i&&r,Y.createElement(Ht,{component:e,mount:t.mountUserProfile,unmount:t.unmountUserProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:a},rootProps:o},Y.createElement(Ru,{customPagesPortals:c})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(DE,{Page:Ka,Link:Ga});var $w=T.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),TE=Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}},{customPages:a,customPagesPortals:c}=Rw(n.children,{allowForAnyChildren:!!n.__experimental_asProvider}),u=Object.assign(n.userProfileProps||{},{customPages:a}),{customMenuItems:d,customMenuItemsPortals:f}=EE(n.children,{allowForAnyChildren:!!n.__experimental_asProvider}),h=Lw(n.children),p={mount:t.mountUserButton,unmount:t.unmountUserButton,updateProps:t.__unstable__updateProps,props:{...n,userProfileProps:u,customMenuItems:d}},x={customPagesPortals:c,customMenuItemsPortals:f};return Y.createElement($w.Provider,{value:p},i&&r,t.loaded&&Y.createElement(Ht,{component:e,...p,hideRootHtmlElement:!!n.__experimental_asProvider,rootProps:o},n.__experimental_asProvider?h:null,Y.createElement(Ru,{...x})))},{component:"UserButton",renderWhileLoading:!0});function Bu({children:t}){return $t(gE),Y.createElement(Y.Fragment,null,t)}function zw({children:t}){return $t(mE),Y.createElement(Y.Fragment,null,t)}function Uw({children:t}){return $t(xE),Y.createElement(Y.Fragment,null,t)}function OE(t){const e=T.useContext($w),r={...e,props:{...e.props,...t}};return Y.createElement(Ht,{...r})}var IE=Object.assign(TE,{UserProfilePage:Ka,UserProfileLink:Ga,MenuItems:Bu,Action:zw,Link:Uw,__experimental_Outlet:OE});function Lu({children:t}){return $t(lE),Y.createElement(Y.Fragment,null,t)}function Mu({children:t}){return $t(cE),Y.createElement(Y.Fragment,null,t)}var FE=Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}},{customPages:a,customPagesPortals:c}=Bw(n.children);return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountOrganizationProfile,unmount:t.unmountOrganizationProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:a},rootProps:o},Y.createElement(Ru,{customPagesPortals:c})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(FE,{Page:Lu,Link:Mu});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountCreateOrganization,unmount:t.unmountCreateOrganization,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"CreateOrganization",renderWhileLoading:!0});var Vw=T.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),RE=Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}},{customPages:a,customPagesPortals:c}=Bw(n.children,{allowForAnyChildren:!!n.__experimental_asProvider}),u=Object.assign(n.organizationProfileProps||{},{customPages:a}),d=Lw(n.children),f={mount:t.mountOrganizationSwitcher,unmount:t.unmountOrganizationSwitcher,updateProps:t.__unstable__updateProps,props:{...n,organizationProfileProps:u},rootProps:o,component:e};return t.__experimental_prefetchOrganizationSwitcher(),Y.createElement(Vw.Provider,{value:f},Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{...f,hideRootHtmlElement:!!n.__experimental_asProvider},n.__experimental_asProvider?d:null,Y.createElement(Ru,{customPagesPortals:c}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});function BE(t){const e=T.useContext(Vw),r={...e,props:{...e.props,...t}};return Y.createElement(Ht,{...r})}Object.assign(RE,{OrganizationProfilePage:Lu,OrganizationProfileLink:Mu,__experimental_Outlet:BE});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountOrganizationList,unmount:t.unmountOrganizationList,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"OrganizationList",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,open:t.openGoogleOneTap,close:t.closeGoogleOneTap,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"GoogleOneTap",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountWaitlist,unmount:t.unmountWaitlist,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"Waitlist",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e,{selector:'[data-component-status="ready"]'})==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountPricingTable,unmount:t.unmountPricingTable,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"PricingTable",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountApiKeys,unmount:t.unmountApiKeys,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"ApiKeys",renderWhileLoading:!0});Qe(({clerk:t,component:e,fallback:r,...n})=>{const i=pr(e)==="rendering"||!t.loaded,o={...i&&r&&{style:{display:"none"}}};return Y.createElement(Y.Fragment,null,i&&r,t.loaded&&Y.createElement(Ht,{component:e,mount:t.mountTaskChooseOrganization,unmount:t.unmountTaskChooseOrganization,updateProps:t.__unstable__updateProps,props:n,rootProps:o}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var Hw=t=>{throw TypeError(t)},Kp=(t,e,r)=>e.has(t)||Hw("Cannot "+r),Ye=(t,e,r)=>(Kp(t,e,"read from private field"),r?r.call(t):e.get(t)),Ln=(t,e,r)=>e.has(t)?Hw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ws=(t,e,r,n)=>(Kp(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),nh=(t,e,r)=>(Kp(t,e,"access private method"),r),LE=(t,e="5.95.0")=>{if(t)return t;const r=ME(e);return r?r==="snapshot"?"5.95.0":r:$E(e)},ME=t=>{var e;return(e=t.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:e[1]},$E=t=>t.trim().replace(/^v/,"").split(".")[0];function zE(t){return t?UE(t)||Ww(t):!0}function UE(t){return/^http(s)?:\/\//.test(t||"")}function Ww(t){return t.startsWith("/")}function VE(t){return t?Ww(t)?new URL(t,window.location.origin).toString():t:""}function HE(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}var WE={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(t,e)=>e<5,retryImmediately:!1,jitter:!0},qE=100,qw=async t=>new Promise(e=>setTimeout(e,t)),Kw=(t,e)=>e?t*(1+Math.random()):t,KE=t=>{let e=0;const r=()=>{const n=t.initialDelay,s=t.factor;let i=n*Math.pow(s,e);return i=Kw(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)};return async()=>{await qw(r()),e++}},GE=async(t,e={})=>{let r=0;const{shouldRetry:n,initialDelay:s,maxDelayBetweenRetries:i,factor:o,retryImmediately:a,jitter:c,onBeforeRetry:u}={...WE,...e},d=KE({initialDelay:s,maxDelayBetweenRetries:i,factor:o,jitter:c});for(;;)try{return await t()}catch(f){if(r++,!n(f,r))throw f;u&&await u(r),a&&r===1?await qw(Kw(qE,c)):await d()}},YE="loadScript cannot be called when document does not exist",JE="loadScript cannot be called without a src";async function XE(t="",e){const{async:r,defer:n,beforeLoad:s,crossOrigin:i,nonce:o}=e||{};return GE(()=>new Promise((c,u)=>{t||u(new Error(JE)),(!document||!document.body)&&u(YE);const d=document.createElement("script");i&&d.setAttribute("crossorigin",i),d.async=r||!1,d.defer=n||!1,d.addEventListener("load",()=>{d.remove(),c(d)}),d.addEventListener("error",()=>{d.remove(),u()}),d.src=t,d.nonce=o,s==null||s(d),document.body.appendChild(d)}),{shouldRetry:(c,u)=>u<=5})}var Gw="Clerk: Failed to load Clerk",{isDevOrStagingUrl:QE}=BC(),Yw=hw({packageName:"@clerk/shared"});function ZE(t){Yw.setPackageName({packageName:t})}function yf(){if(typeof window>"u"||!window.Clerk)return!1;const t=window.Clerk;return typeof t=="object"&&typeof t.load=="function"}function cx(t){return new Promise((e,r)=>{let n=!1;const s=(u,d)=>{clearTimeout(u),clearInterval(d)},i=()=>{n||yf()&&(n=!0,s(a,c),e(null))},a=setTimeout(()=>{n||(n=!0,s(a,c),yf()?e(null):r(new Error(Gw)))},t);i();const c=setInterval(()=>{if(n){clearInterval(c);return}i()},100)})}var e4=async t=>{const e=(t==null?void 0:t.scriptLoadTimeout)??15e3;if(yf())return null;if(document.querySelector("script[data-clerk-js-script]"))return cx(e);if(!(t!=null&&t.publishableKey))return Yw.throwMissingPublishableKeyError(),null;const n=cx(e);return XE(t4(t),{async:!0,crossOrigin:"anonymous",nonce:t.nonce,beforeLoad:n4(t)}).catch(()=>{throw new Error(Gw)}),n},t4=t=>{var d,f;const{clerkJSUrl:e,clerkJSVariant:r,clerkJSVersion:n,proxyUrl:s,domain:i,publishableKey:o}=t;if(e)return e;let a="";s&&zE(s)?a=VE(s).replace(/http(s)?:\/\//,""):i&&!QE(((d=Vm(o))==null?void 0:d.frontendApi)||"")?a=HE(i):a=((f=Vm(o))==null?void 0:f.frontendApi)||"";const c=r?`${r.replace(/\.+$/,"")}.`:"",u=LE(n);return`https://${a}/npm/@clerk/clerk-js@${u}/dist/clerk.${c}browser.js`},r4=t=>{const e={};return t.publishableKey&&(e["data-clerk-publishable-key"]=t.publishableKey),t.proxyUrl&&(e["data-clerk-proxy-url"]=t.proxyUrl),t.domain&&(e["data-clerk-domain"]=t.domain),t.nonce&&(e.nonce=t.nonce),e},n4=t=>e=>{const r=r4(t);for(const n in r)e.setAttribute(n,r[n])},s4=(t,e,r)=>!t&&r?i4(r):o4(e),i4=t=>{const e=t.userId,r=t.user,n=t.sessionId,s=t.sessionStatus,i=t.sessionClaims,o=t.session,a=t.organization,c=t.orgId,u=t.orgRole,d=t.orgPermissions,f=t.orgSlug,h=t.actor,p=t.factorVerificationAge;return{userId:e,user:r,sessionId:n,session:o,sessionStatus:s,sessionClaims:i,organization:a,orgId:c,orgRole:u,orgPermissions:d,orgSlug:f,actor:h,factorVerificationAge:p}},o4=t=>{var g,v,y,m;const e=t.user?t.user.id:t.user,r=t.user,n=t.session?t.session.id:t.session,s=t.session,i=(g=t.session)==null?void 0:g.status,o=t.session?(y=(v=t.session.lastActiveToken)==null?void 0:v.jwt)==null?void 0:y.claims:null,a=t.session?t.session.factorVerificationAge:null,c=s==null?void 0:s.actor,u=t.organization,d=t.organization?t.organization.id:t.organization,f=u==null?void 0:u.slug,h=u&&((m=r==null?void 0:r.organizationMemberships)==null?void 0:m.find(b=>b.organization.id===d)),p=h&&h.permissions,x=h&&h.role;return{userId:e,user:r,sessionId:n,session:s,sessionStatus:i,sessionClaims:o,organization:u,orgId:d,orgRole:x,orgSlug:f,orgPermissions:p,actor:c,factorVerificationAge:a}};function tu(){return typeof window<"u"}var ux=(t,e,r,n,s)=>{const{notify:i}=s||{};let o=t.get(r);o||(o=[],t.set(r,o)),o.push(n),i&&e.has(r)&&n(e.get(r))},dx=(t,e,r)=>(t.get(e)||[]).map(n=>n(r)),hx=(t,e,r)=>{const n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},a4=()=>{const t=new Map,e=new Map,r=new Map;return{on:(...s)=>ux(t,e,...s),prioritizedOn:(...s)=>ux(r,e,...s),emit:(s,i)=>{e.set(s,i),dx(r,s,i),dx(t,s,i)},off:(...s)=>hx(t,...s),prioritizedOff:(...s)=>hx(r,...s),internal:{retrieveListeners:s=>t.get(s)||[]}}},Ol={Status:"status"},l4=()=>a4();typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var c4=Qe(({clerk:t,children:e,...r})=>{const{signUpFallbackRedirectUrl:n,forceRedirectUrl:s,fallbackRedirectUrl:i,signUpForceRedirectUrl:o,mode:a,initialValues:c,withSignUp:u,oauthFlow:d,...f}=r;e=Iu(e,"Sign in");const h=Ou(e)("SignInButton"),p=()=>{const v={forceRedirectUrl:s,fallbackRedirectUrl:i,signUpFallbackRedirectUrl:n,signUpForceRedirectUrl:o,initialValues:c,withSignUp:u,oauthFlow:d};return a==="modal"?t.openSignIn({...v,appearance:r.appearance}):t.redirectToSignIn({...v,signInFallbackRedirectUrl:i,signInForceRedirectUrl:s})},g={...f,onClick:async v=>(h&&typeof h=="object"&&"props"in h&&await Fu(h.props.onClick)(v),p())};return Y.cloneElement(h,g)},{component:"SignInButton",renderWhileLoading:!0});Qe(({clerk:t,children:e,...r})=>{const{redirectUrl:n,...s}=r;e=Iu(e,"Sign in with Metamask");const i=Ou(e)("SignInWithMetamaskButton"),o=async()=>{async function u(){await t.authenticateWithMetamask({redirectUrl:n||void 0})}u()},c={...s,onClick:async u=>(await Fu(i.props.onClick)(u),o())};return Y.cloneElement(i,c)},{component:"SignInWithMetamask",renderWhileLoading:!0});Qe(({clerk:t,children:e,...r})=>{const{redirectUrl:n="/",signOutOptions:s,...i}=r;e=Iu(e,"Sign out");const o=Ou(e)("SignOutButton"),a=()=>t.signOut({redirectUrl:n,...s}),u={...i,onClick:async d=>(await Fu(o.props.onClick)(d),a())};return Y.cloneElement(o,u)},{component:"SignOutButton",renderWhileLoading:!0});var xc=Qe(({clerk:t,children:e,...r})=>{const{fallbackRedirectUrl:n,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:o,mode:a,initialValues:c,oauthFlow:u,...d}=r;e=Iu(e,"Sign up");const f=Ou(e)("SignUpButton"),h=()=>{const g={fallbackRedirectUrl:n,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:o,initialValues:c,oauthFlow:u};return a==="modal"?t.openSignUp({...g,appearance:r.appearance,unsafeMetadata:r.unsafeMetadata}):t.redirectToSignUp({...g,signUpFallbackRedirectUrl:n,signUpForceRedirectUrl:s})},x={...d,onClick:async g=>(f&&typeof f=="object"&&"props"in f&&await Fu(f.props.onClick)(g),h())};return Y.cloneElement(f,x)},{component:"SignUpButton",renderWhileLoading:!0}),fx=()=>({fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null}),u4=class{constructor(t){this.isomorphicClerk=t,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const t=this.gateProperty.bind(this),e=()=>this.client.signIn.__internal_future;return{errors:fx(),fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get firstFactorVerification(){return t(e,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(e,"create"),password:this.gateMethod(e,"password"),sso:this.gateMethod(e,"sso"),finalize:this.gateMethod(e,"finalize"),emailCode:this.wrapMethods(()=>e().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>e().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>e().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>e().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>e().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(e,"ticket")}}}buildSignUpProxy(){const t=this.gateProperty.bind(this),e=this.gateMethod.bind(this),r=this.wrapMethods.bind(this),n=()=>this.client.signUp.__internal_future;return{errors:fx(),fetchStatus:"idle",signUp:{get status(){return t(n,"status","missing_requirements")},get unverifiedFields(){return t(n,"unverifiedFields",[])},get isTransferable(){return t(n,"isTransferable",!1)},create:e(n,"create"),update:e(n,"update"),sso:e(n,"sso"),password:e(n,"password"),ticket:e(n,"ticket"),finalize:e(n,"finalize"),verifications:r(()=>n().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(t){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(t){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const t=this.isomorphicClerk.client;if(!t)throw new Error("Clerk client not ready");return t}gateProperty(t,e,r){return(()=>!tu()||!this.isomorphicClerk.loaded?r:t()[e])()}gateMethod(t,e){return async(...r)=>{if(!tu())return Zr.throw(`Attempted to call a method (${e}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(s=>this.isomorphicClerk.addOnLoaded(s));const n=t();return n[e].apply(n,r)}}wrapMethods(t,e){return Object.fromEntries(e.map(r=>[r,this.gateMethod(t,r)]))}wrapStruct(t,e,r,n){const s={};for(const i of e)s[i]=this.gateMethod(t,i);for(const i of r)Object.defineProperty(s,i,{get:()=>this.gateProperty(t,i,n[i]),enumerable:!0});return s}};typeof globalThis.__BUILD_DISABLE_RHC__>"u"&&(globalThis.__BUILD_DISABLE_RHC__=!1);var d4={name:"@clerk/clerk-react",version:"5.48.1",environment:"production"},yc,yi,vi,Mn,ln,vc,Hn,Lo,bc,Jw=class Xw{constructor(e){Ln(this,Lo),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],Ln(this,yc,"loading"),Ln(this,yi),Ln(this,vi),Ln(this,Mn),Ln(this,ln,l4()),Ln(this,vc),this.buildSignInUrl=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildSignInUrl(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildSignInUrl",i)},this.buildSignUpUrl=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildSignUpUrl(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildSignUpUrl",i)},this.buildAfterSignInUrl=(...s)=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignInUrl(...s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildAfterSignInUrl",i)},this.buildAfterSignUpUrl=(...s)=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignUpUrl(...s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildAfterSignUpUrl",i)},this.buildAfterSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterSignOutUrl",s)},this.buildNewSubscriptionRedirectUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",s)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",s)},this.buildUserProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildUserProfileUrl",s)},this.buildCreateOrganizationUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildCreateOrganizationUrl",s)},this.buildOrganizationProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildOrganizationProfileUrl",s)},this.buildWaitlistUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildWaitlistUrl",s)},this.buildTasksUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildTasksUrl",s)},this.buildUrlWithAuth=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildUrlWithAuth(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildUrlWithAuth",i)},this.handleUnauthenticated=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.handleUnauthenticated()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("handleUnauthenticated",s)},this.on=(...s)=>{var i;if((i=this.clerkjs)!=null&&i.on)return this.clerkjs.on(...s);Ye(this,ln).on(...s)},this.off=(...s)=>{var i;if((i=this.clerkjs)!=null&&i.off)return this.clerkjs.off(...s);Ye(this,ln).off(...s)},this.addOnLoaded=s=>{this.loadedListeners.push(s),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(s=>s()),this.loadedListeners=[]},this.beforeLoad=s=>{if(!s)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=s=>{var i;if(!s)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=s,this.premountMethodCalls.forEach(o=>o()),this.premountAddListenerCalls.forEach((o,a)=>{o.nativeUnsubscribe=s.addListener(a)}),(i=Ye(this,ln).internal.retrieveListeners("status"))==null||i.forEach(o=>{this.on("status",o,{notify:!0})}),this.preopenSignIn!==null&&s.openSignIn(this.preopenSignIn),this.preopenCheckout!==null&&s.__internal_openCheckout(this.preopenCheckout),this.preopenPlanDetails!==null&&s.__internal_openPlanDetails(this.preopenPlanDetails),this.preopenSubscriptionDetails!==null&&s.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),this.preopenSignUp!==null&&s.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&s.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&s.__internal_openReverification(this.preopenUserVerification),this.preopenOneTap!==null&&s.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&s.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&s.openCreateOrganization(this.preopenCreateOrganization),this.preOpenWaitlist!==null&&s.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((o,a)=>{s.mountSignIn(a,o)}),this.premountSignUpNodes.forEach((o,a)=>{s.mountSignUp(a,o)}),this.premountUserProfileNodes.forEach((o,a)=>{s.mountUserProfile(a,o)}),this.premountUserButtonNodes.forEach((o,a)=>{s.mountUserButton(a,o)}),this.premountOrganizationListNodes.forEach((o,a)=>{s.mountOrganizationList(a,o)}),this.premountWaitlistNodes.forEach((o,a)=>{s.mountWaitlist(a,o)}),this.premountPricingTableNodes.forEach((o,a)=>{s.mountPricingTable(a,o)}),this.premountApiKeysNodes.forEach((o,a)=>{s.mountApiKeys(a,o)}),this.premountOAuthConsentNodes.forEach((o,a)=>{s.__internal_mountOAuthConsent(a,o)}),this.premountTaskChooseOrganizationNodes.forEach((o,a)=>{s.mountTaskChooseOrganization(a,o)}),typeof this.clerkjs.status>"u"&&Ye(this,ln).emit(Ol.Status,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...s)=>{var i;return(i=this.clerkjs)==null?void 0:i.__experimental_checkout(...s)},this.__unstable__updateProps=async s=>{const i=await nh(this,Lo,bc).call(this);if(i&&"__unstable__updateProps"in i)return i.__unstable__updateProps(s)},this.setActive=s=>this.clerkjs?this.clerkjs.setActive(s):Promise.reject(),this.openSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(s):this.preopenSignIn=s},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(s):this.preopenCheckout=s},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(s):this.preopenPlanDetails=s},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(s):this.preopenSubscriptionDetails=s??null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(s):this.preopenUserVerification=s},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=s=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(s):this.preopenOneTap=s},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(s):this.preopenUserProfile=s},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(s):this.preopenOrganizationProfile=s},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(s):this.preopenCreateOrganization=s},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(s):this.preOpenWaitlist=s},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(s):this.preopenSignUp=s},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(s,i):this.premountSignInNodes.set(s,i)},this.unmountSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(s):this.premountSignInNodes.delete(s)},this.mountSignUp=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(s,i):this.premountSignUpNodes.set(s,i)},this.unmountSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(s):this.premountSignUpNodes.delete(s)},this.mountUserProfile=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(s,i):this.premountUserProfileNodes.set(s,i)},this.unmountUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(s):this.premountUserProfileNodes.delete(s)},this.mountOrganizationProfile=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(s,i):this.premountOrganizationProfileNodes.set(s,i)},this.unmountOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(s):this.premountOrganizationProfileNodes.delete(s)},this.mountCreateOrganization=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(s,i):this.premountCreateOrganizationNodes.set(s,i)},this.unmountCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(s):this.premountCreateOrganizationNodes.delete(s)},this.mountOrganizationSwitcher=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(s,i):this.premountOrganizationSwitcherNodes.set(s,i)},this.unmountOrganizationSwitcher=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(s):this.premountOrganizationSwitcherNodes.delete(s)},this.__experimental_prefetchOrganizationSwitcher=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",s)},this.mountOrganizationList=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(s,i):this.premountOrganizationListNodes.set(s,i)},this.unmountOrganizationList=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(s):this.premountOrganizationListNodes.delete(s)},this.mountUserButton=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(s,i):this.premountUserButtonNodes.set(s,i)},this.unmountUserButton=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(s):this.premountUserButtonNodes.delete(s)},this.mountWaitlist=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(s,i):this.premountWaitlistNodes.set(s,i)},this.unmountWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(s):this.premountWaitlistNodes.delete(s)},this.mountPricingTable=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(s,i):this.premountPricingTableNodes.set(s,i)},this.unmountPricingTable=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(s):this.premountPricingTableNodes.delete(s)},this.mountApiKeys=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(s,i):this.premountApiKeysNodes.set(s,i)},this.unmountApiKeys=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(s):this.premountApiKeysNodes.delete(s)},this.__internal_mountOAuthConsent=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(s,i):this.premountOAuthConsentNodes.set(s,i)},this.__internal_unmountOAuthConsent=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(s):this.premountOAuthConsentNodes.delete(s)},this.mountTaskChooseOrganization=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(s,i):this.premountTaskChooseOrganizationNodes.set(s,i)},this.unmountTaskChooseOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(s):this.premountTaskChooseOrganizationNodes.delete(s)},this.addListener=s=>{if(this.clerkjs)return this.clerkjs.addListener(s);{const i=()=>{var o;const a=this.premountAddListenerCalls.get(s);a&&((o=a.nativeUnsubscribe)==null||o.call(a),this.premountAddListenerCalls.delete(s))};return this.premountAddListenerCalls.set(s,{unsubscribe:i,nativeUnsubscribe:void 0}),i}},this.navigate=s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.navigate(s)};this.clerkjs&&this.loaded?i():this.premountMethodCalls.set("navigate",i)},this.redirectWithAuth=async(...s)=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectWithAuth(...s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectWithAuth",i)},this.redirectToSignIn=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToSignIn(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToSignIn",i)},this.redirectToSignUp=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToSignUp(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToSignUp",i)},this.redirectToUserProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToUserProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToUserProfile",s)},this.redirectToAfterSignUp=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToAfterSignUp",s)},this.redirectToAfterSignIn=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignIn()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignIn",s)},this.redirectToAfterSignOut=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignOut()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignOut",s)},this.redirectToOrganizationProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToOrganizationProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToOrganizationProfile",s)},this.redirectToCreateOrganization=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToCreateOrganization()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToCreateOrganization",s)},this.redirectToWaitlist=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToWaitlist()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToWaitlist",s)},this.redirectToTasks=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToTasks(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToTasks",i)},this.handleRedirectCallback=async s=>{var i;const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.handleRedirectCallback(s)};this.clerkjs&&this.loaded?(i=o())==null||i.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",o)},this.handleGoogleOneTapCallback=async(s,i)=>{var o;const a=()=>{var c;return(c=this.clerkjs)==null?void 0:c.handleGoogleOneTapCallback(s,i)};this.clerkjs&&this.loaded?(o=a())==null||o.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",a)},this.handleEmailLinkVerification=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.handleEmailLinkVerification(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("handleEmailLinkVerification",i)},this.authenticateWithMetamask=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithMetamask(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithMetamask",i)},this.authenticateWithCoinbaseWallet=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithCoinbaseWallet(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",i)},this.authenticateWithBase=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithBase(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithBase",i)},this.authenticateWithOKXWallet=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithOKXWallet(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithOKXWallet",i)},this.authenticateWithWeb3=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithWeb3(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithWeb3",i)},this.authenticateWithGoogleOneTap=async s=>(await nh(this,Lo,bc).call(this)).authenticateWithGoogleOneTap(s),this.__internal_loadStripeJs=async()=>(await nh(this,Lo,bc).call(this)).__internal_loadStripeJs(),this.createOrganization=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.createOrganization(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("createOrganization",i)},this.getOrganization=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.getOrganization(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("getOrganization",i)},this.joinWaitlist=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.joinWaitlist(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("joinWaitlist",i)},this.signOut=async(...s)=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.signOut(...s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("signOut",i)};const{Clerk:r=null,publishableKey:n}=e||{};ws(this,Mn,n),ws(this,vi,e==null?void 0:e.proxyUrl),ws(this,yi,e==null?void 0:e.domain),this.options=e,this.Clerk=r,this.mode=tu()?"browser":"server",ws(this,vc,new u4(this)),this.options.sdkMetadata||(this.options.sdkMetadata=d4),Ye(this,ln).emit(Ol.Status,"loading"),Ye(this,ln).prioritizedOn(Ol.Status,s=>ws(this,yc,s)),Ye(this,Mn)&&this.loadClerkJS()}get publishableKey(){return Ye(this,Mn)}get loaded(){var e;return((e=this.clerkjs)==null?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?((e=this.clerkjs)==null?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):Ye(this,yc)}static getOrCreateInstance(e){return(!tu()||!Ye(this,Hn)||e.Clerk&&Ye(this,Hn).Clerk!==e.Clerk||Ye(this,Hn).publishableKey!==e.publishableKey)&&ws(this,Hn,new Xw(e)),Ye(this,Hn)}static clearInstance(){ws(this,Hn,null)}get domain(){return typeof window<"u"&&window.location?Qd(Ye(this,yi),new URL(window.location.href),""):typeof Ye(this,yi)=="function"?Zr.throw(Xd):Ye(this,yi)||""}get proxyUrl(){return typeof window<"u"&&window.location?Qd(Ye(this,vi),new URL(window.location.href),""):typeof Ye(this,vi)=="function"?Zr.throw(Xd):Ye(this,vi)||""}__internal_getOption(e){var r,n;return(r=this.clerkjs)!=null&&r.__internal_getOption?(n=this.clerkjs)==null?void 0:n.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return((e=this.clerkjs)==null?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return(e=this.clerkjs)==null?void 0:e.instanceType}get frontendApi(){var e;return((e=this.clerkjs)==null?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return((e=this.clerkjs)==null?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?Qd(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?Zr.throw(Xd):!1}async loadClerkJS(){var e;if(!(this.mode!=="browser"||this.loaded)){typeof window<"u"&&(window.__clerk_publishable_key=Ye(this,Mn),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let r;SE(this.Clerk)?(r=new this.Clerk(Ye(this,Mn),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(r),await r.load(this.options)):(r=this.Clerk,r.loaded||(this.beforeLoad(r),await r.load(this.options))),global.Clerk=r}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await e4({...this.options,publishableKey:Ye(this,Mn),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(e=global.Clerk)!=null&&e.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(r){const n=r;Ye(this,ln).emit(Ol.Status,"error"),console.error(n.stack||n.message||n);return}}}get version(){var e;return(e=this.clerkjs)==null?void 0:e.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}get isSignedIn(){return this.clerkjs?this.clerkjs.isSignedIn:!1}get billing(){var e;return(e=this.clerkjs)==null?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:Ye(this,vc)}get apiKeys(){var e;return(e=this.clerkjs)==null?void 0:e.apiKeys}__unstable__setEnvironment(...e){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(e);else return}};yc=new WeakMap;yi=new WeakMap;vi=new WeakMap;Mn=new WeakMap;ln=new WeakMap;vc=new WeakMap;Hn=new WeakMap;Lo=new WeakSet;bc=function(){return new Promise(t=>{this.addOnLoaded(()=>t(this.clerkjs))})};Ln(Jw,Hn);var px=Jw;function h4(t){const{isomorphicClerkOptions:e,initialState:r,children:n}=t,{isomorphicClerk:s,clerkStatus:i}=f4(e),[o,a]=Y.useState({client:s.client,session:s.session,user:s.user,organization:s.organization});Y.useEffect(()=>s.addListener(N=>a({...N})),[]);const c=s4(s.loaded,o,r),u=Y.useMemo(()=>({value:s}),[i]),d=Y.useMemo(()=>({value:o.client}),[o.client]),{sessionId:f,sessionStatus:h,sessionClaims:p,session:x,userId:g,user:v,orgId:y,actor:m,organization:b,orgRole:k,orgSlug:C,orgPermissions:E,factorVerificationAge:j}=c,w=Y.useMemo(()=>({value:{sessionId:f,sessionStatus:h,sessionClaims:p,userId:g,actor:m,orgId:y,orgRole:k,orgSlug:C,orgPermissions:E,factorVerificationAge:j}}),[f,h,g,m,y,k,C,j,p==null?void 0:p.__raw]),_=Y.useMemo(()=>({value:x}),[f,x]),S=Y.useMemo(()=>({value:v}),[g,v]),A=Y.useMemo(()=>({value:{organization:b}}),[y,b]);return Y.createElement(rE.Provider,{value:u},Y.createElement(zj.Provider,{value:d},Y.createElement(Uj.Provider,{value:_},Y.createElement(qj,{...A.value},Y.createElement(tE.Provider,{value:w},Y.createElement(Mj.Provider,{value:S},Y.createElement(Hj,{value:void 0},n)))))))}var f4=t=>{const e=Y.useRef(px.getOrCreateInstance(t)),[r,n]=Y.useState(e.current.status);return Y.useEffect(()=>{e.current.__unstable__updateProps({appearance:t.appearance})},[t.appearance]),Y.useEffect(()=>{e.current.__unstable__updateProps({options:t})},[t.localization]),Y.useEffect(()=>(e.current.on("status",n),()=>{e.current&&e.current.off("status",n),px.clearInstance()}),[]),{isomorphicClerk:e.current,clerkStatus:r}};function p4(t){const{initialState:e,children:r,__internal_bypassMissingPublishableKey:n,...s}=t,{publishableKey:i="",Clerk:o}=s;return!o&&!n&&(i?i&&!sf(i)&&Zr.throwInvalidPublishableKeyError({key:i}):Zr.throwMissingPublishableKeyError()),Y.createElement(h4,{initialState:e,isomorphicClerkOptions:s},r)}var Qw=jE(p4,"ClerkProvider",sE);Qw.displayName="ClerkProvider";eE({packageName:"@clerk/clerk-react"});ZE("@clerk/clerk-react");/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:c,...u},d)=>T.createElement("svg",{ref:d,...g4,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${m4(t)}`,a].join(" "),...u},[...e.map(([f,h])=>T.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=me("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=me("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=me("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=me("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=me("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=me("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=me("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=me("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=me("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zs=({size:t="md",showText:e=!0,className:r=""})=>{const n={sm:"w-10 h-10",md:"w-14 h-14",lg:"w-20 h-20",xl:"w-24 h-24"},s={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl"};return l.jsxs("div",{className:`flex items-center gap-3 ${r}`,children:[l.jsx("div",{className:`${n[t]} relative border-2 border-blue-500 rounded-lg p-1 bg-white shadow-sm`,children:l.jsx("img",{src:"/propfi-logo.svg",alt:"PropFi",className:"w-full h-full object-contain rounded",style:{objectFit:"contain",aspectRatio:"1 / 1"},width:"100",height:"100"})}),e&&l.jsx("span",{className:`font-bold text-gray-900 ${s[t]}`,children:"PropFi"})]})};function wx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function F4(...t){return e=>{let r=!1;const n=t.map(s=>{const i=wx(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():wx(t[s],null)}}}}function r_(t){const e=B4(t),r=T.forwardRef((n,s)=>{const{children:i,...o}=n,a=T.Children.toArray(i),c=a.find(M4);if(c){const u=c.props.children,d=a.map(f=>f===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:f);return l.jsx(e,{...o,ref:s,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var R4=r_("Slot");function B4(t){const e=T.forwardRef((r,n)=>{const{children:s,...i}=r;if(T.isValidElement(s)){const o=z4(s),a=$4(i,s.props);return s.type!==T.Fragment&&(a.ref=n?F4(n,o):o),T.cloneElement(s,a)}return T.Children.count(s)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var L4=Symbol("radix.slottable");function M4(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===L4}function $4(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function z4(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function n_(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=n_(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function s_(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=n_(t))&&(n&&(n+=" "),n+=e);return n}const _x=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kx=s_,Qp=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return kx(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=_x(d)||_x(f);return s[u][h]}),a=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(x=>{let[g,v]=x;return Array.isArray(v)?v.includes({...i,...a}[g]):{...i,...a}[g]===v})?[...u,f,h]:u},[]);return kx(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},Zp="-",U4=t=>{const e=H4(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(Zp);return a[0]===""&&a.length!==1&&a.shift(),i_(a,e)||V4(o)},getConflictingClassGroupIds:(o,a)=>{const c=r[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},i_=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?i_(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Zp);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Sx=/^\[(.+)\]$/,V4=t=>{if(Sx.test(t)){const e=Sx.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},H4=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return q4(Object.entries(t.classGroups),r).forEach(([i,o])=>{vf(o,n,i,e)}),n},vf=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Cx(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(W4(s)){vf(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{vf(o,Cx(e,i),r,n)})})},Cx=(t,e)=>{let r=t;return e.split(Zp).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},W4=t=>t.isThemeGetter,q4=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[r,s]}):t,K4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},o_="!",G4=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,f;for(let v=0;v<a.length;v++){let y=a[v];if(u===0){if(y===s&&(n||a.slice(v,v+i)===e)){c.push(a.slice(d,v)),d=v+i;continue}if(y==="/"){f=v;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?a:a.substring(d),p=h.startsWith(o_),x=p?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return r?a=>r({className:a,parseClassName:o}):o},Y4=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},J4=t=>({cache:K4(t.cacheSize),parseClassName:G4(t),...U4(t)}),X4=/\s+/,Q4=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(X4);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let x=!!p,g=n(x?h.substring(0,p):h);if(!g){if(!x){a=u+(a.length>0?" "+a:a);continue}if(g=n(h),!g){a=u+(a.length>0?" "+a:a);continue}x=!1}const v=Y4(d).join(":"),y=f?v+o_:v,m=y+g;if(i.includes(m))continue;i.push(m);const b=s(g,x);for(let k=0;k<b.length;++k){const C=b[k];i.push(y+C)}a=u+(a.length>0?" "+a:a)}return a};function Z4(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=a_(e))&&(n&&(n+=" "),n+=r);return n}const a_=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=a_(t[n]))&&(r&&(r+=" "),r+=e);return r};function eN(t,...e){let r,n,s,i=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return r=J4(u),n=r.cache.get,s=r.cache.set,i=a,a(c)}function a(c){const u=n(c);if(u)return u;const d=Q4(c,r);return s(c,d),d}return function(){return i(Z4.apply(null,arguments))}}const We=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},l_=/^\[(?:([a-z-]+):)?(.+)\]$/i,tN=/^\d+\/\d+$/,rN=new Set(["px","full","screen"]),nN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,on=t=>zi(t)||rN.has(t)||tN.test(t),In=t=>uo(t,"length",gN),zi=t=>!!t&&!Number.isNaN(Number(t)),sh=t=>uo(t,"number",zi),So=t=>!!t&&Number.isInteger(Number(t)),lN=t=>t.endsWith("%")&&zi(t.slice(0,-1)),ke=t=>l_.test(t),Fn=t=>nN.test(t),cN=new Set(["length","size","percentage"]),uN=t=>uo(t,cN,c_),dN=t=>uo(t,"position",c_),hN=new Set(["image","url"]),fN=t=>uo(t,hN,xN),pN=t=>uo(t,"",mN),Co=()=>!0,uo=(t,e,r)=>{const n=l_.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},gN=t=>sN.test(t)&&!iN.test(t),c_=()=>!1,mN=t=>oN.test(t),xN=t=>aN.test(t),yN=()=>{const t=We("colors"),e=We("spacing"),r=We("blur"),n=We("brightness"),s=We("borderColor"),i=We("borderRadius"),o=We("borderSpacing"),a=We("borderWidth"),c=We("contrast"),u=We("grayscale"),d=We("hueRotate"),f=We("invert"),h=We("gap"),p=We("gradientColorStops"),x=We("gradientColorStopPositions"),g=We("inset"),v=We("margin"),y=We("opacity"),m=We("padding"),b=We("saturate"),k=We("scale"),C=We("sepia"),E=We("skew"),j=We("space"),w=We("translate"),_=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ke,e],N=()=>[ke,e],F=()=>["",on,In],M=()=>["auto",zi,ke],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",ke],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[zi,ke];return{cacheSize:500,separator:":",theme:{colors:[Co],spacing:[on,In],blur:["none","",Fn,ke],brightness:O(),borderColor:[t],borderRadius:["none","","full",Fn,ke],borderSpacing:N(),borderWidth:F(),contrast:O(),grayscale:$(),hueRotate:O(),invert:$(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[lN,In],inset:A(),margin:A(),opacity:O(),padding:N(),saturate:O(),scale:O(),sepia:$(),skew:O(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[Fn]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ke]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",So,ke]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",So,ke]}],"grid-cols":[{"grid-cols":[Co]}],"col-start-end":[{col:["auto",{span:["full",So,ke]},ke]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Co]}],"row-start-end":[{row:["auto",{span:[So,ke]},ke]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[Fn]},Fn]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Fn,In]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sh]}],"font-family":[{font:[Co]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",zi,sh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",on,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",on,In]}],"underline-offset":[{"underline-offset":["auto",on,ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),dN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fN]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[on,ke]}],"outline-w":[{outline:[on,In]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[on,In]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Fn,pN]}],"shadow-color":[{shadow:[Co]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Fn,ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[So,ke]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[on,In,sh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vN=eN(yN);function nn(...t){return vN(s_(t))}const bN=Qp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$e=T.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?R4:"button";return l.jsx(o,{className:nn(bN({variant:e,size:r,className:t})),ref:i,...s})});$e.displayName="Button";const yr=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));yr.displayName="Card";const Lr=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("flex flex-col space-y-1.5 p-6",t),...e}));Lr.displayName="CardHeader";const Mr=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("text-2xl font-semibold leading-none tracking-tight",t),...e}));Mr.displayName="CardTitle";const xn=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("text-sm text-muted-foreground",t),...e}));xn.displayName="CardDescription";const vr=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("p-6 pt-0",t),...e}));vr.displayName="CardContent";const wN=T.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:nn("flex items-center p-6 pt-0",t),...e}));wN.displayName="CardFooter";const u_=T.forwardRef(({className:t,type:e,...r},n)=>l.jsx("input",{type:e,className:nn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));u_.displayName="Input";var _N=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kN=_N.reduce((t,e)=>{const r=r_(`Primitive.${e}`),n=T.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),SN="Label",d_=T.forwardRef((t,e)=>l.jsx(kN.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));d_.displayName=SN;var h_=d_;const CN=Qp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),bf=T.forwardRef(({className:t,...e},r)=>l.jsx(h_,{ref:r,className:nn(CN(),t),...e}));bf.displayName=h_.displayName;const jN=Qp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gn({className:t,variant:e,...r}){return l.jsx("div",{className:nn(jN({variant:e}),t),...r})}const EN=({organizationName:t,onClose:e})=>{const[r,n]=T.useState(""),[s,i]=T.useState("member"),[o,a]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState([{id:"1",name:"Alex Horton",email:"alex@example.com",role:"admin",status:"active",joinedAt:"2024-01-15"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com",role:"member",status:"active",joinedAt:"2024-01-20"},{id:"3",name:"Mike Chen",email:"mike@example.com",role:"viewer",status:"pending",joinedAt:"2024-01-25"}]),h=async m=>{if(m.preventDefault(),!!r.trim()){a(!0);try{await new Promise(k=>setTimeout(k,1e3));const b={id:Date.now().toString(),name:r.split("@")[0],email:r,role:s,status:"invited",joinedAt:new Date().toISOString().split("T")[0]};f(k=>[...k,b]),n(""),u(!1)}catch(b){console.error("Error inviting member:",b)}finally{a(!1)}}},p=(m,b)=>{f(k=>k.map(C=>C.id===m?{...C,role:b}:C))},x=m=>{f(b=>b.filter(k=>k.id!==m))},g=m=>{switch(m){case"admin":return l.jsx(xx,{className:"h-4 w-4 text-yellow-600"});case"member":return l.jsx(ru,{className:"h-4 w-4 text-blue-600"});case"viewer":return l.jsx(Pa,{className:"h-4 w-4 text-gray-600"});default:return l.jsx(tn,{className:"h-4 w-4"})}},v=m=>{switch(m){case"admin":return"bg-yellow-100 text-yellow-800";case"member":return"bg-blue-100 text-blue-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},y=m=>{switch(m){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"invited":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:m=>{m.target===m.currentTarget&&e()},children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Team Management"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t})]}),l.jsx($e,{variant:"outline",onClick:e,className:"dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:l.jsx(co,{className:"h-4 w-4"})})]}),l.jsxs(yr,{className:"mb-6 dark:bg-gray-700 dark:border-gray-600",children:[l.jsxs(Lr,{children:[l.jsxs(Mr,{className:"flex items-center gap-2 dark:text-white",children:[l.jsx(bx,{className:"h-5 w-5"}),"Invite Team Members"]}),l.jsx(xn,{className:"dark:text-gray-300",children:"Invite new members to collaborate on your property portfolio"})]}),l.jsx(vr,{children:c?l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(bf,{htmlFor:"email",children:"Email Address"}),l.jsx(u_,{id:"email",type:"email",placeholder:"colleague@example.com",value:r,onChange:m=>n(m.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx(bf,{htmlFor:"role",children:"Role"}),l.jsxs("select",{id:"role",value:s,onChange:m=>i(m.target.value),className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"member",children:"Member"}),l.jsx("option",{value:"viewer",children:"Viewer"})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx($e,{type:"submit",disabled:o,children:o?"Sending...":"Send Invitation"}),l.jsx($e,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]}):l.jsxs($e,{onClick:()=>u(!0),children:[l.jsx(bx,{className:"h-4 w-4 mr-2"}),"Invite Member"]})})]}),l.jsxs(yr,{className:"dark:bg-gray-700 dark:border-gray-600",children:[l.jsx(Lr,{children:l.jsxs(Mr,{className:"flex items-center gap-2 dark:text-white",children:[l.jsx(tn,{className:"h-5 w-5"}),"Team Members (",d.length,")"]})}),l.jsx(vr,{children:l.jsx("div",{className:"space-y-4",children:d.map(m=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:m.name.split(" ").map(b=>b[0]).join("")})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:m.name}),l.jsx(gn,{className:y(m.status),children:m.status})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:m.email}),l.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-400",children:["Joined ",m.joinedAt]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[g(m.role),l.jsx(gn,{className:v(m.role),children:m.role})]}),m.role!=="admin"&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("select",{value:m.role,onChange:b=>p(m.id,b.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[l.jsx("option",{value:"member",children:"Member"}),l.jsx("option",{value:"viewer",children:"Viewer"})]}),l.jsx($e,{variant:"outline",size:"sm",onClick:()=>x(m.id),className:"text-red-600 hover:text-red-700",children:l.jsx(Uu,{className:"h-4 w-4"})})]})]})]},m.id))})})]}),l.jsxs(yr,{className:"mt-6",children:[l.jsx(Lr,{children:l.jsxs(Mr,{className:"flex items-center gap-2",children:[l.jsx(t_,{className:"h-5 w-5"}),"Role Permissions"]})}),l.jsx(vr,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(xx,{className:"h-4 w-4 text-yellow-600"}),l.jsx("h3",{className:"font-medium text-yellow-900",children:"Admin"})]}),l.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[l.jsx("li",{children:" Full access to all data"}),l.jsx("li",{children:" Manage team members"}),l.jsx("li",{children:" Delete properties and data"}),l.jsx("li",{children:" Organization settings"})]})]}),l.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ru,{className:"h-4 w-4 text-blue-600"}),l.jsx("h3",{className:"font-medium text-blue-900",children:"Member"})]}),l.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[l.jsx("li",{children:" View and edit data"}),l.jsx("li",{children:" Upload CSV files"}),l.jsx("li",{children:" Manage properties"}),l.jsx("li",{children:" Create reports"})]})]}),l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Pa,{className:"h-4 w-4 text-gray-600"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Viewer"})]}),l.jsxs("ul",{className:"text-sm text-gray-800 space-y-1",children:[l.jsx("li",{children:" View data only"}),l.jsx("li",{children:" Read-only access"}),l.jsx("li",{children:" Generate reports"}),l.jsx("li",{children:" No editing permissions"})]})]})]})})]})]})})})};var f_="basil",NN=function(e){return e===3?"v3":e},p_="https://js.stripe.com",AN="".concat(p_,"/").concat(f_,"/stripe.js"),PN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,DN=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,jx="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",TN=function(e){return PN.test(e)||DN.test(e)},ON=function(){for(var e=document.querySelectorAll('script[src^="'.concat(p_,'"]')),r=0;r<e.length;r++){var n=e[r];if(TN(n.src))return n}return null},Ex=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(AN).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},IN=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:r})},jo=null,Fl=null,Rl=null,FN=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},RN=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},BN=function(e){return jo!==null?jo:(jo=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(jx),window.Stripe){r(window.Stripe);return}try{var s=ON();if(s&&e)console.warn(jx);else if(!s)s=Ex(e);else if(s&&Rl!==null&&Fl!==null){var i;s.removeEventListener("load",Rl),s.removeEventListener("error",Fl),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=Ex(e)}Rl=RN(r,n),Fl=FN(n),s.addEventListener("load",Rl),s.addEventListener("error",Fl)}catch(o){n(o);return}}),jo.catch(function(r){return jo=null,Promise.reject(r)}))},LN=function(e,r,n){if(e===null)return null;var s=r[0],i=s.match(/^pk_test/),o=NN(e.version),a=f_;i&&o!==a&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,r);return IN(c,n),c},Eo,g_=!1,m_=function(){return Eo||(Eo=BN(null).catch(function(e){return Eo=null,Promise.reject(e)}),Eo)};Promise.resolve().then(function(){return m_()}).catch(function(t){g_||console.warn(t)});var MN=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];g_=!0;var s=Date.now();return m_().then(function(i){return LN(i,r,s)})};const x_=MN("pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"),$N=async t=>{try{const e=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to create checkout session");const{sessionId:r}=await e.json(),n=await x_;if(!n)throw new Error("Stripe failed to load");const{error:s}=await n.redirectToCheckout({sessionId:r});if(s)throw new Error(s.message)}catch(e){throw console.error("Error creating checkout session:",e),e}},y_=async t=>{try{const e=await fetch("/api/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t})});if(!e.ok)throw new Error("Failed to create portal session");const{url:r}=await e.json();window.location.href=r}catch(e){throw console.error("Error creating portal session:",e),e}},v_=async t=>{try{const e=await fetch(`/api/subscription-status?userId=${t}`);if(!e.ok)throw new Error("Failed to get subscription status");return await e.json()}catch(e){throw console.error("Error getting subscription status:",e),e}},zN=Object.freeze(Object.defineProperty({__proto__:null,createCheckoutSession:$N,createCustomerPortalSession:y_,default:x_,getSubscriptionStatus:v_},Symbol.toStringTag,{value:"Module"})),UN=()=>{const{user:t}=qa(),[e,r]=T.useState(null),[n,s]=T.useState(!0),[i,o]=T.useState(null),a=T.useCallback(async()=>{if(t)try{s(!0);const p=await v_(t.id);r(p)}catch(p){console.error("Error loading subscription status:",p),o("Failed to load subscription status")}finally{s(!1)}},[t]);T.useEffect(()=>{t&&a()},[t,a]);const c=async()=>{if(e!=null&&e.customerId)try{await y_(e.customerId)}catch(p){console.error("Error opening customer portal:",p),o("Failed to open subscription management")}},u=p=>new Date(p*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=p=>{switch(p){case"active":return l.jsx(gn,{className:"bg-green-100 text-green-800",children:"Active"});case"trialing":return l.jsx(gn,{className:"bg-blue-100 text-blue-800",children:"Free Trial"});case"past_due":return l.jsx(gn,{className:"bg-yellow-100 text-yellow-800",children:"Past Due"});case"canceled":return l.jsx(gn,{className:"bg-red-100 text-red-800",children:"Canceled"});default:return l.jsx(gn,{variant:"secondary",children:p})}};if(n)return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(i)return l.jsx("div",{className:"p-6",children:l.jsx(yr,{className:"border-red-200",children:l.jsx(vr,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[l.jsx(Qs,{className:"w-5 h-5"}),l.jsx("span",{children:i})]})})})});if(!e)return l.jsx("div",{className:"p-6",children:l.jsxs(yr,{children:[l.jsxs(Lr,{children:[l.jsxs(Mr,{className:"flex items-center space-x-2",children:[l.jsx(Aa,{className:"w-5 h-5"}),l.jsx("span",{children:"No Subscription Found"})]}),l.jsx(xn,{children:"You don't have an active subscription. Start your free trial today!"})]}),l.jsx(vr,{children:l.jsx($e,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),className:"w-full",children:"View Pricing Plans"})})]})});const f=e.status==="trialing"&&e.trialEnd,h=e.status==="active"||e.status==="trialing";return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription & Pricing"}),l.jsx("p",{className:"text-gray-600",children:"Manage your PropFi subscription, billing, and pricing"})]}),l.jsxs(yr,{children:[l.jsx(Lr,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs(Mr,{className:"flex items-center space-x-2",children:[l.jsx(Aa,{className:"w-5 h-5"}),l.jsx("span",{children:"Current Plan"})]}),l.jsx(xn,{children:"PropFi Pro Plan"})]}),d(e.status)]})}),l.jsxs(vr,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Nr,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.properties," Properties"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Included in plan"})]})]}),f&&e.trialEnd&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zi,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trial Ends"}),l.jsx("p",{className:"text-xs text-gray-500",children:u(e.trialEnd)})]})]}),h&&e.currentPeriodEnd&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zi,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Next Billing"}),l.jsx("p",{className:"text-xs text-gray-500",children:u(e.currentPeriodEnd)})]})]})]}),f&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx($s,{className:"w-5 h-5 text-blue-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Free Trial Active"}),l.jsxs("p",{className:"text-xs text-blue-700",children:["Your trial ends on ",e.trialEnd?u(e.trialEnd):"N/A",". You'll be charged automatically unless you cancel."]})]})]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs($e,{onClick:c,className:"flex-1",disabled:!e.customerId,children:[l.jsx(b4,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]}),l.jsx($e,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),children:"Change Plan"})]})]})]}),l.jsxs(yr,{children:[l.jsxs(Lr,{children:[l.jsx(Mr,{children:"Plan Details"}),l.jsx(xn,{children:"What's included in your PropFi Pro plan"})]}),l.jsx(vr,{children:l.jsx("div",{className:"space-y-3",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support",`${e.properties} properties at $20 each`].map((p,x)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx($s,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:p})]},x))})})]}),h&&l.jsxs(yr,{children:[l.jsxs(Lr,{children:[l.jsx(Mr,{children:"Billing Information"}),l.jsx(xn,{children:"Your current billing cycle and payment details"})]}),l.jsx(vr,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Properties (",e.properties,"  $20)"]}),l.jsxs("span",{className:"text-sm font-medium",children:["$",e.properties*20,"/month"]})]}),l.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),l.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",e.properties*20,"/month"]})]})]})})]}),l.jsxs(yr,{children:[l.jsxs(Lr,{children:[l.jsxs(Mr,{className:"flex items-center space-x-2",children:[l.jsx(Nr,{className:"w-5 h-5"}),l.jsx("span",{children:"Pricing Plans"})]}),l.jsx(xn,{children:"Current PropFi pricing structure"})]}),l.jsx(vr,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PropFi Pro"}),l.jsx(gn,{className:"bg-blue-100 text-blue-800",children:"Current Plan"})]}),l.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-2",children:["$20 ",l.jsx("span",{className:"text-sm font-normal text-gray-600",children:"per property per month"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Start with a 1-month free trial, then pay only for what you need."}),l.jsx("div",{className:"space-y-2",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support","Secure cloud storage"].map((p,x)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx($s,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:p})]},x))})]}),l.jsx("div",{className:"text-center",children:l.jsx($e,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),variant:"outline",className:"w-full",children:"View Full Pricing Details"})})]})})]})]})},VN=({currentPage:t,setCurrentPage:e,onLogout:r,organizationName:n,isCollapsed:s=!1,onToggleCollapse:i})=>{var x,g,v,y;const{user:o}=qa(),[a,c]=T.useState(!1),[u,d]=T.useState(!1),[f,h]=T.useState(!1),p=[{id:"dashboard",label:"Dashboard",icon:S4},{id:"financials",label:"Financials",icon:en},{id:"analytics",label:"Analytics",icon:bn},{id:"reports",label:"Reports",icon:kn},{id:"properties",label:"Properties",icon:Nr},{id:"csvs",label:"CSV Upload & Management",icon:Xp},{id:"local-first",label:"Local-First Data",icon:w4},{id:"team-management",label:"Team Management",icon:tn}];return l.jsxs(l.Fragment,{children:[s&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:i}),l.jsxs("div",{className:`${s?"w-16":"w-64"} bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen transition-all duration-300 ease-in-out ${s?"fixed lg:relative z-50":"relative"}`,children:[l.jsxs("div",{className:"p-6",children:[!s&&l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(zs,{size:"lg",showText:!1}),l.jsx("div",{children:l.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n||"Property Management"})})]}),l.jsx("div",{className:`${s?"flex justify-center":"flex justify-end mt-4"}`,children:l.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s?l.jsx(E4,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),l.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]})})})]}),l.jsx("nav",{className:"mt-6 flex-1",children:p.map(m=>{const b=m.icon,k=t===m.id;return l.jsxs("button",{onClick:()=>{m.id==="team-management"?c(!0):(e(m.id),window.innerWidth<1024&&i&&i())},className:`w-full flex items-center ${s?"justify-center px-3":"space-x-3 px-6"} py-3 text-left transition-colors duration-200 ${k?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:s?m.label:void 0,children:[l.jsx(b,{className:`w-5 h-5 ${k?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-500"}`}),!s&&l.jsx("span",{className:"font-medium",children:m.label})]},m.id)})}),l.jsx("div",{className:"p-6 space-y-4 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:`flex items-center ${s?"justify-center":"space-x-3"} mb-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md p-2 -m-2 transition-colors duration-200`,onClick:()=>h(!f),children:[l.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-sm font-medium",children:((x=o==null?void 0:o.firstName)==null?void 0:x[0])||((v=(g=o==null?void 0:o.emailAddresses[0])==null?void 0:g.emailAddress)==null?void 0:v[0])||"U"})}),!s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o!=null&&o.firstName&&(o!=null&&o.lastName)?`${o.firstName} ${o.lastName}`:((y=o==null?void 0:o.emailAddresses[0])==null?void 0:y.emailAddress)||"User"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Property Manager"})]}),l.jsx("div",{className:`transform transition-transform duration-200 ${f?"rotate-180":""}`,children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f&&!s&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white rounded-md transition-colors duration-200",children:[l.jsx(Aa,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsx("span",{className:"text-sm font-medium",children:"Subscription"})]}),l.jsxs("button",{onClick:r,className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 rounded-md transition-colors duration-200",children:[l.jsx(j4,{className:"w-4 h-4 text-red-400 dark:text-red-500"}),l.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})})]}),a&&l.jsx(EN,{organizationName:n||"My Organization",onClose:()=>c(!1)}),u&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:m=>{m.target===m.currentTarget&&d(!1)},children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Subscription Management"}),l.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:l.jsx(co,{className:"w-6 h-6"})})]}),l.jsx(UN,{})]})})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ya(t){return t+.5|0}const Xn=(t,e,r)=>Math.max(Math.min(t,r),e);function Mo(t){return Xn(Ya(t*2.55),0,255)}function ls(t){return Xn(Ya(t*255),0,255)}function mn(t){return Xn(Ya(t/2.55)/100,0,1)}function Nx(t){return Xn(Ya(t*100),0,100)}const gr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wf=[..."0123456789ABCDEF"],HN=t=>wf[t&15],WN=t=>wf[(t&240)>>4]+wf[t&15],Bl=t=>(t&240)>>4===(t&15),qN=t=>Bl(t.r)&&Bl(t.g)&&Bl(t.b)&&Bl(t.a);function KN(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&gr[t[1]]*17,g:255&gr[t[2]]*17,b:255&gr[t[3]]*17,a:e===5?gr[t[4]]*17:255}:(e===7||e===9)&&(r={r:gr[t[1]]<<4|gr[t[2]],g:gr[t[3]]<<4|gr[t[4]],b:gr[t[5]]<<4|gr[t[6]],a:e===9?gr[t[7]]<<4|gr[t[8]]:255})),r}const GN=(t,e)=>t<255?e(t):"";function YN(t){var e=qN(t)?HN:WN;return t?"#"+e(t.r)+e(t.g)+e(t.b)+GN(t.a,e):void 0}const JN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function b_(t,e,r){const n=e*Math.min(r,1-r),s=(i,o=(i+t/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function XN(t,e,r){const n=(s,i=(s+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function QN(t,e,r){const n=b_(t,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)n[s]*=1-e-r,n[s]+=e;return n}function ZN(t,e,r,n,s){return t===s?(e-r)/n+(e<r?6:0):e===s?(r-t)/n+2:(t-e)/n+4}function eg(t){const r=t.r/255,n=t.g/255,s=t.b/255,i=Math.max(r,n,s),o=Math.min(r,n,s),a=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=a>.5?d/(2-i-o):d/(i+o),c=ZN(r,n,s,d,i),c=c*60+.5),[c|0,u||0,a]}function tg(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(ls)}function rg(t,e,r){return tg(b_,t,e,r)}function eA(t,e,r){return tg(QN,t,e,r)}function tA(t,e,r){return tg(XN,t,e,r)}function w_(t){return(t%360+360)%360}function rA(t){const e=JN.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Mo(+e[5]):ls(+e[5]));const s=w_(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=eA(s,i,o):e[1]==="hsv"?n=tA(s,i,o):n=rg(s,i,o),{r:n[0],g:n[1],b:n[2],a:r}}function nA(t,e){var r=eg(t);r[0]=w_(r[0]+e),r=rg(r),t.r=r[0],t.g=r[1],t.b=r[2]}function sA(t){if(!t)return;const e=eg(t),r=e[0],n=Nx(e[1]),s=Nx(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${s}%, ${mn(t.a)})`:`hsl(${r}, ${n}%, ${s}%)`}const Ax={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Px={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iA(){const t={},e=Object.keys(Px),r=Object.keys(Ax);let n,s,i,o,a;for(n=0;n<e.length;n++){for(o=a=e[n],s=0;s<r.length;s++)i=r[s],a=a.replace(i,Ax[i]);i=parseInt(Px[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Ll;function oA(t){Ll||(Ll=iA(),Ll.transparent=[0,0,0,0]);const e=Ll[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aA=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lA(t){const e=aA.exec(t);let r=255,n,s,i;if(e){if(e[7]!==n){const o=+e[7];r=e[8]?Mo(o):Xn(o*255,0,255)}return n=+e[1],s=+e[3],i=+e[5],n=255&(e[2]?Mo(n):Xn(n,0,255)),s=255&(e[4]?Mo(s):Xn(s,0,255)),i=255&(e[6]?Mo(i):Xn(i,0,255)),{r:n,g:s,b:i,a:r}}}function cA(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ih=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ui=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function uA(t,e,r){const n=ui(mn(t.r)),s=ui(mn(t.g)),i=ui(mn(t.b));return{r:ls(ih(n+r*(ui(mn(e.r))-n))),g:ls(ih(s+r*(ui(mn(e.g))-s))),b:ls(ih(i+r*(ui(mn(e.b))-i))),a:t.a+r*(e.a-t.a)}}function Ml(t,e,r){if(t){let n=eg(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=rg(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function __(t,e){return t&&Object.assign(e||{},t)}function Dx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ls(t[3]))):(e=__(t,{r:0,g:0,b:0,a:1}),e.a=ls(e.a)),e}function dA(t){return t.charAt(0)==="r"?lA(t):rA(t)}class Ta{constructor(e){if(e instanceof Ta)return e;const r=typeof e;let n;r==="object"?n=Dx(e):r==="string"&&(n=KN(e)||oA(e)||dA(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=__(this._rgb);return e&&(e.a=mn(e.a)),e}set rgb(e){this._rgb=Dx(e)}rgbString(){return this._valid?cA(this._rgb):void 0}hexString(){return this._valid?YN(this._rgb):void 0}hslString(){return this._valid?sA(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,s=e.rgb;let i;const o=r===i?.5:r,a=2*o-1,c=n.a-s.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;i=1-u,n.r=255&u*n.r+i*s.r+.5,n.g=255&u*n.g+i*s.g+.5,n.b=255&u*n.b+i*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=uA(this._rgb,e._rgb,r)),this}clone(){return new Ta(this.rgb)}alpha(e){return this._rgb.a=ls(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Ya(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ml(this._rgb,2,e),this}darken(e){return Ml(this._rgb,2,-e),this}saturate(e){return Ml(this._rgb,1,e),this}desaturate(e){return Ml(this._rgb,1,-e),this}rotate(e){return nA(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function an(){}const hA=(()=>{let t=0;return()=>t++})();function Be(t){return t==null}function Xe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function it(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function rr(t,e){return it(t)?t:e}function Ae(t,e){return typeof t>"u"?e:t}const fA=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ve(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Re(t,e,r,n){let s,i,o;if(Xe(t))if(i=t.length,n)for(s=i-1;s>=0;s--)e.call(r,t[s],s);else for(s=0;s<i;s++)e.call(r,t[s],s);else if(Te(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(r,t[o[s]],o[s])}function su(t,e){let r,n,s,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(s=t[r],i=e[r],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function iu(t){if(Xe(t))return t.map(iu);if(Te(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let s=0;for(;s<n;++s)e[r[s]]=iu(t[r[s]]);return e}return t}function k_(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pA(t,e,r,n){if(!k_(t))return;const s=e[t],i=r[t];Te(s)&&Te(i)?Oa(s,i,n):e[t]=iu(i)}function Oa(t,e,r){const n=Xe(e)?e:[e],s=n.length;if(!Te(t))return t;r=r||{};const i=r.merger||pA;let o;for(let a=0;a<s;++a){if(o=n[a],!Te(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,r)}return t}function ta(t,e){return Oa(t,e,{merger:gA})}function gA(t,e,r){if(!k_(t))return;const n=e[t],s=r[t];Te(n)&&Te(s)?ta(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=iu(s))}const Tx={"":t=>t,x:t=>t.x,y:t=>t.y};function mA(t){const e=t.split("."),r=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function xA(t){const e=mA(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function ou(t,e){return(Tx[e]||(Tx[e]=xA(e)))(t)}function ng(t){return t.charAt(0).toUpperCase()+t.slice(1)}const au=t=>typeof t<"u",hs=t=>typeof t=="function",Ox=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function yA(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ft=Math.PI,ur=2*ft,vA=ur+ft,lu=Number.POSITIVE_INFINITY,bA=ft/180,lr=ft/2,_s=ft/4,Ix=ft*2/3,Qn=Math.log10,eo=Math.sign;function ra(t,e,r){return Math.abs(t-e)<r}function Fx(t){const e=Math.round(t);t=ra(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Qn(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function wA(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((s,i)=>s-i).pop(),e}function _A(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ia(t){return!_A(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function kA(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function S_(t,e,r){let n,s,i;for(n=0,s=t.length;n<s;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Zn(t){return t*(ft/180)}function sg(t){return t*(180/ft)}function Rx(t){if(!it(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function SA(t,e){const r=e.x-t.x,n=e.y-t.y,s=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*ft&&(i+=ur),{angle:i,distance:s}}function _f(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function CA(t,e){return(t-e+vA)%ur-ft}function ir(t){return(t%ur+ur)%ur}function C_(t,e,r,n){const s=ir(t),i=ir(e),o=ir(r),a=ir(i-s),c=ir(o-s),u=ir(s-i),d=ir(s-o);return s===i||s===o||n&&i===o||a>c&&u<d}function _r(t,e,r){return Math.max(e,Math.min(r,t))}function jA(t){return _r(t,-32768,32767)}function Ii(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function ig(t,e,r){r=r||(o=>t[o]<e);let n=t.length-1,s=0,i;for(;n-s>1;)i=s+n>>1,r(i)?s=i:n=i;return{lo:s,hi:n}}const Us=(t,e,r,n)=>ig(t,r,n?s=>{const i=t[s][e];return i<r||i===r&&t[s+1][e]===r}:s=>t[s][e]<r),EA=(t,e,r)=>ig(t,r,n=>t[n][e]>=r);function NA(t,e,r){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>r;)s--;return n>0||s<t.length?t.slice(n,s):t}const j_=["push","pop","shift","splice","unshift"];function AA(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),j_.forEach(r=>{const n="_onData"+ng(r),s=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...i)}),o}})})}function Bx(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(j_.forEach(i=>{delete t[i]}),delete t._chartjs)}function PA(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const E_=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function N_(t,e){let r=[],n=!1;return function(...s){r=s,n||(n=!0,E_.call(window,()=>{n=!1,t.apply(e,r)}))}}function DA(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const og=t=>t==="start"?"left":t==="end"?"right":"center",Dt=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,TA=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function OA(t,e,r){const n=e.length;let s=0,i=n;if(t._sorted){const{iScale:o,vScale:a,_parsed:c}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:p,maxDefined:x}=o.getUserBounds();if(p){if(s=Math.min(Us(c,d,f).lo,r?n:Us(e,d,o.getPixelForValue(f)).lo),u){const g=c.slice(0,s+1).reverse().findIndex(v=>!Be(v[a.axis]));s-=Math.max(0,g)}s=_r(s,0,n-1)}if(x){let g=Math.max(Us(c,o.axis,h,!0).hi+1,r?0:Us(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const v=c.slice(g-1).findIndex(y=>!Be(y[a.axis]));g+=Math.max(0,v)}i=_r(g,s,n)-s}else i=n-s}return{start:s,count:i}}function IA(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=s,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),i}const $l=t=>t===0||t===1,Lx=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ur/r)),Mx=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*ur/r)+1,na={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*lr)+1,easeOutSine:t=>Math.sin(t*lr),easeInOutSine:t=>-.5*(Math.cos(ft*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>$l(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>$l(t)?t:Lx(t,.075,.3),easeOutElastic:t=>$l(t)?t:Mx(t,.075,.3),easeInOutElastic(t){return $l(t)?t:t<.5?.5*Lx(t*2,.1125,.45):.5+.5*Mx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-na.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?na.easeInBounce(t*2)*.5:na.easeOutBounce(t*2-1)*.5+.5};function ag(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $x(t){return ag(t)?t:new Ta(t)}function oh(t){return ag(t)?t:new Ta(t).saturate(.5).darken(.1).hexString()}const FA=["x","y","borderWidth","radius","tension"],RA=["color","borderColor","backgroundColor"];function BA(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:RA},numbers:{type:"number",properties:FA}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function LA(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zx=new Map;function MA(t,e){e=e||{};const r=t+JSON.stringify(e);let n=zx.get(r);return n||(n=new Intl.NumberFormat(t,e),zx.set(r,n)),n}function lg(t,e,r){return MA(e,r).format(t)}const A_={values(t){return Xe(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let s,i=t;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=$A(t,r)}const o=Qn(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),lg(t,n,c)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Qn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?A_.numeric.call(this,t,e,r):""}};function $A(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var Vu={formatters:A_};function zA(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Vu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Zs=Object.create(null),kf=Object.create(null);function sa(t,e){if(!e)return t;const r=e.split(".");for(let n=0,s=r.length;n<s;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function ah(t,e,r){return typeof e=="string"?Oa(sa(t,e),r):Oa(sa(t,""),e)}class UA{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>oh(s.backgroundColor),this.hoverBorderColor=(n,s)=>oh(s.borderColor),this.hoverColor=(n,s)=>oh(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return ah(this,e,r)}get(e){return sa(this,e)}describe(e,r){return ah(kf,e,r)}override(e,r){return ah(Zs,e,r)}route(e,r,n,s){const i=sa(this,e),o=sa(this,n),a="_"+r;Object.defineProperties(i,{[a]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[a],u=o[s];return Te(c)?Object.assign({},u,c):Ae(c,u)},set(c){this[a]=c}}})}apply(e){e.forEach(r=>r(this))}}var ot=new UA({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[BA,LA,zA]);function VA(t){return!t||Be(t.size)||Be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function cu(t,e,r,n,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,r.push(s)),i>n&&(n=i),n}function HA(t,e,r,n){n=n||{};let s=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const a=r.length;let c,u,d,f,h;for(c=0;c<a;c++)if(f=r[c],f!=null&&!Xe(f))o=cu(t,s,i,o,f);else if(Xe(f))for(u=0,d=f.length;u<d;u++)h=f[u],h!=null&&!Xe(h)&&(o=cu(t,s,i,o,h));t.restore();const p=i.length/2;if(p>r.length){for(c=0;c<p;c++)delete s[i[c]];i.splice(0,p)}return o}function ks(t,e,r){const n=t.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*n)/n+s}function Ux(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Sf(t,e,r,n){P_(t,e,r,n,null)}function P_(t,e,r,n,s){let i,o,a,c,u,d,f,h;const p=e.pointStyle,x=e.rotation,g=e.radius;let v=(x||0)*bA;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:s?t.ellipse(r,n,s/2,g,0,0,ur):t.arc(r,n,g,0,ur),t.closePath();break;case"triangle":d=s?s/2:g,t.moveTo(r+Math.sin(v)*d,n-Math.cos(v)*g),v+=Ix,t.lineTo(r+Math.sin(v)*d,n-Math.cos(v)*g),v+=Ix,t.lineTo(r+Math.sin(v)*d,n-Math.cos(v)*g),t.closePath();break;case"rectRounded":u=g*.516,c=g-u,o=Math.cos(v+_s)*c,f=Math.cos(v+_s)*(s?s/2-u:c),a=Math.sin(v+_s)*c,h=Math.sin(v+_s)*(s?s/2-u:c),t.arc(r-f,n-a,u,v-ft,v-lr),t.arc(r+h,n-o,u,v-lr,v),t.arc(r+f,n+a,u,v,v+lr),t.arc(r-h,n+o,u,v+lr,v+ft),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*g,d=s?s/2:c,t.rect(r-d,n-c,2*d,2*c);break}v+=_s;case"rectRot":f=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(s?s/2:g),t.moveTo(r-f,n-a),t.lineTo(r+h,n-o),t.lineTo(r+f,n+a),t.lineTo(r-h,n+o),t.closePath();break;case"crossRot":v+=_s;case"cross":f=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(s?s/2:g),t.moveTo(r-f,n-a),t.lineTo(r+f,n+a),t.moveTo(r+h,n-o),t.lineTo(r-h,n+o);break;case"star":f=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(s?s/2:g),t.moveTo(r-f,n-a),t.lineTo(r+f,n+a),t.moveTo(r+h,n-o),t.lineTo(r-h,n+o),v+=_s,f=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(s?s/2:g),t.moveTo(r-f,n-a),t.lineTo(r+f,n+a),t.moveTo(r+h,n-o),t.lineTo(r-h,n+o);break;case"line":o=s?s/2:Math.cos(v)*g,a=Math.sin(v)*g,t.moveTo(r-o,n-a),t.lineTo(r+o,n+a);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(v)*(s?s/2:g),n+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function wn(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Hu(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Wu(t){t.restore()}function WA(t,e,r,n,s){if(!e)return t.lineTo(r.x,r.y);if(s==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else s==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function qA(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function KA(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function GA(t,e,r,n,s){if(s.strikethrough||s.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,u=r+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function YA(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function ei(t,e,r,n,s,i={}){const o=Xe(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=s.string,KA(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&YA(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Be(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,r,n,i.maxWidth)),t.fillText(u,r,n,i.maxWidth),GA(t,r,n,u,i),n+=Number(s.lineHeight);t.restore()}function uu(t,e){const{x:r,y:n,w:s,h:i,radius:o}=e;t.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*ft,ft,!0),t.lineTo(r,n+i-o.bottomLeft),t.arc(r+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,ft,lr,!0),t.lineTo(r+s-o.bottomRight,n+i),t.arc(r+s-o.bottomRight,n+i-o.bottomRight,o.bottomRight,lr,0,!0),t.lineTo(r+s,n+o.topRight),t.arc(r+s-o.topRight,n+o.topRight,o.topRight,0,-lr,!0),t.lineTo(r+o.topLeft,n)}const JA=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XA=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function QA(t,e){const r=(""+t).match(JA);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZA=t=>+t||0;function D_(t,e){const r={},n=Te(e),s=n?Object.keys(e):e,i=Te(t)?n?o=>Ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)r[o]=ZA(i(o));return r}function e8(t){return D_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ui(t){return D_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function It(t){const e=e8(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vt(t,e){t=t||{},e=e||ot.font;let r=Ae(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Ae(t.style,e.style);n&&!(""+n).match(XA)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Ae(t.family,e.family),lineHeight:QA(Ae(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Ae(t.weight,e.weight),string:""};return s.string=VA(s),s}function zl(t,e,r,n){let s=!0,i,o,a;for(i=0,o=t.length;i<o;++i)if(a=t[i],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),r!==void 0&&Xe(a)&&(a=a[r%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function t8(t,e,r){const{min:n,max:s}=t,i=fA(e,(s-n)/2),o=(a,c)=>r&&a===0?0:a+c;return{min:o(n,-Math.abs(i)),max:o(s,i)}}function ms(t,e){return Object.assign(Object.create(t),e)}function cg(t,e=[""],r,n,s=()=>t[0]){const i=r||t;typeof n>"u"&&(n=F_("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:a=>cg([a,...t],e,i,n)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return O_(a,c,()=>c8(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return Hx(a).includes(c)},ownKeys(a){return Hx(a)},set(a,c,u){const d=a._storage||(a._storage=s());return a[c]=d[c]=u,delete a._keys,!0}})}function to(t,e,r,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:T_(t,n),setContext:i=>to(t,i,r,n),override:i=>to(t.override(i),e,r,n)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return O_(i,o,()=>n8(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function T_(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:r,indexable:n,isScriptable:hs(r)?r:()=>r,isIndexable:hs(n)?n:()=>n}}const r8=(t,e)=>t?t+ng(e):e,ug=(t,e)=>Te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function O_(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function n8(t,e,r){const{_proxy:n,_context:s,_subProxy:i,_descriptors:o}=t;let a=n[e];return hs(a)&&o.isScriptable(e)&&(a=s8(e,a,t,r)),Xe(a)&&a.length&&(a=i8(e,a,t,o.isIndexable)),ug(e,a)&&(a=to(a,s,i&&i[e],o)),a}function s8(t,e,r,n){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=r;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(i,o||n);return a.delete(t),ug(t,c)&&(c=dg(s._scopes,s,t,c)),c}function i8(t,e,r,n){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(Te(e[0])){const c=e,u=s._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=dg(u,s,t,d);e.push(to(f,i,o&&o[t],a))}}return e}function I_(t,e,r){return hs(t)?t(e,r):t}const o8=(t,e)=>t===!0?e:typeof t=="string"?ou(e,t):void 0;function a8(t,e,r,n,s){for(const i of e){const o=o8(r,i);if(o){t.add(o);const a=I_(o._fallback,r,s);if(typeof a<"u"&&a!==r&&a!==n)return a}else if(o===!1&&typeof n<"u"&&r!==n)return null}return!1}function dg(t,e,r,n){const s=e._rootScopes,i=I_(e._fallback,r,n),o=[...t,...s],a=new Set;a.add(n);let c=Vx(a,o,r,i||r,n);return c===null||typeof i<"u"&&i!==r&&(c=Vx(a,o,i,c,n),c===null)?!1:cg(Array.from(a),[""],s,i,()=>l8(e,r,n))}function Vx(t,e,r,n,s){for(;r;)r=a8(t,e,r,n,s);return r}function l8(t,e,r){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return Xe(s)&&Te(r)?r:s||{}}function c8(t,e,r,n){let s;for(const i of e)if(s=F_(r8(i,t),r),typeof s<"u")return ug(t,s)?dg(r,n,t,s):s}function F_(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function Hx(t){let e=t._keys;return e||(e=t._keys=u8(t._scopes)),e}function u8(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}const d8=Number.EPSILON||1e-14,ro=(t,e)=>e<t.length&&!t[e].skip&&t[e],R_=t=>t==="x"?"y":"x";function h8(t,e,r,n){const s=t.skip?e:t,i=e,o=r.skip?e:r,a=_f(i,s),c=_f(o,i);let u=a/(a+c),d=c/(a+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=n*u,h=n*d;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+h*(o.x-s.x),y:i.y+h*(o.y-s.y)}}}function f8(t,e,r){const n=t.length;let s,i,o,a,c,u=ro(t,0);for(let d=0;d<n-1;++d)if(c=u,u=ro(t,d+1),!(!c||!u)){if(ra(e[d],0,d8)){r[d]=r[d+1]=0;continue}s=r[d]/e[d],i=r[d+1]/e[d],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),r[d]=s*o*e[d],r[d+1]=i*o*e[d])}}function p8(t,e,r="x"){const n=R_(r),s=t.length;let i,o,a,c=ro(t,0);for(let u=0;u<s;++u){if(o=a,a=c,c=ro(t,u+1),!a)continue;const d=a[r],f=a[n];o&&(i=(d-o[r])/3,a[`cp1${r}`]=d-i,a[`cp1${n}`]=f-i*e[u]),c&&(i=(c[r]-d)/3,a[`cp2${r}`]=d+i,a[`cp2${n}`]=f+i*e[u])}}function g8(t,e="x"){const r=R_(e),n=t.length,s=Array(n).fill(0),i=Array(n);let o,a,c,u=ro(t,0);for(o=0;o<n;++o)if(a=c,c=u,u=ro(t,o+1),!!c){if(u){const d=u[e]-c[e];s[o]=d!==0?(u[r]-c[r])/d:0}i[o]=a?u?eo(s[o-1])!==eo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}f8(t,s,i),p8(t,i,e)}function Ul(t,e,r){return Math.max(Math.min(t,r),e)}function m8(t,e){let r,n,s,i,o,a=wn(t[0],e);for(r=0,n=t.length;r<n;++r)o=i,i=a,a=r<n-1&&wn(t[r+1],e),i&&(s=t[r],o&&(s.cp1x=Ul(s.cp1x,e.left,e.right),s.cp1y=Ul(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ul(s.cp2x,e.left,e.right),s.cp2y=Ul(s.cp2y,e.top,e.bottom)))}function x8(t,e,r,n,s){let i,o,a,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")g8(t,s);else{let u=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],c=h8(u,a,t[Math.min(i+1,o-(n?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}e.capBezierPoints&&m8(t,r)}function hg(){return typeof window<"u"&&typeof document<"u"}function fg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function du(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const qu=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function y8(t,e){return qu(t).getPropertyValue(e)}const v8=["top","right","bottom","left"];function Ws(t,e,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const i=v8[s];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const b8=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function w8(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:s,offsetY:i}=n;let o=!1,a,c;if(b8(s,i,t.target))a=s,c=i;else{const u=e.getBoundingClientRect();a=n.clientX-u.left,c=n.clientY-u.top,o=!0}return{x:a,y:c,box:o}}function Ts(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,s=qu(r),i=s.boxSizing==="border-box",o=Ws(s,"padding"),a=Ws(s,"border","width"),{x:c,y:u,box:d}=w8(t,r),f=o.left+(d&&a.left),h=o.top+(d&&a.top);let{width:p,height:x}=e;return i&&(p-=o.width+a.width,x-=o.height+a.height),{x:Math.round((c-f)/p*r.width/n),y:Math.round((u-h)/x*r.height/n)}}function _8(t,e,r){let n,s;if(e===void 0||r===void 0){const i=t&&fg(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const o=i.getBoundingClientRect(),a=qu(i),c=Ws(a,"border","width"),u=Ws(a,"padding");e=o.width-u.width-c.width,r=o.height-u.height-c.height,n=du(a.maxWidth,i,"clientWidth"),s=du(a.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||lu,maxHeight:s||lu}}const Vl=t=>Math.round(t*10)/10;function k8(t,e,r,n){const s=qu(t),i=Ws(s,"margin"),o=du(s.maxWidth,t,"clientWidth")||lu,a=du(s.maxHeight,t,"clientHeight")||lu,c=_8(t,e,r);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const h=Ws(s,"border","width"),p=Ws(s,"padding");u-=p.width+h.width,d-=p.height+h.height}return u=Math.max(0,u-i.width),d=Math.max(0,n?u/n:d-i.height),u=Vl(Math.min(u,o,c.maxWidth)),d=Vl(Math.min(d,a,c.maxHeight)),u&&!d&&(d=Vl(u/2)),(e!==void 0||r!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,u=Vl(Math.floor(d*n))),{width:u,height:d}}function Wx(t,e,r){const n=e||1,s=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=n,o.height=s,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const S8=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function qx(t,e){const r=y8(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Os(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function C8(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function j8(t,e,r,n){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Os(t,s,r),a=Os(s,i,r),c=Os(i,e,r),u=Os(o,a,r),d=Os(a,c,r);return Os(u,d,r)}const E8=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},N8=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vi(t,e,r){return t?E8(e,r):N8()}function B_(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function L_(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function M_(t){return t==="angle"?{between:C_,compare:CA,normalize:ir}:{between:Ii,compare:(e,r)=>e-r,normalize:e=>e}}function Kx({start:t,end:e,count:r,loop:n,style:s}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:s}}function A8(t,e,r){const{property:n,start:s,end:i}=r,{between:o,normalize:a}=M_(n),c=e.length;let{start:u,end:d,loop:f}=t,h,p;if(f){for(u+=c,d+=c,h=0,p=c;h<p&&o(a(e[u%c][n]),s,i);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:t.style}}function $_(t,e,r){if(!r)return[t];const{property:n,start:s,end:i}=r,o=e.length,{compare:a,between:c,normalize:u}=M_(n),{start:d,end:f,loop:h,style:p}=A8(t,e,r),x=[];let g=!1,v=null,y,m,b;const k=()=>c(s,b,y)&&a(s,b)!==0,C=()=>a(i,y)===0||c(i,b,y),E=()=>g||k(),j=()=>!g||C();for(let w=d,_=d;w<=f;++w)m=e[w%o],!m.skip&&(y=u(m[n]),y!==b&&(g=c(y,s,i),v===null&&E()&&(v=a(y,s)===0?w:_),v!==null&&j()&&(x.push(Kx({start:v,end:w,loop:h,count:o,style:p})),v=null),_=w,b=y));return v!==null&&x.push(Kx({start:v,end:f,loop:h,count:o,style:p})),x}function z_(t,e){const r=[],n=t.segments;for(let s=0;s<n.length;s++){const i=$_(n[s],t.points,e);i.length&&r.push(...i)}return r}function P8(t,e,r,n){let s=0,i=e-1;if(r&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,r&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function D8(t,e,r,n){const s=t.length,i=[];let o=e,a=t[e],c;for(c=e+1;c<=r;++c){const u=t[c%s];u.skip||u.stop?a.skip||(n=!1,i.push({start:e%s,end:(c-1)%s,loop:n}),e=o=u.stop?c:null):(o=c,a.skip&&(e=c)),a=u}return o!==null&&i.push({start:e%s,end:o%s,loop:n}),i}function T8(t,e){const r=t.points,n=t.options.spanGaps,s=r.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=P8(r,s,i,n);if(n===!0)return Gx(t,[{start:o,end:a,loop:i}],r,e);const c=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return Gx(t,D8(r,o,c,u),r,e)}function Gx(t,e,r,n){return!n||!n.setContext||!r?e:O8(t,e,r,n)}function O8(t,e,r,n){const s=t._chart.getContext(),i=Yx(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=r.length,u=[];let d=i,f=e[0].start,h=f;function p(x,g,v,y){const m=a?-1:1;if(x!==g){for(x+=c;r[x%c].skip;)x-=m;for(;r[g%c].skip;)g+=m;x%c!==g%c&&(u.push({start:x%c,end:g%c,loop:v,style:y}),d=y,f=g%c)}}for(const x of e){f=a?f:x.start;let g=r[f%c],v;for(h=f+1;h<=x.end;h++){const y=r[h%c];v=Yx(n.setContext(ms(s,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),I8(v,d)&&p(f,h-1,x.loop,d),g=y,d=v}f<h-1&&p(f,h-1,x.loop,d)}return u}function Yx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function I8(t,e){if(!e)return!1;const r=[],n=function(s,i){return ag(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Hl(t,e,r){return t.options.clip?t[r]:e[r]}function F8(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Hl(r,e,"left"),right:Hl(r,e,"right"),top:Hl(n,e,"top"),bottom:Hl(n,e,"bottom")}:e}function U_(t,e){const r=e._clip;if(r.disabled)return!1;const n=F8(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class R8{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,s){const i=r.listeners[s],o=r.duration;i.forEach(a=>a({chart:e,initial:r.initial,numSteps:o,currentStep:Math.min(n-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=E_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,a=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,n,e,"progress")),i.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cn=new R8;const Jx="transparent",B8={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=$x(t||Jx),s=n.valid&&$x(e||Jx);return s&&s.valid?s.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class L8{constructor(e,r,n,s){const i=r[n];s=zl([e.to,s,i,e.from]);const o=zl([e.from,i,s]);this._active=!0,this._fn=e.fn||B8[e.type||typeof o],this._easing=na[e.easing]||na.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const s=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=zl([e.to,r,s,e.from]),this._from=zl([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let c;if(this._active=i!==a&&(o||r<n),!this._active){this._target[s]=a,this._notify(!0);return}if(r<0){this._target[s]=i;return}c=r/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][r]()}}class V_{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Te(e))return;const r=Object.keys(ot.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Te(i))return;const o={};for(const a of r)o[a]=i[a];(Xe(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(e,r){const n=r.options,s=$8(e,n);if(!s)return[];const i=this._createAnimations(s,n);return n.$shared&&M8(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(r),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,r));continue}const d=r[u];let f=i[u];const h=n.get(u);if(f)if(h&&f.active()){f.update(h,d,a);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}i[u]=f=new L8(h,e,u,d),s.push(f)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return cn.add(this._chart,n),!0}}function M8(t,e){const r=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const i=t[n[s]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function $8(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Xx(t,e){const r=t&&t.options||{},n=r.reverse,s=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:s,end:n?s:i}}function z8(t,e,r){if(r===!1)return!1;const n=Xx(t,r),s=Xx(e,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function U8(t){let e,r,n,s;return Te(t)?(e=t.top,r=t.right,n=t.bottom,s=t.left):e=r=n=s=t,{top:e,right:r,bottom:n,left:s,disabled:t===!1}}function H_(t,e){const r=[],n=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=n.length;s<i;++s)r.push(n[s].index);return r}function Qx(t,e,r,n={}){const s=t.keys,i=n.mode==="single";let o,a,c,u;if(e===null)return;let d=!1;for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===r){if(d=!0,n.all)continue;break}u=t.values[c],it(u)&&(i||e===0||eo(e)===eo(u))&&(e+=u)}return!d&&!n.all?0:e}function V8(t,e){const{iScale:r,vScale:n}=e,s=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],a[c]={[s]:d,[i]:t[d]};return a}function lh(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function H8(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function W8(t){const{min:e,max:r,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function q8(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function Zx(t,e,r,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const i=t[s.index];if(r&&i>0||!r&&i<0)return s.index}return null}function ey(t,e){const{chart:r,_cachedMeta:n}=t,s=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:a}=n,c=i.axis,u=o.axis,d=H8(i,o,n),f=e.length;let h;for(let p=0;p<f;++p){const x=e[p],{[c]:g,[u]:v}=x,y=x._stacks||(x._stacks={});h=y[u]=q8(s,d,g),h[a]=v,h._top=Zx(h,o,!0,n.type),h._bottom=Zx(h,o,!1,n.type);const m=h._visualValues||(h._visualValues={});m[a]=v}}function ch(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function K8(t,e){return ms(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function G8(t,e,r){return ms(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function No(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const uh=t=>t==="reset"||t==="none",ty=(t,e)=>e?t:Object.assign({},t),Y8=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:H_(r,!0),values:null};class ia{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&No(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),s=(f,h,p,x)=>f==="x"?h:f==="r"?x:p,i=r.xAxisID=Ae(n.xAxisID,ch(e,"x")),o=r.yAxisID=Ae(n.yAxisID,ch(e,"y")),a=r.rAxisID=Ae(n.rAxisID,ch(e,"r")),c=r.indexAxis,u=r.iAxisID=s(c,i,o,a),d=r.vAxisID=s(c,o,i,a);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(a),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Bx(this._data,this),e._stacked&&No(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Te(r)){const s=this._cachedMeta;this._data=V8(r,s)}else if(n!==r){if(n){Bx(n,this);const s=this._cachedMeta;No(s),s._parsed=[]}r&&Object.isExtensible(r)&&AA(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const i=r._stacked;r._stacked=lh(r.vScale,r),r.stack!==n.stack&&(s=!0,No(r),r.stack=n.stack),this._resyncElements(e),(s||i!==r._stacked)&&(ey(this,r._parsed),r._stacked=lh(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:s}=this,{iScale:i,_stacked:o}=n,a=i.axis;let c=e===0&&r===s.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,f,h;if(this._parsing===!1)n._parsed=s,n._sorted=!0,h=s;else{Xe(s[e])?h=this.parseArrayData(n,s,e,r):Te(s[e])?h=this.parseObjectData(n,s,e,r):h=this.parsePrimitiveData(n,s,e,r);const p=()=>f[a]===null||u&&f[a]<u[a];for(d=0;d<r;++d)n._parsed[d+e]=f=h[d],c&&(p()&&(c=!1),u=f);n._sorted=c}o&&ey(this,h)}parsePrimitiveData(e,r,n,s){const{iScale:i,vScale:o}=e,a=i.axis,c=o.axis,u=i.getLabels(),d=i===o,f=new Array(s);let h,p,x;for(h=0,p=s;h<p;++h)x=h+n,f[h]={[a]:d||i.parse(u[x],x),[c]:o.parse(r[x],x)};return f}parseArrayData(e,r,n,s){const{xScale:i,yScale:o}=e,a=new Array(s);let c,u,d,f;for(c=0,u=s;c<u;++c)d=c+n,f=r[d],a[c]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,r,n,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,f,h,p;for(d=0,f=s;d<f;++d)h=d+n,p=r[h],u[d]={x:i.parse(ou(p,a),h),y:o.parse(ou(p,c),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const s=this.chart,i=this._cachedMeta,o=r[e.axis],a={keys:H_(s,!0),values:r._stacks[e.axis]._visualValues};return Qx(a,o,i.index,{mode:n})}updateRangeFromParsed(e,r,n,s){const i=n[r.axis];let o=i===null?NaN:i;const a=s&&n._stacks[r.axis];s&&a&&(s.values=a,o=Qx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,r){const n=this._cachedMeta,s=n._parsed,i=n._sorted&&e===n.iScale,o=s.length,a=this._getOtherScale(e),c=Y8(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=W8(a);let h,p;function x(){p=s[h];const g=p[a.axis];return!it(p[e.axis])||d>g||f<g}for(h=0;h<o&&!(!x()&&(this.updateRangeFromParsed(u,e,p,c),i));++h);if(i){for(h=o-1;h>=0;--h)if(!x()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let s,i,o;for(s=0,i=r.length;s<i;++s)o=r[s][e.axis],it(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,s=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=U8(Ae(this.options.clip,z8(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,s=n.data||[],i=r.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,i,a,c),d=a;d<a+c;++d){const f=s[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=G8(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=K8(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const s=r==="active",i=this._cachedDataOpts,o=e+"-"+r,a=i[o],c=this.enableOptionSharing&&au(n);if(a)return ty(a,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),p=Object.keys(ot.elements[e]),x=()=>this.getContext(n,s,r),g=u.resolveNamedOptions(h,p,x,f);return g.$shared&&(g.$shared=c,i[o]=Object.freeze(ty(g,c))),g}_resolveAnimations(e,r,n){const s=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,a=i[o];if(a)return a;let c;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,r),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(e,n,r))}const u=new V_(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||uh(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),s=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(r,i)||i!==s;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:o}}updateElement(e,r,n,s){uh(s)?Object.assign(e,n):this._resolveAnimations(r,s).update(e,n)}updateSharedOptions(e,r,n){e&&!uh(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,s){e.active=s;const i=this.getStyle(r,s);this._resolveAnimations(r,n,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[a,c,u]of this._syncList)this[a](c,u);this._syncList=[];const s=n.length,i=r.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,r,n=!0){const s=this._cachedMeta,i=s.data,o=e+r;let a;const c=u=>{for(u.length+=r,a=u.length-1;a>=o;a--)u[a]=u[a-r]};for(c(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,s){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,r);n._stacked&&No(n,s)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,s]=e;this[r](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ve(ia,"defaults",{}),ve(ia,"datasetElementType",null),ve(ia,"dataElementType",null);class wc extends ia{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:s=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:a,count:c}=OA(r,s,o);this._drawStart=a,this._drawCount=c,IA(r)&&(a=0,c=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},e),this.updateElements(s,a,c,e)}updateElements(e,r,n,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,s),h=o.axis,p=a.axis,{spanGaps:x,segment:g}=this.options,v=Ia(x)?x:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||s==="none",m=r+n,b=e.length;let k=r>0&&this.getParsed(r-1);for(let C=0;C<b;++C){const E=e[C],j=y?E:{};if(C<r||C>=m){j.skip=!0;continue}const w=this.getParsed(C),_=Be(w[p]),S=j[h]=o.getPixelForValue(w[h],C),A=j[p]=i||_?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,w,c):w[p],C);j.skip=isNaN(S)||isNaN(A)||_,j.stop=C>0&&Math.abs(w[h]-k[h])>v,g&&(j.parsed=w,j.raw=u.data[C]),f&&(j.options=d||this.resolveDataElementOptions(C,E.active?"active":s)),y||this.updateElement(E,C,j,s),k=w}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ve(wc,"id","line"),ve(wc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ve(wc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ss(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pg{constructor(e){ve(this,"options");this.options=e||{}}static override(e){Object.assign(pg.prototype,e)}init(){}formats(){return Ss()}parse(){return Ss()}format(){return Ss()}add(){return Ss()}diff(){return Ss()}startOf(){return Ss()}endOf(){return Ss()}}var J8={_date:pg};function X8(t,e,r,n){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?EA:Us;if(n){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(i,e,r-f),p=u(i,e,r+f);return{lo:h.lo,hi:p.hi}}}}else{const d=u(i,e,r);if(c){const{vScale:f}=s._cachedMeta,{_parsed:h}=t,p=h.slice(0,d.lo+1).reverse().findIndex(g=>!Be(g[f.axis]));d.lo-=Math.max(0,p);const x=h.slice(d.hi).findIndex(g=>!Be(g[f.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:i.length-1}}function Ja(t,e,r,n,s){const i=t.getSortedVisibleDatasetMetas(),o=r[e];for(let a=0,c=i.length;a<c;++a){const{index:u,data:d}=i[a],{lo:f,hi:h}=X8(i[a],e,o,s);for(let p=f;p<=h;++p){const x=d[p];x.skip||n(x,u,p)}}}function Q8(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,s){const i=e?Math.abs(n.x-s.x):0,o=r?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function dh(t,e,r,n,s){const i=[];return!s&&!t.isPointInArea(e)||Ja(t,r,e,function(a,c,u){!s&&!wn(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&i.push({element:a,datasetIndex:c,index:u})},!0),i}function Z8(t,e,r,n){let s=[];function i(o,a,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:f}=SA(o,{x:e.x,y:e.y});C_(f,u,d)&&s.push({element:o,datasetIndex:a,index:c})}return Ja(t,r,e,i),s}function eP(t,e,r,n,s,i){let o=[];const a=Q8(r);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const p=d.inRange(e.x,e.y,s);if(n&&!p)return;const x=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!p)return;const v=a(e,x);v<c?(o=[{element:d,datasetIndex:f,index:h}],c=v):v===c&&o.push({element:d,datasetIndex:f,index:h})}return Ja(t,r,e,u),o}function hh(t,e,r,n,s,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?Z8(t,e,r,s):eP(t,e,r,n,s,i)}function ry(t,e,r,n,s){const i=[],o=r==="x"?"inXRange":"inYRange";let a=!1;return Ja(t,r,e,(c,u,d)=>{c[o]&&c[o](e[r],s)&&(i.push({element:c,datasetIndex:u,index:d}),a=a||c.inRange(e.x,e.y,s))}),n&&!a?[]:i}var tP={evaluateInteractionItems:Ja,modes:{index(t,e,r,n){const s=Ts(e,t),i=r.axis||"x",o=r.includeInvisible||!1,a=r.intersect?dh(t,s,i,n,o):hh(t,s,i,!1,n,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,r,n){const s=Ts(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;let a=r.intersect?dh(t,s,i,n,o):hh(t,s,i,!1,n,o);if(a.length>0){const c=a[0].datasetIndex,u=t.getDatasetMeta(c).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:c,index:d})}return a},point(t,e,r,n){const s=Ts(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return dh(t,s,i,n,o)},nearest(t,e,r,n){const s=Ts(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return hh(t,s,i,r.intersect,n,o)},x(t,e,r,n){const s=Ts(e,t);return ry(t,s,"x",r.intersect,n)},y(t,e,r,n){const s=Ts(e,t);return ry(t,s,"y",r.intersect,n)}}};const W_=["left","top","right","bottom"];function Ao(t,e){return t.filter(r=>r.pos===e)}function ny(t,e){return t.filter(r=>W_.indexOf(r.pos)===-1&&r.box.axis===e)}function Po(t,e){return t.sort((r,n)=>{const s=e?n:r,i=e?r:n;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function rP(t){const e=[];let r,n,s,i,o,a;for(r=0,n=(t||[]).length;r<n;++r)s=t[r],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:r,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function nP(t){const e={};for(const r of t){const{stack:n,pos:s,stackWeight:i}=r;if(!n||!W_.includes(s))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function sP(t,e){const r=nP(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:c}=a.box,u=r[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*n:c&&e.availableWidth,a.height=s):(a.width=n,a.height=d?d*s:c&&e.availableHeight)}return r}function iP(t){const e=rP(t),r=Po(e.filter(u=>u.box.fullSize),!0),n=Po(Ao(e,"left"),!0),s=Po(Ao(e,"right")),i=Po(Ao(e,"top"),!0),o=Po(Ao(e,"bottom")),a=ny(e,"x"),c=ny(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:Ao(e,"chartArea"),vertical:n.concat(s).concat(c),horizontal:i.concat(o).concat(a)}}function sy(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function q_(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function oP(t,e,r,n){const{pos:s,box:i}=r,o=t.maxPadding;if(!Te(s)){r.size&&(t[s]-=r.size);const f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,t[s]+=r.size}i.getPadding&&q_(o,i.getPadding());const a=Math.max(0,e.outerWidth-sy(o,t,"left","right")),c=Math.max(0,e.outerHeight-sy(o,t,"top","bottom")),u=a!==t.w,d=c!==t.h;return t.w=a,t.h=c,r.horizontal?{same:u,other:d}:{same:d,other:u}}function aP(t){const e=t.maxPadding;function r(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function lP(t,e){const r=e.maxPadding;function n(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],r[o])}),i}return n(t?["left","right"]:["top","bottom"])}function $o(t,e,r,n){const s=[];let i,o,a,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],c=a.box,c.update(a.width||e.w,a.height||e.h,lP(a.horizontal,e));const{same:f,other:h}=oP(e,r,a,n);u|=f&&s.length,d=d||h,c.fullSize||s.push(a)}return u&&$o(s,e,r,n)||d}function Wl(t,e,r,n,s){t.top=r,t.left=e,t.right=e+n,t.bottom=r+s,t.width=n,t.height=s}function iy(t,e,r,n){const s=r.padding;let{x:i,y:o}=e;for(const a of t){const c=a.box,u=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const f=e.w*d,h=u.size||c.height;au(u.start)&&(o=u.start),c.fullSize?Wl(c,s.left,o,r.outerWidth-s.right-s.left,h):Wl(c,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,h=u.size||c.width;au(u.start)&&(i=u.start),c.fullSize?Wl(c,i,s.top,h,r.outerHeight-s.bottom-s.top):Wl(c,i,e.top+u.placed,h,f),u.start=i,u.placed+=f,i=c.right}}e.x=i,e.y=o}var kr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const s=It(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(r-s.height,0),a=iP(t.boxes),c=a.vertical,u=a.horizontal;Re(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},s);q_(h,It(n));const p=Object.assign({maxPadding:h,w:i,h:o,x:s.left,y:s.top},s),x=sP(c.concat(u),f);$o(a.fullSize,p,f,x),$o(c,p,f,x),$o(u,p,f,x)&&$o(c,p,f,x),aP(p),iy(a.leftAndTop,p,f,x),p.x+=p.w,p.y+=p.h,iy(a.rightAndBottom,p,f,x),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Re(a.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class K_{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,s){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):n)}}isAttached(e){return!0}updateConfig(e){}}class cP extends K_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _c="$chartjs",uP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oy=t=>t===null||t==="";function dP(t,e){const r=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[_c]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",oy(s)){const i=qx(t,"width");i!==void 0&&(t.width=i)}if(oy(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=qx(t,"height");i!==void 0&&(t.height=i)}return t}const G_=S8?{passive:!0}:!1;function hP(t,e,r){t&&t.addEventListener(e,r,G_)}function fP(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,G_)}function pP(t,e){const r=uP[t.type]||t.type,{x:n,y:s}=Ts(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function hu(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function gP(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||hu(a.addedNodes,n),o=o&&!hu(a.removedNodes,n);o&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function mP(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||hu(a.removedNodes,n),o=o&&!hu(a.addedNodes,n);o&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const Fa=new Map;let ay=0;function Y_(){const t=window.devicePixelRatio;t!==ay&&(ay=t,Fa.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function xP(t,e){Fa.size||window.addEventListener("resize",Y_),Fa.set(t,e)}function yP(t){Fa.delete(t),Fa.size||window.removeEventListener("resize",Y_)}function vP(t,e,r){const n=t.canvas,s=n&&fg(n);if(!s)return;const i=N_((a,c)=>{const u=s.clientWidth;r(a,c),u<s.clientWidth&&r()},window),o=new ResizeObserver(a=>{const c=a[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(s),xP(t,i),o}function fh(t,e,r){r&&r.disconnect(),e==="resize"&&yP(t)}function bP(t,e,r){const n=t.canvas,s=N_(i=>{t.ctx!==null&&r(pP(i,t))},t);return hP(n,e,s),s}class wP extends K_{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(dP(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[_c])return!1;const n=r[_c].initial;["height","width"].forEach(i=>{const o=n[i];Be(o)?r.removeAttribute(i):r.setAttribute(i,o)});const s=n.style||{};return Object.keys(s).forEach(i=>{r.style[i]=s[i]}),r.width=r.width,delete r[_c],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),o={attach:gP,detach:mP,resize:vP}[r]||bP;s[r]=o(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),s=n[r];if(!s)return;({attach:fh,detach:fh,resize:fh}[r]||fP)(e,r,s),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,s){return k8(e,r,n,s)}isAttached(e){const r=e&&fg(e);return!!(r&&r.isConnected)}}function _P(t){return!hg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?cP:wP}class An{constructor(){ve(this,"x");ve(this,"y");ve(this,"active",!1);ve(this,"options");ve(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Ia(this.x)&&Ia(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const s={};return e.forEach(i=>{s[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),s}}ve(An,"defaults",{}),ve(An,"defaultRoutes");function kP(t,e){const r=t.options.ticks,n=SP(t),s=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?jP(e):[],o=i.length,a=i[0],c=i[o-1],u=[];if(o>s)return EP(e,u,i,o/s),u;const d=CP(i,e,s);if(o>0){let f,h;const p=o>1?Math.round((c-a)/(o-1)):null;for(ql(e,u,d,Be(p)?0:a-p,a),f=0,h=o-1;f<h;f++)ql(e,u,d,i[f],i[f+1]);return ql(e,u,d,c,Be(p)?e.length:c+p),u}return ql(e,u,d),u}function SP(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),s=t._maxLength/r;return Math.floor(Math.min(n,s))}function CP(t,e,r){const n=NP(t),s=e.length/r;if(!n)return Math.max(s,1);const i=wA(n);for(let o=0,a=i.length-1;o<a;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function jP(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function EP(t,e,r,n){let s=0,i=r[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=r[s*n])}function ql(t,e,r,n,s){const i=Ae(n,0),o=Math.min(Ae(s,t.length),t.length);let a=0,c,u,d;for(r=Math.ceil(r),s&&(c=s-n,r=c/Math.floor(c/r)),d=i;d<0;)a++,d=Math.round(i+a*r);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),a++,d=Math.round(i+a*r))}function NP(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const AP=t=>t==="left"?"right":t==="right"?"left":t,ly=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,cy=(t,e)=>Math.min(e||t,t);function uy(t,e){const r=[],n=t.length/e,s=t.length;let i=0;for(;i<s;i+=n)r.push(t[Math.floor(i)]);return r}function PP(t,e,r){const n=t.ticks.length,s=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(s),u;if(!(r&&(n===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<i-a||c>o+a)))return c}function DP(t,e){Re(t,r=>{const n=r.gc,s=n.length/2;let i;if(s>e){for(i=0;i<s;++i)delete r.data[n[i]];n.splice(0,s)}})}function Do(t){return t.drawTicks?t.tickLength:0}function dy(t,e){if(!t.display)return 0;const r=vt(t.font,e),n=It(t.padding);return(Xe(t.text)?t.text.length:1)*r.lineHeight+n.height}function TP(t,e){return ms(t,{scale:e,type:"scale"})}function OP(t,e,r){return ms(t,{tick:r,index:e,type:"tick"})}function IP(t,e,r){let n=og(t);return(r&&e!=="right"||!r&&e==="right")&&(n=AP(n)),n}function FP(t,e,r,n){const{top:s,left:i,bottom:o,right:a,chart:c}=t,{chartArea:u,scales:d}=c;let f=0,h,p,x;const g=o-s,v=a-i;if(t.isHorizontal()){if(p=Dt(n,i,a),Te(r)){const y=Object.keys(r)[0],m=r[y];x=d[y].getPixelForValue(m)+g-e}else r==="center"?x=(u.bottom+u.top)/2+g-e:x=ly(t,r,e);h=a-i}else{if(Te(r)){const y=Object.keys(r)[0],m=r[y];p=d[y].getPixelForValue(m)-v+e}else r==="center"?p=(u.left+u.right)/2-v+e:p=ly(t,r,e);x=Dt(n,o,s),f=r==="left"?-lr:lr}return{titleX:p,titleY:x,maxWidth:h,rotation:f}}class ni extends An{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:s}=this;return e=rr(e,Number.POSITIVE_INFINITY),r=rr(r,Number.NEGATIVE_INFINITY),n=rr(n,Number.POSITIVE_INFINITY),s=rr(s,Number.NEGATIVE_INFINITY),{min:rr(e,n),max:rr(r,s),minDefined:it(e),maxDefined:it(r)}}getMinMax(e){let{min:r,max:n,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:r,max:n};const a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)o=a[c].controller.getMinMax(this,e),s||(r=Math.min(r,o.min)),i||(n=Math.max(n,o.max));return r=i&&r>n?n:r,n=s&&r>n?r:n,{min:rr(r,rr(n,r)),max:rr(n,rr(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=t8(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?uy(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ve(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,s,i;for(n=0,s=e.length;n<s;n++)i=e[n],i.label=Ve(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=cy(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,i=r.maxRotation;let o=s,a,c,u;if(!this._isVisible()||!r.display||s>=i||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,p=_r(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/n:p/(n-1),f+6>a&&(a=p/(n-(e.offset?.5:1)),c=this.maxHeight-Do(e.grid)-r.padding-dy(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=sg(Math.min(Math.asin(_r((d.highest.height+6)/a,-1,1)),Math.asin(_r(c/u,-1,1))-Math.asin(_r(h/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=dy(s,r.options.font);if(a?(e.width=this.maxWidth,e.height=Do(i)+c):(e.height=this.maxHeight,e.width=Do(i)+c),n.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),p=n.padding*2,x=Zn(this.labelRotation),g=Math.cos(x),v=Math.sin(x);if(a){const y=n.mirror?0:v*f.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=n.mirror?0:g*f.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(u,d,v,g)}}this._handleMargins(),a?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,s){const{ticks:{align:i,padding:o},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;c?u?(h=s*e.width,p=n*r.height):(h=n*e.height,p=s*r.width):i==="start"?p=r.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,p=r.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let d=r.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=r.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Be(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=uy(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],c=Math.floor(r/cy(r,n));let u=0,d=0,f,h,p,x,g,v,y,m,b,k,C;for(f=0;f<r;f+=c){if(x=e[f].label,g=this._resolveTickFontOptions(f),s.font=v=g.string,y=i[v]=i[v]||{data:{},gc:[]},m=g.lineHeight,b=k=0,!Be(x)&&!Xe(x))b=cu(s,y.data,y.gc,b,x),k=m;else if(Xe(x))for(h=0,p=x.length;h<p;++h)C=x[h],!Be(C)&&!Xe(C)&&(b=cu(s,y.data,y.gc,b,C),k+=m);o.push(b),a.push(k),u=Math.max(b,u),d=Math.max(k,d)}DP(i,r);const E=o.indexOf(u),j=a.indexOf(d),w=_=>({width:o[_]||0,height:a[_]||0});return{first:w(0),last:w(r-1),widest:w(E),highest:w(j),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return jA(this._alignToPixels?ks(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=OP(this.getContext(),e,n))}return this.$context||(this.$context=TP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Zn(this.labelRotation),n=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>a*s?a/n:c/s:c*s<a*n?c/n:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,s=this.options,{grid:i,position:o,border:a}=s,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Do(i),p=[],x=a.setContext(this.getContext()),g=x.display?x.width:0,v=g/2,y=function(G){return ks(n,G,g)};let m,b,k,C,E,j,w,_,S,A,N,F;if(o==="top")m=y(this.bottom),j=this.bottom-h,_=m-v,A=y(e.top)+v,F=e.bottom;else if(o==="bottom")m=y(this.top),A=e.top,F=y(e.bottom)-v,j=m+v,_=this.top+h;else if(o==="left")m=y(this.right),E=this.right-h,w=m-v,S=y(e.left)+v,N=e.right;else if(o==="right")m=y(this.left),S=e.left,N=y(e.right)-v,E=m+v,w=this.left+h;else if(r==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(Te(o)){const G=Object.keys(o)[0],W=o[G];m=y(this.chart.scales[G].getPixelForValue(W))}A=e.top,F=e.bottom,j=m+v,_=j+h}else if(r==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(Te(o)){const G=Object.keys(o)[0],W=o[G];m=y(this.chart.scales[G].getPixelForValue(W))}E=m-v,w=E-h,S=e.left,N=e.right}const M=Ae(s.ticks.maxTicksLimit,f),K=Math.max(1,Math.ceil(f/M));for(b=0;b<f;b+=K){const G=this.getContext(b),W=i.setContext(G),z=a.setContext(G),$=W.lineWidth,R=W.color,O=z.dash||[],I=z.dashOffset,D=W.tickWidth,B=W.tickColor,X=W.tickBorderDash||[],J=W.tickBorderDashOffset;k=PP(this,b,c),k!==void 0&&(C=ks(n,k,$),u?E=w=S=N=C:j=_=A=F=C,p.push({tx1:E,ty1:j,tx2:w,ty2:_,x1:S,y1:A,x2:N,y2:F,width:$,color:R,borderDash:O,borderDashOffset:I,tickWidth:D,tickColor:B,tickBorderDash:X,tickBorderDashOffset:J}))}return this._ticksLength=f,this._borderValue=m,p}_computeLabelItems(e){const r=this.axis,n=this.options,{position:s,ticks:i}=n,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=i,h=Do(n.grid),p=h+d,x=f?-d:p,g=-Zn(this.labelRotation),v=[];let y,m,b,k,C,E,j,w,_,S,A,N,F="middle";if(s==="top")E=this.bottom-x,j=this._getXAxisLabelAlignment();else if(s==="bottom")E=this.top+x,j=this._getXAxisLabelAlignment();else if(s==="left"){const K=this._getYAxisLabelAlignment(h);j=K.textAlign,C=K.x}else if(s==="right"){const K=this._getYAxisLabelAlignment(h);j=K.textAlign,C=K.x}else if(r==="x"){if(s==="center")E=(e.top+e.bottom)/2+p;else if(Te(s)){const K=Object.keys(s)[0],G=s[K];E=this.chart.scales[K].getPixelForValue(G)+p}j=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")C=(e.left+e.right)/2-p;else if(Te(s)){const K=Object.keys(s)[0],G=s[K];C=this.chart.scales[K].getPixelForValue(G)}j=this._getYAxisLabelAlignment(h).textAlign}r==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const M=this._getLabelSizes();for(y=0,m=a.length;y<m;++y){b=a[y],k=b.label;const K=i.setContext(this.getContext(y));w=this.getPixelForTick(y)+i.labelOffset,_=this._resolveTickFontOptions(y),S=_.lineHeight,A=Xe(k)?k.length:1;const G=A/2,W=K.color,z=K.textStrokeColor,$=K.textStrokeWidth;let R=j;o?(C=w,j==="inner"&&(y===m-1?R=this.options.reverse?"left":"right":y===0?R=this.options.reverse?"right":"left":R="center"),s==="top"?u==="near"||g!==0?N=-A*S+S/2:u==="center"?N=-M.highest.height/2-G*S+S:N=-M.highest.height+S/2:u==="near"||g!==0?N=S/2:u==="center"?N=M.highest.height/2-G*S:N=M.highest.height-A*S,f&&(N*=-1),g!==0&&!K.showLabelBackdrop&&(C+=S/2*Math.sin(g))):(E=w,N=(1-A)*S/2);let O;if(K.showLabelBackdrop){const I=It(K.backdropPadding),D=M.heights[y],B=M.widths[y];let X=N-I.top,J=0-I.left;switch(F){case"middle":X-=D/2;break;case"bottom":X-=D;break}switch(j){case"center":J-=B/2;break;case"right":J-=B;break;case"inner":y===m-1?J-=B:y>0&&(J-=B/2);break}O={left:J,top:X,width:B+I.width,height:D+I.height,color:K.backdropColor}}v.push({label:k,font:_,textOffset:N,options:{rotation:g,color:W,strokeColor:z,strokeWidth:$,textAlign:R,textBaseline:F,translation:[C,E],backdrop:O}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Zn(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,c=o.widest.width;let u,d;return r==="left"?s?(d=this.right+i,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-a,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d=this.left)):r==="right"?s?(d=this.left+i,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+a,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:s,width:i,height:o}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,s,i,o),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(c,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(i=0,o=s.length;i<o;++i){const c=s[i];r.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:s}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=ks(e,this.left,o)-o/2,d=ks(e,this.right,a)+a/2,f=h=c):(f=ks(e,this.top,o)-o/2,h=ks(e,this.bottom,a)+a/2,u=d=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(u,f),r.lineTo(d,h),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Hu(n,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,c=o.font,u=o.label,d=o.textOffset;ei(n,u,0,d,c,a)}s&&Wu(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:s}}=this;if(!n.display)return;const i=vt(n.font),o=It(n.padding),a=n.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||Te(r)?(c+=o.bottom,Xe(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=FP(this,c,r,a);ei(e,n.text,0,0,i,{color:n.color,maxWidth:f,rotation:h,textAlign:IP(a,r,s),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Ae(e.grid&&e.grid.z,-1),s=Ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ni.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let i,o;for(i=0,o=r.length;i<o;++i){const a=r[i];a[n]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return vt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Kl{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;LP(r)&&(n=this.register(r));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,RP(e,o,n),this.override&&ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,s=this.scope;n in r&&delete r[n],s&&n in ot[s]&&(delete ot[s][n],this.override&&delete Zs[n])}}function RP(t,e,r){const n=Oa(Object.create(null),[r?ot.get(r):{},ot.get(e),t.defaults]);ot.set(e,n),t.defaultRoutes&&BP(e,t.defaultRoutes),t.descriptors&&ot.describe(e,t.descriptors)}function BP(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),s=n.pop(),i=[t].concat(n).join("."),o=e[r].split("."),a=o.pop(),c=o.join(".");ot.route(i,s,c,a)})}function LP(t){return"id"in t&&"defaults"in t}class MP{constructor(){this.controllers=new Kl(ia,"datasets",!0),this.elements=new Kl(An,"elements"),this.plugins=new Kl(Object,"plugins"),this.scales=new Kl(ni,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(s=>{const i=n||this._getRegistryForType(s);n||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Re(s,o=>{const a=n||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,r,n){const s=ng(e);Ve(n["before"+s],[],n),r[e](n),Ve(n["after"+s],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var Gr=new MP;class $P{constructor(){this._init=[]}notify(e,r,n,s){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,r,n,s){s=s||{};for(const i of e){const o=i.plugin,a=o[n],c=[r,s,i.options];if(Ve(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,s=Ae(n.options&&n.options.plugins,{}),i=zP(n);return s===!1&&!r?[]:VP(e,i,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,s=(i,o)=>i.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(r,n),e,"stop"),this._notify(s(n,r),e,"start")}}function zP(t){const e={},r=[],n=Object.keys(Gr.plugins.items);for(let i=0;i<n.length;i++)r.push(Gr.getPlugin(n[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];r.indexOf(o)===-1&&(r.push(o),e[o.id]=!0)}return{plugins:r,localIds:e}}function UP(t,e){return!e&&t===!1?null:t===!0?{}:t}function VP(t,{plugins:e,localIds:r},n,s){const i=[],o=t.getContext();for(const a of e){const c=a.id,u=UP(n[c],s);u!==null&&i.push({plugin:a,options:HP(t.config,{plugin:a,local:r[c]},u,o)})}return i}function HP(t,{plugin:e,local:r},n,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return r&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cf(t,e){const r=ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function WP(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function qP(t,e){return t===e?"_index_":"_value_"}function hy(t){if(t==="x"||t==="y"||t==="r")return t}function KP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function jf(t,...e){if(hy(t))return t;for(const r of e){const n=r.axis||KP(r.position)||t.length>1&&hy(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function fy(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function GP(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return fy(t,"x",r[0])||fy(t,"y",r[0])}return{}}function YP(t,e){const r=Zs[t.type]||{scales:{}},n=e.scales||{},s=Cf(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!Te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=jf(o,a,GP(o,t),ot.scales[a.type]),u=qP(c,s),d=r.scales||{};i[o]=ta(Object.create(null),[{axis:c},a,d[c],d[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||Cf(a,e),d=(Zs[a]||{}).scales||{};Object.keys(d).forEach(f=>{const h=WP(f,c),p=o[h+"AxisID"]||h;i[p]=i[p]||Object.create(null),ta(i[p],[{axis:h},n[p],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];ta(a,[ot.scales[a.type],ot.scale])}),i}function J_(t){const e=t.options||(t.options={});e.plugins=Ae(e.plugins,{}),e.scales=YP(t,e)}function X_(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function JP(t){return t=t||{},t.data=X_(t.data),J_(t),t}const py=new Map,Q_=new Set;function Gl(t,e){let r=py.get(t);return r||(r=e(),py.set(t,r),Q_.add(r)),r}const To=(t,e,r)=>{const n=ou(e,r);n!==void 0&&t.add(n)};class XP{constructor(e){this._config=JP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=X_(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),J_(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Gl(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Gl(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Gl(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let s=n.get(e);return(!s||r)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,r,n){const{options:s,type:i}=this,o=this._cachedScopes(e,n),a=o.get(r);if(a)return a;const c=new Set;r.forEach(d=>{e&&(c.add(e),d.forEach(f=>To(c,e,f))),d.forEach(f=>To(c,s,f)),d.forEach(f=>To(c,Zs[i]||{},f)),d.forEach(f=>To(c,ot,f)),d.forEach(f=>To(c,kf,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Q_.has(r)&&o.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Zs[r]||{},ot.datasets[r]||{},{type:r},ot,kf]}resolveNamedOptions(e,r,n,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=gy(this._resolverCache,e,s);let c=o;if(ZP(o,r)){i.$shared=!1,n=hs(n)?n():n;const u=this.createResolver(e,n,a);c=to(o,n,u)}for(const u of r)i[u]=c[u];return i}createResolver(e,r,n=[""],s){const{resolver:i}=gy(this._resolverCache,e,n);return Te(r)?to(i,r,void 0,s):i}}function gy(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=r.join();let i=n.get(s);return i||(i={resolver:cg(e,r),subPrefixes:r.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,i)),i}const QP=t=>Te(t)&&Object.getOwnPropertyNames(t).some(e=>hs(t[e]));function ZP(t,e){const{isScriptable:r,isIndexable:n}=T_(t);for(const s of e){const i=r(s),o=n(s),a=(o||i)&&t[s];if(i&&(hs(a)||QP(a))||o&&Xe(a))return!0}return!1}var e6="4.5.0";const t6=["top","bottom","left","right","chartArea"];function my(t,e){return t==="top"||t==="bottom"||t6.indexOf(t)===-1&&e==="x"}function xy(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function yy(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Ve(r&&r.onComplete,[t],e)}function r6(t){const e=t.chart,r=e.options.animation;Ve(r&&r.onProgress,[t],e)}function Z_(t){return hg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const kc={},vy=t=>{const e=Z_(t);return Object.values(kc).filter(r=>r.canvas===e).pop()};function n6(t,e,r){const n=Object.keys(t);for(const s of n){const i=+s;if(i>=e){const o=t[s];delete t[s],(r>0||i>e)&&(t[i+r]=o)}}}function s6(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}var Bn;let si=(Bn=class{static register(...e){Gr.add(...e),by()}static unregister(...e){Gr.remove(...e),by()}constructor(e,r){const n=this.config=new XP(r),s=Z_(e),i=vy(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||_P(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,u=c&&c.height,d=c&&c.width;if(this.id=hA(),this.ctx=a,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $P,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DA(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],kc[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}cn.listen(this,"complete",yy),cn.listen(this,"progress",r6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:s,_aspectRatio:i}=this;return Be(e)?r&&i?i:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Gr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ux(this.canvas,this.ctx),this}stop(){return cn.stop(this),this}resize(e,r){cn.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,s=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,r,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Wx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ve(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Re(r,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,s=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const a=r[o],c=jf(o,a),u=c==="r",d=c==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Re(i,o=>{const a=o.options,c=a.id,u=jf(c,a),d=Ae(a.type,o.dtype);(a.position===void 0||my(a.position,u)!==my(o.dposition))&&(a.position=o.dposition),s[c]=!0;let f=null;if(c in n&&n[c].type===d)f=n[c];else{const h=Gr.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(a,e)}),Re(s,(o,a)=>{o||delete n[a]}),Re(n,o=>{kr.configure(this,o,o.options),kr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((s,i)=>s.index-i.index),n>r){for(let s=r;s<n;++s)this._destroyDatasetMeta(s);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(xy("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,s)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=r.length;n<s;n++){const i=r[n];let o=this.getDatasetMeta(n);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=i.indexAxis||Cf(a,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Gr.getController(a),{datasetElementType:u,dataElementType:d}=ot.datasets[a];Object.assign(c,{dataElementType:Gr.getElement(d),datasetElementType:u&&Gr.getElement(u)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Re(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||Re(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xy("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Re(this.scales,e=>{kr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Ox(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:i}of r){const o=n==="_removeElements"?-i:i;n6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=n(0);for(let i=1;i<r;i++)if(!Ox(s,n(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;kr.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Re(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,hs(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cn.has(this)?this.attached&&!cn.running(this)&&cn.start(this):(this.draw(),yy({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let s,i;for(s=0,i=r.length;s<i;++s){const o=r[s];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=U_(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&Hu(r,s),e.controller.draw(),s&&Wu(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return wn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,s){const i=tP.modes[r];return typeof i=="function"?i(this,e,n,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let s=n.filter(i=>i&&i._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=ms(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const s=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);au(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),cn.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ux(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete kc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,o)=>{r.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Re(this.options.events,i=>n(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(c,u)=>{r.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(r.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),n("attach",a)},r.isAttached(this.canvas)?a():o()}unbindEvents(){Re(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Re(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const s=n?"set":"remove";let i,o,a,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!su(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(r,e),a=n?e:i(e,r);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:s=[],options:i}=this,o=r,a=this._getActiveElements(e,s,n,o),c=yA(e),u=s6(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Ve(i.onHover,[e,a,this],this),c&&Ve(i.onClick,[e,a,this],this));const d=!su(a,s);return(d||r)&&(this._active=a,this._updateHoverStyles(a,s,r)),this._lastEvent=u,d}_getActiveElements(e,r,n,s){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},ve(Bn,"defaults",ot),ve(Bn,"instances",kc),ve(Bn,"overrides",Zs),ve(Bn,"registry",Gr),ve(Bn,"version",e6),ve(Bn,"getChart",vy),Bn);function by(){return Re(si.instances,t=>t._plugins.invalidate())}function e2(t,e,r=e){t.lineCap=Ae(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Ae(r.borderDash,e.borderDash)),t.lineDashOffset=Ae(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Ae(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ae(r.borderWidth,e.borderWidth),t.strokeStyle=Ae(r.borderColor,e.borderColor)}function i6(t,e,r){t.lineTo(r.x,r.y)}function o6(t){return t.stepped?WA:t.tension||t.cubicInterpolationMode==="monotone"?qA:i6}function t2(t,e,r={}){const n=t.length,{start:s=0,end:i=n-1}=r,{start:o,end:a}=e,c=Math.max(s,o),u=Math.min(i,a),d=s<o&&i<o||s>a&&i>a;return{count:n,start:c,loop:e.loop,ilen:u<c&&!d?n+u-c:u-c}}function a6(t,e,r,n){const{points:s,options:i}=e,{count:o,start:a,loop:c,ilen:u}=t2(s,r,n),d=o6(i);let{move:f=!0,reverse:h}=n||{},p,x,g;for(p=0;p<=u;++p)x=s[(a+(h?u-p:p))%o],!x.skip&&(f?(t.moveTo(x.x,x.y),f=!1):d(t,g,x,h,i.stepped),g=x);return c&&(x=s[(a+(h?u:0))%o],d(t,g,x,h,i.stepped)),!!c}function l6(t,e,r,n){const s=e.points,{count:i,start:o,ilen:a}=t2(s,r,n),{move:c=!0,reverse:u}=n||{};let d=0,f=0,h,p,x,g,v,y;const m=k=>(o+(u?a-k:k))%i,b=()=>{g!==v&&(t.lineTo(d,v),t.lineTo(d,g),t.lineTo(d,y))};for(c&&(p=s[m(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=s[m(h)],p.skip)continue;const k=p.x,C=p.y,E=k|0;E===x?(C<g?g=C:C>v&&(v=C),d=(f*d+k)/++f):(b(),t.lineTo(k,C),x=E,f=0,g=v=C),y=C}b()}function Ef(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?l6:a6}function c6(t){return t.stepped?C8:t.tension||t.cubicInterpolationMode==="monotone"?j8:Os}function u6(t,e,r,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,n)&&s.closePath()),e2(t,e.options),t.stroke(s)}function d6(t,e,r,n){const{segments:s,options:i}=e,o=Ef(e);for(const a of s)e2(t,i,a.style),t.beginPath(),o(t,e,a,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const h6=typeof Path2D=="function";function f6(t,e,r,n){h6&&!e.options.segment?u6(t,e,r,n):d6(t,e,r,n)}class $r extends An{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;x8(this._points,n,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=T8(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,s=e[r],i=this.points,o=z_(this,{property:r,start:s,end:s});if(!o.length)return;const a=[],c=c6(n);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],p=i[f],x=i[h];if(p===x){a.push(p);continue}const g=Math.abs((s-p[r])/(x[r]-p[r])),v=c(p,x,g,n.stepped);v[r]=e[r],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,r,n){return Ef(this)(e,this,r,n)}path(e,r,n){const s=this.segments,i=Ef(this);let o=this._loop;r=r||0,n=n||this.points.length-r;for(const a of s)o&=i(e,this,a,{start:r,end:r+n-1});return!!o}draw(e,r,n,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),f6(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ve($r,"id","line"),ve($r,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ve($r,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ve($r,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function wy(t,e,r,n){const s=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<s.radius+s.hitRadius}class qs extends An{constructor(r){super();ve(this,"parsed");ve(this,"skip");ve(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(r-o,2)+Math.pow(n-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return wy(this,r,"x",n)}inYRange(r,n){return wy(this,r,"y",n)}getCenterPoint(r){const{x:n,y:s}=this.getProps(["x","y"],r);return{x:n,y:s}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const s=n&&r.borderWidth||0;return(n+s)*2}draw(r,n){const s=this.options;this.skip||s.radius<.1||!wn(this,n,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,Sf(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ve(qs,"id","point"),ve(qs,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ve(qs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function p6(t,e,r){const n=t.segments,s=t.points,i=e.points,o=[];for(const a of n){let{start:c,end:u}=a;u=Ku(c,u,s);const d=Nf(r,s[c],s[u],a.loop);if(!e.segments){o.push({source:a,target:d,start:s[c],end:s[u]});continue}const f=z_(e,d);for(const h of f){const p=Nf(r,i[h.start],i[h.end],h.loop),x=$_(a,s,p);for(const g of x)o.push({source:g,target:h,start:{[r]:_y(d,p,"start",Math.max)},end:{[r]:_y(d,p,"end",Math.min)}})}}return o}function Nf(t,e,r,n){if(n)return;let s=e[t],i=r[t];return t==="angle"&&(s=ir(s),i=ir(i)),{property:t,start:s,end:i}}function g6(t,e){const{x:r=null,y:n=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Ku(o,a,s);const c=s[o],u=s[a];n!==null?(i.push({x:c.x,y:n}),i.push({x:u.x,y:n})):r!==null&&(i.push({x:r,y:c.y}),i.push({x:r,y:u.y}))}),i}function Ku(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function _y(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function r2(t,e){let r=[],n=!1;return Xe(t)?(n=!0,r=t):r=g6(t,e),r.length?new $r({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function ky(t){return t&&t.fill!==!1}function m6(t,e,r){let s=t[e].fill;const i=[e];let o;if(!r)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!it(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function x6(t,e,r){const n=w6(t);if(Te(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return it(s)&&Math.floor(s)===s?y6(n[0],e,s,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function y6(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function v6(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Te(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function b6(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Te(t)?n=t.value:n=e.getBaseValue(),n}function w6(t){const e=t.options,r=e.fill;let n=Ae(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function _6(t){const{scale:e,index:r,line:n}=t,s=[],i=n.segments,o=n.points,a=k6(e,r);a.push(r2({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)S6(s,o[d],a)}return new $r({points:s,options:{}})}function k6(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const i=n[s];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function S6(t,e,r){const n=[];for(let s=0;s<r.length;s++){const i=r[s],{first:o,last:a,point:c}=C6(i,e,"x");if(!(!c||o&&a)){if(o)n.unshift(c);else if(t.push(c),!a)break}}t.push(...n)}function C6(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const s=n[r],i=t.segments,o=t.points;let a=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],f=o[d.start][r],h=o[d.end][r];if(Ii(s,f,h)){a=s===f,c=s===h;break}}return{first:a,last:c,point:n}}class n2{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:s,y:i,radius:o}=this;return r=r||{start:0,end:ur},e.arc(s,i,o,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:s}=this,i=e.angle;return{x:r+Math.cos(i)*s,y:n+Math.sin(i)*s,angle:i}}}function j6(t){const{chart:e,fill:r,line:n}=t;if(it(r))return E6(e,r);if(r==="stack")return _6(t);if(r==="shape")return!0;const s=N6(t);return s instanceof n2?s:r2(s,n)}function E6(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function N6(t){return(t.scale||{}).getPointPositionForValue?P6(t):A6(t)}function A6(t){const{scale:e={},fill:r}=t,n=v6(r,e);if(it(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function P6(t){const{scale:e,fill:r}=t,n=e.options,s=e.getLabels().length,i=n.reverse?e.max:e.min,o=b6(r,e,i),a=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new n2({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)a.push(e.getPointPositionForValue(c,o));return a}function ph(t,e,r){const n=j6(e),{chart:s,index:i,line:o,scale:a,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:h=f,below:p=f}=d||{},x=s.getDatasetMeta(i),g=U_(s,x);n&&o.points.length&&(Hu(t,r),D6(t,{line:o,target:n,above:h,below:p,area:r,scale:a,axis:c,clip:g}),Wu(t))}function D6(t,e){const{line:r,target:n,above:s,below:i,area:o,scale:a,clip:c}=e,u=r._loop?"angle":e.axis;t.save();let d=i;i!==s&&(u==="x"?(Sy(t,n,o.top),gh(t,{line:r,target:n,color:s,scale:a,property:u,clip:c}),t.restore(),t.save(),Sy(t,n,o.bottom)):u==="y"&&(Cy(t,n,o.left),gh(t,{line:r,target:n,color:i,scale:a,property:u,clip:c}),t.restore(),t.save(),Cy(t,n,o.right),d=s)),gh(t,{line:r,target:n,color:d,scale:a,property:u,clip:c}),t.restore()}function Sy(t,e,r){const{segments:n,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of n){const{start:c,end:u}=a,d=s[c],f=s[Ku(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,r),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function Cy(t,e,r){const{segments:n,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of n){const{start:c,end:u}=a,d=s[c],f=s[Ku(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(r,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(r,f.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function gh(t,e){const{line:r,target:n,property:s,color:i,scale:o,clip:a}=e,c=p6(r,n,s);for(const{source:u,target:d,start:f,end:h}of c){const{style:{backgroundColor:p=i}={}}=u,x=n!==!0;t.save(),t.fillStyle=p,T6(t,o,a,x&&Nf(s,f,h)),t.beginPath();const g=!!r.pathSegment(t,u);let v;if(x){g?t.closePath():jy(t,n,h,s);const y=!!n.pathSegment(t,d,{move:g,reverse:!0});v=g&&y,v||jy(t,n,f,s)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function T6(t,e,r,n){const s=e.chart.chartArea,{property:i,start:o,end:a}=n||{};if(i==="x"||i==="y"){let c,u,d,f;i==="x"?(c=o,u=s.top,d=a,f=s.bottom):(c=s.left,u=o,d=s.right,f=a),t.beginPath(),r&&(c=Math.max(c,r.left),d=Math.min(d,r.right),u=Math.max(u,r.top),f=Math.min(f,r.bottom)),t.rect(c,u,d-c,f-u),t.clip()}}function jy(t,e,r,n){const s=e.interpolate(r,n);s&&t.lineTo(s.x,s.y)}var Gu={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,s=[];let i,o,a,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),a=i.dataset,c=null,a&&a.options&&a instanceof $r&&(c={visible:t.isDatasetVisible(o),index:o,fill:x6(a,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=c,s.push(c);for(o=0;o<n;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=m6(s,o,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),n&&a.fill&&ph(t.ctx,a,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const i=n[s].$filler;ky(i)&&ph(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!ky(n)||r.drawTime!=="beforeDatasetDraw"||ph(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ey=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},O6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ny extends An{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Ve(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=vt(n.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Ey(n,i);let u,d;r.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,a,c)+10):(d=this.maxHeight,u=this._fitCols(o,s,a,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let h=-1,p=-d;return this.legendItems.forEach((x,g)=>{const v=n+r/2+i.measureText(x.text).width;(g===0||u[u.length-1]+v+2*a>o)&&(f+=d,u[u.length-(g>0?0:1)]=0,p+=d,h++),c[g]={left:0,top:p,row:h,width:v,height:s},u[u.length-1]+=v+a}),f}_fitCols(e,r,n,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let f=a,h=0,p=0,x=0,g=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:m,itemHeight:b}=I6(n,r,i,v,s);y>0&&p+b+2*a>d&&(f+=h+a,u.push({width:h,height:p}),x+=h+a,g++,h=p=0),c[y]={left:x,top:p,col:g,width:m,height:b},h=Math.max(h,m),p+=b+a}),f+=h,u.push({width:h,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:s},rtl:i}}=this,o=Vi(i,this.left,this.width);if(this.isHorizontal()){let a=0,c=Dt(n,this.left+s,this.right-this.lineWidths[a]);for(const u of r)a!==u.row&&(a=u.row,c=Dt(n,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let a=0,c=Dt(n,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of r)u.col!==a&&(a=u.col,c=Dt(n,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hu(e,this),this._draw(),Wu(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:s}=this,{align:i,labels:o}=e,a=ot.color,c=Vi(e.rtl,this.left,this.width),u=vt(o.font),{padding:d}=o,f=u.size,h=f/2;let p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:x,boxHeight:g,itemHeight:v}=Ey(o,f),y=function(E,j,w){if(isNaN(x)||x<=0||isNaN(g)||g<0)return;s.save();const _=Ae(w.lineWidth,1);if(s.fillStyle=Ae(w.fillStyle,a),s.lineCap=Ae(w.lineCap,"butt"),s.lineDashOffset=Ae(w.lineDashOffset,0),s.lineJoin=Ae(w.lineJoin,"miter"),s.lineWidth=_,s.strokeStyle=Ae(w.strokeStyle,a),s.setLineDash(Ae(w.lineDash,[])),o.usePointStyle){const S={radius:g*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:_},A=c.xPlus(E,x/2),N=j+h;P_(s,S,A,N,o.pointStyleWidth&&x)}else{const S=j+Math.max((f-g)/2,0),A=c.leftForLtr(E,x),N=Ui(w.borderRadius);s.beginPath(),Object.values(N).some(F=>F!==0)?uu(s,{x:A,y:S,w:x,h:g,radius:N}):s.rect(A,S,x,g),s.fill(),_!==0&&s.stroke()}s.restore()},m=function(E,j,w){ei(s,w.text,E,j+v/2,u,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},b=this.isHorizontal(),k=this._computeTitleHeight();b?p={x:Dt(i,this.left+d,this.right-n[0]),y:this.top+d+k,line:0}:p={x:this.left+d,y:Dt(i,this.top+k+d,this.bottom-r[0].height),line:0},B_(this.ctx,e.textDirection);const C=v+d;this.legendItems.forEach((E,j)=>{s.strokeStyle=E.fontColor,s.fillStyle=E.fontColor;const w=s.measureText(E.text).width,_=c.textAlign(E.textAlign||(E.textAlign=o.textAlign)),S=x+h+w;let A=p.x,N=p.y;c.setWidth(this.width),b?j>0&&A+S+d>this.right&&(N=p.y+=C,p.line++,A=p.x=Dt(i,this.left+d,this.right-n[p.line])):j>0&&N+C>this.bottom&&(A=p.x=A+r[p.line].width+d,p.line++,N=p.y=Dt(i,this.top+k+d,this.bottom-r[p.line].height));const F=c.x(A);if(y(F,N,E),A=TA(_,A+x+h,b?A+S:this.right,e.rtl),m(c.x(A),N,E),b)p.x+=S+d;else if(typeof E.text!="string"){const M=u.lineHeight;p.y+=s2(E,M)+d}else p.y+=C}),L_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=vt(r.font),s=It(r.padding);if(!r.display)return;const i=Vi(e.rtl,this.left,this.width),o=this.ctx,a=r.position,c=n.size/2,u=s.top+c;let d,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+u,f=Dt(e.align,f,this.right-h);else{const x=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);d=u+Dt(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const p=Dt(a,f,f+h);o.textAlign=i.textAlign(og(a)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,ei(o,r.text,p,d,n)}_computeTitleHeight(){const e=this.options.title,r=vt(e.font),n=It(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,s,i;if(Ii(e,this.left,this.right)&&Ii(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(s=i[n],Ii(e,s.left,s.left+s.width)&&Ii(r,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!B6(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=O6(s,n);s&&!i&&Ve(r.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!i&&Ve(r.onHover,[e,n,this],this)}else n&&Ve(r.onClick,[e,n,this],this)}}function I6(t,e,r,n,s){const i=F6(n,t,e,r),o=R6(s,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function F6(t,e,r,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+r.size/2+n.measureText(s).width}function R6(t,e,r){let n=t;return typeof e.text!="string"&&(n=s2(e,r)),n}function s2(t,e){const r=t.text?t.text.length:0;return e*r}function B6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Yu={id:"legend",_element:Ny,start(t,e,r){const n=t.legend=new Ny({ctx:t.ctx,options:r,chart:t});kr.configure(t,n,r),kr.addBox(t,n)},stop(t){kr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;kr.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(r?0:void 0),d=It(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class i2 extends An{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=Xe(n.text)?n.text.length:1;this._padding=It(n.padding);const i=s*vt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:s,right:i,options:o}=this,a=o.align;let c=0,u,d,f;return this.isHorizontal()?(d=Dt(a,n,i),f=r+e,u=i-n):(o.position==="left"?(d=n+e,f=Dt(a,s,r),c=ft*-.5):(d=i-e,f=Dt(a,r,s),c=ft*.5),u=s-r),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=vt(r.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(i);ei(e,r.text,0,0,n,{color:r.color,maxWidth:c,rotation:u,textAlign:og(r.align),textBaseline:"middle",translation:[o,a]})}}function L6(t,e){const r=new i2({ctx:t.ctx,options:e,chart:t});kr.configure(t,r,e),kr.addBox(t,r),t.titleBlock=r}var Ju={id:"title",_element:i2,start(t,e,r){L6(t,r)},stop(t){const e=t.titleBlock;kr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;kr.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zo={average(t){if(!t.length)return!1;let e,r,n=new Set,s=0,i=0;for(e=0,r=t.length;e<r;++e){const a=t[e].element;if(a&&a.hasValue()){const c=a.tooltipPosition();n.add(c.x),s+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((a,c)=>a+c)/n.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=_f(e,u);d<s&&(s=d,a=c)}}if(a){const c=a.tooltipPosition();r=c.x,n=c.y}return{x:r,y:n}}};function qr(t,e){return e&&(Xe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function un(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function M6(t,e){const{element:r,datasetIndex:n,index:s}=e,i=t.getDatasetMeta(n).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function Ay(t,e){const r=t.chart.ctx,{body:n,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,c=vt(e.bodyFont),u=vt(e.titleFont),d=vt(e.footerFont),f=i.length,h=s.length,p=n.length,x=It(e.padding);let g=x.height,v=0,y=n.reduce((k,C)=>k+C.before.length+C.lines.length+C.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,f&&(g+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),y){const k=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=p*k+(y-p)*c.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let m=0;const b=function(k){v=Math.max(v,r.measureText(k).width+m)};return r.save(),r.font=u.string,Re(t.title,b),r.font=c.string,Re(t.beforeBody.concat(t.afterBody),b),m=e.displayColors?o+2+e.boxPadding:0,Re(n,k=>{Re(k.before,b),Re(k.lines,b),Re(k.after,b)}),m=0,r.font=d.string,Re(t.footer,b),r.restore(),v+=x.width,{width:v,height:g}}function $6(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function z6(t,e,r,n){const{x:s,width:i}=n,o=r.caretSize+r.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function U6(t,e,r,n){const{x:s,width:i}=r,{width:o,chartArea:{left:a,right:c}}=t;let u="center";return n==="center"?u=s<=(a+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),z6(u,t,e,r)&&(u="center"),u}function Py(t,e,r){const n=r.yAlign||e.yAlign||$6(t,r);return{xAlign:r.xAlign||e.xAlign||U6(t,e,r,n),yAlign:n}}function V6(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function H6(t,e,r){let{y:n,height:s}=t;return e==="top"?n+=r:e==="bottom"?n-=s+r:n-=s/2,n}function Dy(t,e,r,n){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:c}=r,u=s+i,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=Ui(o);let x=V6(e,a);const g=H6(e,c,u);return c==="center"?a==="left"?x+=u:a==="right"&&(x-=u):a==="left"?x-=Math.max(d,h)+s:a==="right"&&(x+=Math.max(f,p)+s),{x:_r(x,0,n.width-e.width),y:_r(g,0,n.height-e.height)}}function Yl(t,e,r){const n=It(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Ty(t){return qr([],un(t))}function W6(t,e,r){return ms(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Oy(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const o2={beforeTitle:an,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:an,beforeBody:an,beforeLabel:an,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Be(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:an,afterBody:an,beforeFooter:an,footer:an,afterFooter:an};function Wt(t,e,r,n){const s=t[e].call(r,n);return typeof s>"u"?o2[e].call(r,n):s}class Af extends An{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&r.options.animation&&n.animations,i=new V_(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=W6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,s=Wt(n,"beforeTitle",this,e),i=Wt(n,"title",this,e),o=Wt(n,"afterTitle",this,e);let a=[];return a=qr(a,un(s)),a=qr(a,un(i)),a=qr(a,un(o)),a}getBeforeBody(e,r){return Ty(Wt(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,s=[];return Re(e,i=>{const o={before:[],lines:[],after:[]},a=Oy(n,i);qr(o.before,un(Wt(a,"beforeLabel",this,i))),qr(o.lines,Wt(a,"label",this,i)),qr(o.after,un(Wt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,r){return Ty(Wt(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,s=Wt(n,"beforeFooter",this,e),i=Wt(n,"footer",this,e),o=Wt(n,"afterFooter",this,e);let a=[];return a=qr(a,un(s)),a=qr(a,un(i)),a=qr(a,un(o)),a}_createItems(e){const r=this._active,n=this.chart.data,s=[],i=[],o=[];let a=[],c,u;for(c=0,u=r.length;c<u;++c)a.push(M6(this.chart,r[c]));return e.filter&&(a=a.filter((d,f,h)=>e.filter(d,f,h,n))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,n))),Re(a,d=>{const f=Oy(e.callbacks,d);s.push(Wt(f,"labelColor",this,d)),i.push(Wt(f,"labelPointStyle",this,d)),o.push(Wt(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,r){const n=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=zo[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=Ay(this,n),u=Object.assign({},a,c),d=Py(this.chart,n,u),f=Dy(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,s){const i=this.getCaretPosition(e,n,s);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Ui(a),{x:h,y:p}=e,{width:x,height:g}=r;let v,y,m,b,k,C;return i==="center"?(k=p+g/2,s==="left"?(v=h,y=v-o,b=k+o,C=k-o):(v=h+x,y=v+o,b=k-o,C=k+o),m=v):(s==="left"?y=h+Math.max(c,d)+o:s==="right"?y=h+x-Math.max(u,f)-o:y=this.caretX,i==="top"?(b=p,k=b-o,v=y-o,m=y+o):(b=p+g,k=b+o,v=y+o,m=y-o),C=b),{x1:v,x2:y,x3:m,y1:b,y2:k,y3:C}}drawTitle(e,r,n){const s=this.title,i=s.length;let o,a,c;if(i){const u=Vi(n.rtl,this.x,this.width);for(e.x=Yl(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",o=vt(n.titleFont),a=n.titleSpacing,r.fillStyle=n.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(s[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,r,n,s,i){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:c,boxWidth:u}=i,d=vt(i.bodyFont),f=Yl(this,"left",i),h=s.x(f),p=c<d.lineHeight?(d.lineHeight-c)/2:0,x=r.y+p;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(h,u)+u/2,y=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Sf(e,g,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Sf(e,g,v,y)}else{e.lineWidth=Te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(h,u),v=s.leftForLtr(s.xPlus(h,1),u-2),y=Ui(o.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,uu(e,{x:g,y:x,w:u,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),uu(e,{x:v,y:x+1,w:u-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,x,u,c),e.strokeRect(g,x,u,c),e.fillStyle=o.backgroundColor,e.fillRect(v,x+1,u-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:u,boxPadding:d}=n,f=vt(n.bodyFont);let h=f.lineHeight,p=0;const x=Vi(n.rtl,this.x,this.width),g=function(w){r.fillText(w,x.x(e.x+p),e.y+h/2),e.y+=h+i},v=x.textAlign(o);let y,m,b,k,C,E,j;for(r.textAlign=o,r.textBaseline="middle",r.font=f.string,e.x=Yl(this,v,n),r.fillStyle=n.bodyColor,Re(this.beforeBody,g),p=a&&v!=="right"?o==="center"?u/2+d:u+2+d:0,k=0,E=s.length;k<E;++k){for(y=s[k],m=this.labelTextColors[k],r.fillStyle=m,Re(y.before,g),b=y.lines,a&&b.length&&(this._drawColorBox(r,e,k,x,n),h=Math.max(f.lineHeight,c)),C=0,j=b.length;C<j;++C)g(b[C]),h=f.lineHeight;Re(y.after,g)}p=0,h=f.lineHeight,Re(this.afterBody,g),e.y-=i}drawFooter(e,r,n){const s=this.footer,i=s.length;let o,a;if(i){const c=Vi(n.rtl,this.x,this.width);for(e.x=Yl(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=c.textAlign(n.footerAlign),r.textBaseline="middle",o=vt(n.footerFont),r.fillStyle=n.footerColor,r.font=o.string,a=0;a<i;++a)r.fillText(s[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,r,n,s){const{xAlign:i,yAlign:o}=this,{x:a,y:c}=e,{width:u,height:d}=n,{topLeft:f,topRight:h,bottomLeft:p,bottomRight:x}=Ui(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(a+f,c),o==="top"&&this.drawCaret(e,r,n,s),r.lineTo(a+u-h,c),r.quadraticCurveTo(a+u,c,a+u,c+h),o==="center"&&i==="right"&&this.drawCaret(e,r,n,s),r.lineTo(a+u,c+d-x),r.quadraticCurveTo(a+u,c+d,a+u-x,c+d),o==="bottom"&&this.drawCaret(e,r,n,s),r.lineTo(a+p,c+d),r.quadraticCurveTo(a,c+d,a,c+d-p),o==="center"&&i==="left"&&this.drawCaret(e,r,n,s),r.lineTo(a,c+f),r.quadraticCurveTo(a,c,a+f,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,s=n&&n.x,i=n&&n.y;if(s||i){const o=zo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ay(this,e),c=Object.assign({},o,this._size),u=Py(r,e,c),d=Dy(e,c,u,r);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=It(r.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,s,r),B_(e,r.textDirection),i.y+=o.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),L_(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,s=e.map(({datasetIndex:a,index:c})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[c],index:c}}),i=!su(n,s),o=this._positionChanged(s,r);(i||o)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,r,n),a=this._positionChanged(o,e),c=r||!su(o,i)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,n,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,r){const{caretX:n,caretY:s,options:i}=this,o=zo[i.position].call(this,e,r);return o!==!1&&(n!==o.x||s!==o.y)}}ve(Af,"positioners",zo);var Xu={id:"tooltip",_element:Af,positioners:zo,afterInit(t,e,r){r&&(t.tooltip=new Af({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:o2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const q6=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function K6(t,e,r,n){const s=t.indexOf(e);if(s===-1)return q6(t,e,r,n);const i=t.lastIndexOf(e);return s!==i?r:s}const G6=(t,e)=>t===null?null:_r(Math.round(t),0,e);function Iy(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class no extends ni{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:s,label:i}of r)n[s]===i&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Be(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:K6(n,e,Ae(r,e),this._addedLabels),G6(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,s=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=r;o++)s.push({value:o});return s}getLabelForValue(e){return Iy.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ve(no,"id","category"),ve(no,"defaults",{ticks:{callback:Iy}});function Y6(t,e){const r=[],{bounds:s,step:i,min:o,max:a,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=t,p=i||1,x=d-1,{min:g,max:v}=e,y=!Be(o),m=!Be(a),b=!Be(u),k=(v-g)/(f+1);let C=Fx((v-g)/x/p)*p,E,j,w,_;if(C<1e-14&&!y&&!m)return[{value:g},{value:v}];_=Math.ceil(v/C)-Math.floor(g/C),_>x&&(C=Fx(_*C/x/p)*p),Be(c)||(E=Math.pow(10,c),C=Math.ceil(C*E)/E),s==="ticks"?(j=Math.floor(g/C)*C,w=Math.ceil(v/C)*C):(j=g,w=v),y&&m&&i&&kA((a-o)/i,C/1e3)?(_=Math.round(Math.min((a-o)/C,d)),C=(a-o)/_,j=o,w=a):b?(j=y?o:j,w=m?a:w,_=u-1,C=(w-j)/_):(_=(w-j)/C,ra(_,Math.round(_),C/1e3)?_=Math.round(_):_=Math.ceil(_));const S=Math.max(Rx(C),Rx(j));E=Math.pow(10,Be(c)?S:c),j=Math.round(j*E)/E,w=Math.round(w*E)/E;let A=0;for(y&&(h&&j!==o?(r.push({value:o}),j<o&&A++,ra(Math.round((j+A*C)*E)/E,o,Fy(o,k,t))&&A++):j<o&&A++);A<_;++A){const N=Math.round((j+A*C)*E)/E;if(m&&N>a)break;r.push({value:N})}return m&&h&&w!==a?r.length&&ra(r[r.length-1].value,a,Fy(a,k,t))?r[r.length-1].value=a:r.push({value:a}):(!m||w===a)&&r.push({value:w}),r}function Fy(t,e,{horizontal:r,minRotation:n}){const s=Zn(n),i=(r?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class fu extends ni{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=r?s:c,a=c=>i=n?i:c;if(e){const c=eo(s),u=eo(i);c<0&&u<0?a(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);a(i+c),e||o(s-c)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=Y6(s,i);return e.bounds==="ticks"&&S_(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-r)/Math.max(e.length-1,1)/2;r-=s,n+=s}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return lg(e,this.chart.options.locale,this.options.ticks.format)}}class so extends fu{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=it(e)?e:0,this.max=it(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Zn(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ve(so,"id","linear"),ve(so,"defaults",{ticks:{callback:Vu.formatters.numeric}});const Ra=t=>Math.floor(Qn(t)),Cs=(t,e)=>Math.pow(10,Ra(t)+e);function Ry(t){return t/Math.pow(10,Ra(t))===1}function By(t,e,r){const n=Math.pow(10,r),s=Math.floor(t/n);return Math.ceil(e/n)-s}function J6(t,e){const r=e-t;let n=Ra(r);for(;By(t,e,n)>10;)n++;for(;By(t,e,n)<10;)n--;return Math.min(n,Ra(t))}function X6(t,{min:e,max:r}){e=rr(t.min,e);const n=[],s=Ra(e);let i=J6(e,r),o=i<0?Math.pow(10,Math.abs(i)):1;const a=Math.pow(10,i),c=s>i?Math.pow(10,s):0,u=Math.round((e-c)*o)/o,d=Math.floor((e-c)/a/10)*a*10;let f=Math.floor((u-d)/Math.pow(10,i)),h=rr(t.min,Math.round((c+d+f*Math.pow(10,i))*o)/o);for(;h<r;)n.push({value:h,major:Ry(h),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(i++,f=2,o=i>=0?1:o),h=Math.round((c+d+f*Math.pow(10,i))*o)/o;const p=rr(t.max,h);return n.push({value:p,major:Ry(p),significand:f}),n}class Ly extends ni{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=fu.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return it(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=it(e)?Math.max(0,e):null,this.max=it(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!it(this._userMin)&&(this.min=e===Cs(this.min,0)?Cs(this.min,-1):Cs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,s=this.max;const i=a=>n=e?n:a,o=a=>s=r?s:a;n===s&&(n<=0?(i(1),o(10)):(i(Cs(n,-1)),o(Cs(s,1)))),n<=0&&i(Cs(s,-1)),s<=0&&o(Cs(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=X6(r,this);return e.bounds==="ticks"&&S_(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":lg(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Qn(e),this._valueRange=Qn(this.max)-Qn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Qn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}ve(Ly,"id","logarithmic"),ve(Ly,"defaults",{ticks:{callback:Vu.formatters.logarithmic,major:{enabled:!0}}});function Pf(t){const e=t.ticks;if(e.display&&t.display){const r=It(e.backdropPadding);return Ae(e.font&&e.font.size,ot.font.size)+r.height}return 0}function Q6(t,e,r){return r=Xe(r)?r:[r],{w:HA(t,e.string,r),h:r.length*e.lineHeight}}function My(t,e,r,n,s){return t===n||t===s?{start:e-r/2,end:e+r/2}:t<n||t>s?{start:e-r,end:e}:{start:e,end:e+r}}function Z6(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],s=[],i=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ft/i:0;for(let c=0;c<i;c++){const u=o.setContext(t.getPointLabelContext(c));s[c]=u.padding;const d=t.getPointPosition(c,t.drawingArea+s[c],a),f=vt(u.font),h=Q6(t.ctx,f,t._pointLabels[c]);n[c]=h;const p=ir(t.getIndexAngle(c)+a),x=Math.round(sg(p)),g=My(x,d.x,h.w,0,180),v=My(x,d.y,h.h,90,270);eD(r,e,p,g,v)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=nD(t,n,s)}function eD(t,e,r,n,s){const i=Math.abs(Math.sin(r)),o=Math.abs(Math.cos(r));let a=0,c=0;n.start<e.l?(a=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function tD(t,e,r){const n=t.drawingArea,{extra:s,additionalAngle:i,padding:o,size:a}=r,c=t.getPointPosition(e,n+s+o,i),u=Math.round(sg(ir(c.angle+lr))),d=oD(c.y,a.h,u),f=sD(u),h=iD(c.x,a.w,f);return{visible:!0,x:c.x,y:d,textAlign:f,left:h,top:d,right:h+a.w,bottom:d+a.h}}function rD(t,e){if(!e)return!0;const{left:r,top:n,right:s,bottom:i}=t;return!(wn({x:r,y:n},e)||wn({x:r,y:i},e)||wn({x:s,y:n},e)||wn({x:s,y:i},e))}function nD(t,e,r){const n=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:a}=i.pointLabels,c={extra:Pf(i)/2,additionalAngle:o?ft/s:0};let u;for(let d=0;d<s;d++){c.padding=r[d],c.size=e[d];const f=tD(t,d,c);n.push(f),a==="auto"&&(f.visible=rD(f,u),f.visible&&(u=f))}return n}function sD(t){return t===0||t===180?"center":t<180?"left":"right"}function iD(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function oD(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function aD(t,e,r){const{left:n,top:s,right:i,bottom:o}=r,{backdropColor:a}=e;if(!Be(a)){const c=Ui(e.borderRadius),u=It(e.backdropPadding);t.fillStyle=a;const d=n-u.left,f=s-u.top,h=i-n+u.width,p=o-s+u.height;Object.values(c).some(x=>x!==0)?(t.beginPath(),uu(t,{x:d,y:f,w:h,h:p,radius:c}),t.fill()):t.fillRect(d,f,h,p)}}function lD(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(s));aD(r,o,i);const a=vt(o.font),{x:c,y:u,textAlign:d}=i;ei(r,t._pointLabels[s],c,u+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function a2(t,e,r,n){const{ctx:s}=t;if(r)s.arc(t.xCenter,t.yCenter,e,0,ur);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}function cD(t,e,r,n,s){const i=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!n||!a||!c||r<0||(i.save(),i.strokeStyle=a,i.lineWidth=c,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),a2(t,r,o,n),i.closePath(),i.stroke(),i.restore())}function uD(t,e,r){return ms(t,{label:r,index:e,type:"pointLabel"})}class Jl extends fu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=It(Pf(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=it(e)&&!isNaN(e)?e:0,this.max=it(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Pf(this.options))}generateTickLabels(e){fu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const s=Ve(this.options.pointLabels.callback,[r,n],this);return s||s===0?s:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?Z6(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,s){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,s))}getIndexAngle(e){const r=ur/(this._pointLabels.length||1),n=this.options.startAngle||0;return ir(e*r+Zn(n))}getDistanceFromCenterForValue(e){if(Be(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Be(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return uD(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const s=this.getIndexAngle(e)-lr+n;return{x:Math.cos(s)*r+this.xCenter,y:Math.sin(s)*r+this.yCenter,angle:s}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:s,bottom:i}=this._pointLabelItems[e];return{left:r,top:n,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),a2(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:s,border:i}=r,o=this._pointLabels.length;let a,c,u;if(r.pointLabels.display&&lD(this,o),s.display&&this.ticks.forEach((d,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const h=this.getContext(f),p=s.setContext(h),x=i.setContext(h);cD(this,p,c,o,x)}}),n.display){for(e.save(),a=o-1;a>=0;a--){const d=n.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:h}=d;!h||!f||(e.lineWidth=h,e.strokeStyle=f,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),u=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!r.reverse)return;const u=n.setContext(this.getContext(c)),d=vt(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const f=It(u.backdropPadding);e.fillRect(-o/2-f.left,-i-d.size/2-f.top,o+f.width,d.size+f.height)}ei(e,a.label,0,-i,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}ve(Jl,"id","radialLinear"),ve(Jl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Vu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ve(Jl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ve(Jl,"descriptors",{angleLines:{_fallback:"grid"}});const Qu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gt=Object.keys(Qu);function $y(t,e){return t-e}function zy(t,e){if(Be(e))return null;const r=t._adapter,{parser:n,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),it(o)||(o=typeof n=="string"?r.parse(o,n):r.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ia(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,s)),+o)}function Uy(t,e,r,n){const s=Gt.length;for(let i=Gt.indexOf(t);i<s-1;++i){const o=Qu[Gt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-e)/(a*o.size))<=n)return Gt[i]}return Gt[s-1]}function dD(t,e,r,n,s){for(let i=Gt.length-1;i>=Gt.indexOf(r);i--){const o=Gt[i];if(Qu[o].common&&t._adapter.diff(s,n,o)>=e-1)return o}return Gt[r?Gt.indexOf(r):0]}function hD(t){for(let e=Gt.indexOf(t)+1,r=Gt.length;e<r;++e)if(Qu[Gt[e]].common)return Gt[e]}function Vy(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:s}=ig(r,e),i=r[n]>=e?r[n]:r[s];t[i]=!0}}function fD(t,e,r,n){const s=t._adapter,i=+s.startOf(e[0].value,n),o=e[e.length-1].value;let a,c;for(a=i;a<=o;a=+s.add(a,1,n))c=r[a],c>=0&&(e[c].major=!0);return e}function Hy(t,e,r){const n=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,n.push({value:a,major:!1});return i===0||!r?n:fD(t,n,s,r)}class pu extends ni{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),s=this._adapter=new J8._date(e.adapters.date);s.init(r),ta(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:zy(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=it(s)&&!isNaN(s)?s:+r.startOf(Date.now(),n),i=it(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=NA(s,i,o);return this._unit=r.unit||(n.autoSkip?Uy(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):dD(this,a.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:hD(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Hy(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=_r(r,0,o),n=_r(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,s=this.options,i=s.time,o=i.unit||Uy(i.minUnit,r,n,this._getLabelCapacity(r)),a=Ae(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Ia(c)||c===!0,d={};let f=r,h,p;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(n,r,o)>1e5*a)throw new Error(r+" and "+n+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(h=f,p=0;h<n;h=+e.add(h,a,o),p++)Vy(d,h,x);return(h===n||s.bounds==="ticks"||p===1)&&Vy(d,h,x),Object.keys(d).sort($y).map(g=>+g)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,i=this._unit,o=r||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,r,n,s){const i=this.options,o=i.ticks.callback;if(o)return Ve(o,[e,r,n],this);const a=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&a[c],f=u&&a[u],h=n[r],p=u&&f&&h&&h.major;return this._adapter.format(e,s||(p?f:d))}generateTickLabels(e){let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,s=Zn(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*o,h:n*o+a*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,s=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Hy(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,n=s.length;r<n;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const s=this.getLabels();for(r=0,n=s.length;r<n;++r)e.push(zy(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PA(e.sort($y))}}ve(pu,"id","time"),ve(pu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xl(t,e,r){let n=0,s=t.length-1,i,o,a,c;r?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=Us(t,"pos",e)),{pos:i,time:a}=t[n],{pos:o,time:c}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=Us(t,"time",e)),{time:i,pos:a}=t[n],{time:o,pos:c}=t[s]);const u=o-i;return u?a+(c-a)*(e-i)/u:a}class Wy extends pu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Xl(r,this.min),this._tableRange=Xl(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,s=[],i=[];let o,a,c,u,d;for(o=0,a=e.length;o<a;++o)u=e[o],u>=r&&u<=n&&s.push(u);if(s.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],c=s[o-1],u=s[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Xl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Xl(this._table,n*this._tableRange+this._minPos,!0)}}ve(Wy,"id","timeseries"),ve(Wy,"defaults",pu.defaults);const l2="label";function qy(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function pD(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function c2(t,e){t.labels=e}function u2(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l2;const n=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[r]===s[r]);return!i||!s.data||n.includes(i)?{...s}:(n.push(i),Object.assign(i,s),i)})}function gD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l2;const r={labels:[],datasets:[]};return c2(r,t.labels),u2(r,t.datasets,e),r}function mD(t,e){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...h}=t,p=T.useRef(null),x=T.useRef(null),g=()=>{p.current&&(x.current=new si(p.current,{type:o,data:gD(a,i),options:c&&{...c},plugins:u}),qy(e,x.current))},v=()=>{qy(e,null),x.current&&(x.current.destroy(),x.current=null)};return T.useEffect(()=>{!s&&x.current&&c&&pD(x.current,c)},[s,c]),T.useEffect(()=>{!s&&x.current&&c2(x.current.config.data,a.labels)},[s,a.labels]),T.useEffect(()=>{!s&&x.current&&a.datasets&&u2(x.current.config.data,a.datasets,i)},[s,a.datasets]),T.useEffect(()=>{x.current&&(s?(v(),setTimeout(g)):x.current.update(f))},[s,c,a.labels,a.datasets,f]),T.useEffect(()=>{x.current&&(v(),setTimeout(g))},[o]),T.useEffect(()=>(g(),()=>v()),[]),Y.createElement("canvas",{ref:p,role:"img",height:r,width:n,...h},d)}const xD=T.forwardRef(mD);function yD(t,e){return si.register(e),T.forwardRef((r,n)=>Y.createElement(xD,{...r,ref:n,type:t}))}const Zu=yD("line",wc),vD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(()=>Promise.resolve().then(()=>ho),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class gg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class bD extends gg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ky extends gg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gy extends gg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Df;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Df||(Df={}));var wD=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class _D{constructor(e,{headers:r={},customFetch:n,region:s=Df.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=vD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return wD(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(g=>{throw new bD(g)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Ky(f);if(!f.ok)throw new Gy(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Gy||s instanceof Ky?s.context:void 0}}})}}var Kt={},mg={},ed={},Xa={},td={},rd={},kD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},io=kD();const SD=io.fetch,d2=io.fetch.bind(io),h2=io.Headers,CD=io.Request,jD=io.Response,ho=Object.freeze(Object.defineProperty({__proto__:null,Headers:h2,Request:CD,Response:jD,default:d2,fetch:SD},Symbol.toStringTag,{value:"Module"})),ED=Qv(ho);var nd={};Object.defineProperty(nd,"__esModule",{value:!0});let ND=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};nd.default=ND;var f2=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rd,"__esModule",{value:!0});const AD=f2(ED),PD=f2(nd);let DD=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=AD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c,u;let d=null,f=null,h=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=m:f=JSON.parse(m))}const v=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(f=[],d=null,p=200,x="OK")}catch{i.status===404&&v===""?(p=204,x="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,x="OK"),d&&this.shouldThrowOnError)throw new PD.default(d)}return{error:d,data:f,count:h,status:p,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};rd.default=DD;var TD=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(td,"__esModule",{value:!0});const OD=TD(rd);let ID=class extends OD.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};td.default=ID;var FD=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xa,"__esModule",{value:!0});const RD=FD(td);let BD=class extends RD.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Xa.default=BD;var LD=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ed,"__esModule",{value:!0});const Oo=LD(Xa);let MD=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Oo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Oo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Oo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Oo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Oo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ed.default=MD;var p2=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mg,"__esModule",{value:!0});const $D=p2(ed),zD=p2(Xa);let UD=class g2{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new $D.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new g2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(a="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new zD.default({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};mg.default=UD;var fo=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.PostgrestError=Kt.PostgrestBuilder=Kt.PostgrestTransformBuilder=Kt.PostgrestFilterBuilder=Kt.PostgrestQueryBuilder=Kt.PostgrestClient=void 0;const m2=fo(mg);Kt.PostgrestClient=m2.default;const x2=fo(ed);Kt.PostgrestQueryBuilder=x2.default;const y2=fo(Xa);Kt.PostgrestFilterBuilder=y2.default;const v2=fo(td);Kt.PostgrestTransformBuilder=v2.default;const b2=fo(rd);Kt.PostgrestBuilder=b2.default;const w2=fo(nd);Kt.PostgrestError=w2.default;var VD=Kt.default={PostgrestClient:m2.default,PostgrestQueryBuilder:x2.default,PostgrestFilterBuilder:y2.default,PostgrestTransformBuilder:v2.default,PostgrestBuilder:b2.default,PostgrestError:w2.default};const{PostgrestClient:HD,PostgrestQueryBuilder:KO,PostgrestFilterBuilder:GO,PostgrestTransformBuilder:YO,PostgrestBuilder:JO,PostgrestError:XO}=VD;class WD{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qD="2.15.5",KD=`realtime-js/${qD}`,GD="1.0.0",Tf=1e4,YD=1e3,JD=100;var oa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(oa||(oa={}));var pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pt||(pt={}));var Fr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Fr||(Fr={}));var Of;(function(t){t.websocket="websocket"})(Of||(Of={}));var Fs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fs||(Fs={}));class XD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class _2{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ue||(Ue={}));const Yy=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=QD(o,t,e,s),i),{})},QD=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?k2(i,o):If(o)},k2=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return r3(e,r)}switch(t){case Ue.bool:return ZD(e);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return e3(e);case Ue.json:case Ue.jsonb:return t3(e);case Ue.timestamp:return n3(e);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return If(e);default:return If(e)}},If=t=>t,ZD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},e3=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},t3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},r3=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>k2(e,a))}return t},n3=t=>typeof t=="string"?t.replace(" ","T"):t,S2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class mh{constructor(e,r,n={},s=Tf){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Jy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Jy||(Jy={}));class aa{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aa.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=aa.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=aa.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),p=f.map(v=>v.presence_ref),x=d.filter(v=>p.indexOf(v.presence_ref)<0),g=f.filter(v=>h.indexOf(v.presence_ref)<0);x.length>0&&(a[u]=x),g.length>0&&(c[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const f=e[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);e[a].unshift(...h)}n(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xy||(Xy={}));var la;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(la||(la={}));var fn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fn||(fn={}));class xg{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new mh(this,Fr.join,this.params,this.timeout),this.rejoinTimer=new _2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new aa(this),this.broadcastEndpointURL=S2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[la.PRESENCE]&&this.bindings[la.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(fn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(fn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){e==null||e(fn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,y=[];for(let m=0;m<v;m++){const b=g[m],{filter:{event:k,schema:C,table:E,filter:j}}=b,w=p&&p[m];if(w&&w.event===k&&w.schema===C&&w.table===E&&w.filter===j)y.push(Object.assign(Object.assign({},b),{id:w.id}));else{this.unsubscribe(),this.state=pt.errored,e==null||e(fn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(fn.SUBSCRIBED);return}}).receive("error",p=>{this.state=pt.errored,e==null||e(fn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===pt.joined&&e===la.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new mh(this,Fr.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new mh(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=Fr;if(n&&[a,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var x,g,v;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,g,v,y,m,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,C=(x=p.filter)===null||x===void 0?void 0:x.event;return k&&((g=r.ids)===null||g===void 0?void 0:g.includes(k))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:g,table:v,commit_timestamp:y,type:m,errors:b}=x;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:m,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(h,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&xg.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fr.close,{},e)}_onError(e){this._on(Fr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Yy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Yy(e.columns,e.old_record)),r}}const xh=()=>{},Ql={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s3=[1e3,2e3,5e3,1e4],i3=1e4,o3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a3{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tf,this.transport=null,this.heartbeatIntervalMs=Ql.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xh,this.ref=0,this.reconnectTimer=null,this.logger=xh,this.conn=null,this.sendBuffer=[],this.serializer=new XD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Cr(()=>Promise.resolve().then(()=>ho),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Of.websocket}`,this.httpEndpoint=S2(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:GD}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case oa.connecting:return Fs.Connecting;case oa.open:return Fs.Open;case oa.closing:return Fs.Closing;default:return Fs.Closed}}isConnected(){return this.connectionState()===Fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new xg(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(YD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ql.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([o3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:KD};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Fr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ql.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Tf,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ql.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:xh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>s3[f-1]||i3,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class l3 extends yg{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ff extends yg{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var c3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const C2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(()=>Promise.resolve().then(()=>ho),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},u3=()=>c3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cr(()=>Promise.resolve().then(()=>ho),void 0)).Response:Response}),Rf=t=>{if(Array.isArray(t))return t.map(r=>Rf(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Rf(n)}),e},d3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ii=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const yh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),h3=(t,e,r)=>ii(void 0,void 0,void 0,function*(){const n=yield u3();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new l3(yh(s),i,o))}).catch(s=>{e(new Ff(yh(s),s))}):e(new Ff(yh(t),t))}),f3=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(d3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Qa(t,e,r,n,s,i){return ii(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,f3(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>h3(c,a,n))})})}function gu(t,e,r,n){return ii(this,void 0,void 0,function*(){return Qa(t,"GET",e,r,n)})}function Yr(t,e,r,n,s){return ii(this,void 0,void 0,function*(){return Qa(t,"POST",e,n,s,r)})}function Bf(t,e,r,n,s){return ii(this,void 0,void 0,function*(){return Qa(t,"PUT",e,n,s,r)})}function p3(t,e,r,n){return ii(this,void 0,void 0,function*(){return Qa(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function j2(t,e,r,n,s){return ii(this,void 0,void 0,function*(){return Qa(t,"DELETE",e,n,s,r)})}var Bt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const g3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class m3{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=C2(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return Bt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Qy),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?Bf:Yr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Qy.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Bf(this.fetch,a.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(gt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Bt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Yr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new yg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}update(e,r,n){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Bt(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield Yr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Bt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Yr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Bt(this,void 0,void 0,function*(){try{const s=yield Yr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}download(e,r){return Bt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gu(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}info(e){return Bt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield gu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Rf(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}exists(e){return Bt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield p3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n)&&n instanceof Ff){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield j2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}list(e,r,n){return Bt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},g3),r),{prefix:e||""});return{data:yield Yr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}listV2(e,r){return Bt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Yr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const x3="2.12.1",y3={"X-Client-Info":`storage-js/${x3}`};var di=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class v3{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},y3),r),this.fetch=C2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return di(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}getBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return di(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return di(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield j2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}}class b3 extends v3{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new m3(this.url,this.headers,e,this.fetch)}}const w3="2.57.4";let Uo="";typeof Deno<"u"?Uo="deno":typeof document<"u"?Uo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Uo="react-native":Uo="node";const _3={"X-Client-Info":`supabase-js-${Uo}/${w3}`},k3={headers:_3},S3={schema:"public"},C3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j3={};var E3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const N3=t=>{let e;return t?e=t:typeof fetch>"u"?e=d2:e=fetch,(...r)=>e(...r)},A3=()=>typeof Headers>"u"?h2:Headers,P3=(t,e,r)=>{const n=N3(r),s=A3();return(i,o)=>E3(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var D3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function T3(t){return t.endsWith("/")?t:t+"/"}function O3(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>D3(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function I3(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(T3(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const E2="2.71.1",bi=30*1e3,Lf=3,vh=Lf*bi,F3="http://localhost:9999",R3="supabase.auth.token",B3={"X-Client-Info":`gotrue-js/${E2}`},Mf="X-Supabase-Api-Version",N2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},L3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M3=10*60*1e3;class vg extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $3 extends vg{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function z3(t){return _e(t)&&t.name==="AuthApiError"}class A2 extends vg{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xs extends vg{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class $n extends xs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function U3(t){return _e(t)&&t.name==="AuthSessionMissingError"}class Zl extends xs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ec extends xs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tc extends xs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V3(t){return _e(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zy extends xs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $f extends xs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function bh(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class ev extends xs{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class zf extends xs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tv=` 	
\r=`.split(""),H3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tv.length;e+=1)t[tv[e].charCodeAt(0)]=-2;for(let e=0;e<mu.length;e+=1)t[mu[e].charCodeAt(0)]=e;return t})();function rv(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(mu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(mu[n]),e.queuedBits-=6}}function P2(t,e,r){const n=H3[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nv(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{K3(o,n,r)};for(let o=0;o<t.length;o+=1)P2(t.charCodeAt(o),s,i);return e.join("")}function W3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function q3(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}W3(n,e)}}function K3(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function G3(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)P2(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Y3(t){const e=[];return q3(t,r=>e.push(r)),new Uint8Array(e)}function J3(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>rv(s,r,n)),rv(null,r,n),e.join("")}function X3(t){return Math.round(Date.now()/1e3)+t}function Q3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tr=()=>typeof window<"u"&&typeof document<"u",js={tested:!1,writable:!1},D2=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(js.tested)return js.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),js.tested=!0,js.writable=!0}catch{js.tested=!0,js.writable=!1}return js.writable};function Z3(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const T2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(()=>Promise.resolve().then(()=>ho),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},e5=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wi=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Es=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rn=async(t,e)=>{await t.removeItem(e)};class sd{constructor(){this.promise=new sd.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}sd.promiseConstructor=Promise;function wh(t){const e=t.split(".");if(e.length!==3)throw new zf("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!L3.test(e[n]))throw new zf("JWT not in base64url format");return{header:JSON.parse(nv(e[0])),payload:JSON.parse(nv(e[1])),signature:G3(e[2]),raw:{header:e[0],payload:e[1]}}}async function t5(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function r5(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function n5(t){return("0"+t.toString(16)).substr(-2)}function s5(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,n5).join("")}async function i5(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function o5(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await i5(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hi(t,e,r=!1){const n=s5();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await wi(t,`${e}-code-verifier`,s);const i=await o5(n);return[i,n===i?"plain":"s256"]}const a5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function l5(t){const e=t.headers.get(Mf);if(!e||!e.match(a5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function c5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function u5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const d5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fi(t){if(!d5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _h(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sv(t){return JSON.parse(JSON.stringify(t))}var h5=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),f5=[502,503,504];async function iv(t){var e;if(!e5(t))throw new $f(Is(t),0);if(f5.includes(t.status))throw new $f(Is(t),t.status);let r;try{r=await t.json()}catch(i){throw new A2(Is(i),i)}let n;const s=l5(t);if(s&&s.getTime()>=N2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ev(Is(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new $n}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ev(Is(r),t.status,r.weak_password.reasons);throw new $3(Is(r),t.status||500,n)}const p5=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ee(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Mf]||(i[Mf]=N2["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await g5(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function g5(t,e,r,n,s,i){const o=p5(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new $f(Is(c),0)}if(a.ok||await iv(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await iv(c)}}function dn(t){var e;let r=null;v5(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=X3(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function ov(t){const e=dn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function m5(t){return{data:t,error:null}}function x5(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=h5(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function y5(t){return t}function v5(t){return t.access_token&&t.refresh_token&&t.expires_in}const kh=["global","local","others"];var b5=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class w5{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=T2(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=kh[0]){if(kh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kh.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=b5(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:x5,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(_e(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kn})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:y5});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(_e(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){fi(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kn})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){fi(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Kn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){fi(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){fi(e.userId);try{const{data:r,error:n}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _deleteFactor(e){fi(e.userId),fi(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}}function av(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function _5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pi={debug:!!(globalThis&&D2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class O2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class k5 extends O2{}async function S5(t,e,r){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new k5(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}_5();const C5={url:F3,storageKey:R3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lv(t,e,r){return await r()}const gi={};class Ba{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ba.nextInstanceID,Ba.nextInstanceID+=1,this.instanceID>0&&Tr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},C5),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new w5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=T2(s.fetch),this.lock=s.lock||lv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Tr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=S5:this.lock=lv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:D2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=av(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=av(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=gi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=gi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${E2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Z3(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Tr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),V3(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return _e(r)?{error:r}:{error:new A2("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:dn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await hi(this.storage,this.storageKey)),i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:x},xform:dn})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:dn})}else throw new ec("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ov})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ov})}else throw new ec("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Zl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,a,c,u,d,f,h,p;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:v,wallet:y,statement:m,options:b}=e;let k;if(Tr())if(typeof y=="object")k=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))k=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const C=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const E=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),m?{statement:m}:null));let j;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")j=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)j=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${C.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const E=await k.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:v,error:y}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:J3(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:dn});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Zl}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(_e(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await Es(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:dn});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Zl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(_e(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:dn}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await hi(this.storage,this.storageKey));const{error:f}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ec("You must provide either an email or phone number.")}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:dn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await hi(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:m5})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new $n;const{error:s}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ec("You must provide either an email or phone number and a type")}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<vh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Es(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=_h()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kn}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $n}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kn})})}catch(r){if(_e(r))return U3(r)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $n;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await hi(this.storage,this.storageKey));const{data:u,error:d}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Kn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $n;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=wh(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(_e(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new $n;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Tr())throw new tc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zy("No code detected.");const{data:m,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new tc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=bi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=h-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,d);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(_e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Es(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(z3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Q3(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await hi(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Tr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(_e(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await r5(async s=>(s>0&&await t5(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&bh(i)&&Date.now()+o-n<bi})}catch(n){if(this._debug(r,"error",n),_e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Tr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Es(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await wi(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:_h()}else if(s&&!s.user&&!s.user){const o=await Es(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Rn(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,s)):s.user=_h()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<vh;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${vh}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),bh(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new $n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sd;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new $n;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),_e(i)){const o={session:null,error:i};return bh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await wi(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=sv(s);await wi(this.storage,this.storageKey,i)}else{const s=sv(r);await wi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/bi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bi}ms, refresh threshold is ${Lf} ticks`),s<=Lf&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof O2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await hi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(_e(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(_e(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wh(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+M3>s)return n;const{data:i,error:o}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=wh(n);r!=null&&r.allowExpired||c5(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=u5(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,Y3(`${a}.${c}`)))throw new zf("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}}Ba.nextInstanceID=0;const j5=Ba;class E5 extends j5{constructor(e){super(e)}}var N5=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class A5{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const a=I3(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:S3,realtime:j3,auth:Object.assign(Object.assign({},C3),{storageKey:c}),global:k3},d=O3(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=P3(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new HD(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new b3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new _D(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return N5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E5({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new a3(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Za=(t,e,r)=>new A5(t,e,r);function P5(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}P5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var I2={exports:{}};function D5(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sh={exports:{}};const T5={},O5=Object.freeze(Object.defineProperty({__proto__:null,default:T5},Symbol.toStringTag,{value:"Module"})),I5=Qv(O5);var cv;function Pe(){return cv||(cv=1,function(t,e){(function(r,n){t.exports=n()})(pe,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof pe<"u"&&pe.crypto&&(i=pe.crypto),!i&&typeof D5=="function")try{i=I5}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function m(){}return function(b){var k;return m.prototype=b,k=new m,m.prototype=null,k}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(m){var b=a(this);return m&&b.mixIn(m),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var b in m)m.hasOwnProperty(b)&&(this[b]=m[b]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=d.extend({init:function(m,b){m=this.words=m||[],b!=s?this.sigBytes=b:this.sigBytes=m.length*4},toString:function(m){return(m||p).stringify(this)},concat:function(m){var b=this.words,k=m.words,C=this.sigBytes,E=m.sigBytes;if(this.clamp(),C%4)for(var j=0;j<E;j++){var w=k[j>>>2]>>>24-j%4*8&255;b[C+j>>>2]|=w<<24-(C+j)%4*8}else for(var _=0;_<E;_+=4)b[C+_>>>2]=k[_>>>2];return this.sigBytes+=E,this},clamp:function(){var m=this.words,b=this.sigBytes;m[b>>>2]&=4294967295<<32-b%4*8,m.length=n.ceil(b/4)},clone:function(){var m=d.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var b=[],k=0;k<m;k+=4)b.push(o());return new f.init(b,m)}}),h=c.enc={},p=h.Hex={stringify:function(m){for(var b=m.words,k=m.sigBytes,C=[],E=0;E<k;E++){var j=b[E>>>2]>>>24-E%4*8&255;C.push((j>>>4).toString(16)),C.push((j&15).toString(16))}return C.join("")},parse:function(m){for(var b=m.length,k=[],C=0;C<b;C+=2)k[C>>>3]|=parseInt(m.substr(C,2),16)<<24-C%8*4;return new f.init(k,b/2)}},x=h.Latin1={stringify:function(m){for(var b=m.words,k=m.sigBytes,C=[],E=0;E<k;E++){var j=b[E>>>2]>>>24-E%4*8&255;C.push(String.fromCharCode(j))}return C.join("")},parse:function(m){for(var b=m.length,k=[],C=0;C<b;C++)k[C>>>2]|=(m.charCodeAt(C)&255)<<24-C%4*8;return new f.init(k,b)}},g=h.Utf8={stringify:function(m){try{return decodeURIComponent(escape(x.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return x.parse(unescape(encodeURIComponent(m)))}},v=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=g.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var b,k=this._data,C=k.words,E=k.sigBytes,j=this.blockSize,w=j*4,_=E/w;m?_=n.ceil(_):_=n.max((_|0)-this._minBufferSize,0);var S=_*j,A=n.min(S*4,E);if(S){for(var N=0;N<S;N+=j)this._doProcessBlock(C,N);b=C.splice(0,S),k.sigBytes-=A}return new f.init(b,A)},clone:function(){var m=d.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=v.extend({cfg:d.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(m){return function(b,k){return new m.init(k).finalize(b)}},_createHmacHelper:function(m){return function(b,k){return new y.HMAC.init(m,k).finalize(b)}}});var y=c.algo={};return c}(Math);return r})}(Sh)),Sh.exports}var Ch={exports:{}},uv;function id(){return uv||(uv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(n){var s=r,i=s.lib,o=i.Base,a=i.WordArray,c=s.x64={};c.Word=o.extend({init:function(u,d){this.high=u,this.low=d}}),c.WordArray=o.extend({init:function(u,d){u=this.words=u||[],d!=n?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,f=[],h=0;h<d;h++){var p=u[h];f.push(p.high),f.push(p.low)}return a.create(f,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),d=u.words=this.words.slice(0),f=d.length,h=0;h<f;h++)d[h]=d[h].clone();return u}})}(),r})}(Ch)),Ch.exports}var jh={exports:{}},dv;function F5(){return dv||(dv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,o=i.init,a=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,d=[],f=0;f<u;f++)d[f>>>2]|=c[f]<<24-f%4*8;o.call(this,d,u)}else o.apply(this,arguments)};a.prototype=i}}(),r.lib.WordArray})}(jh)),jh.exports}var Eh={exports:{}},hv;function R5(){return hv||(hv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var u=c.words,d=c.sigBytes,f=[],h=0;h<d;h+=2){var p=u[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var u=c.length,d=[],f=0;f<u;f++)d[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return i.create(d,u*2)}},o.Utf16LE={stringify:function(c){for(var u=c.words,d=c.sigBytes,f=[],h=0;h<d;h+=2){var p=a(u[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var u=c.length,d=[],f=0;f<u;f++)d[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return i.create(d,u*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(Eh)),Eh.exports}var Nh={exports:{}},fv;function oi(){return fv||(fv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=n.enc;o.Base64={stringify:function(c){var u=c.words,d=c.sigBytes,f=this._map;c.clamp();for(var h=[],p=0;p<d;p+=3)for(var x=u[p>>>2]>>>24-p%4*8&255,g=u[p+1>>>2]>>>24-(p+1)%4*8&255,v=u[p+2>>>2]>>>24-(p+2)%4*8&255,y=x<<16|g<<8|v,m=0;m<4&&p+m*.75<d;m++)h.push(f.charAt(y>>>6*(3-m)&63));var b=f.charAt(64);if(b)for(;h.length%4;)h.push(b);return h.join("")},parse:function(c){var u=c.length,d=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var x=c.indexOf(p);x!==-1&&(u=x)}return a(c,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,u,d){for(var f=[],h=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,g=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|g;f[h>>>2]|=v<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64})}(Nh)),Nh.exports}var Ah={exports:{}},pv;function B5(){return pv||(pv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=n.enc;o.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var d=c.words,f=c.sigBytes,h=u?this._safe_map:this._map;c.clamp();for(var p=[],x=0;x<f;x+=3)for(var g=d[x>>>2]>>>24-x%4*8&255,v=d[x+1>>>2]>>>24-(x+1)%4*8&255,y=d[x+2>>>2]>>>24-(x+2)%4*8&255,m=g<<16|v<<8|y,b=0;b<4&&x+b*.75<f;b++)p.push(h.charAt(m>>>6*(3-b)&63));var k=h.charAt(64);if(k)for(;p.length%4;)p.push(k);return p.join("")},parse:function(c,u){u===void 0&&(u=!0);var d=c.length,f=u?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<f.length;p++)h[f.charCodeAt(p)]=p}var x=f.charAt(64);if(x){var g=c.indexOf(x);g!==-1&&(d=g)}return a(c,d,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,u,d){for(var f=[],h=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,g=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|g;f[h>>>2]|=v<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64url})}(Ah)),Ah.exports}var Ph={exports:{}},gv;function ai(){return gv||(gv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(n){var s=r,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=[];(function(){for(var g=0;g<64;g++)u[g]=n.abs(n.sin(g+1))*4294967296|0})();var d=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var y=0;y<16;y++){var m=v+y,b=g[m];g[m]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var k=this._hash.words,C=g[v+0],E=g[v+1],j=g[v+2],w=g[v+3],_=g[v+4],S=g[v+5],A=g[v+6],N=g[v+7],F=g[v+8],M=g[v+9],K=g[v+10],G=g[v+11],W=g[v+12],z=g[v+13],$=g[v+14],R=g[v+15],O=k[0],I=k[1],D=k[2],B=k[3];O=f(O,I,D,B,C,7,u[0]),B=f(B,O,I,D,E,12,u[1]),D=f(D,B,O,I,j,17,u[2]),I=f(I,D,B,O,w,22,u[3]),O=f(O,I,D,B,_,7,u[4]),B=f(B,O,I,D,S,12,u[5]),D=f(D,B,O,I,A,17,u[6]),I=f(I,D,B,O,N,22,u[7]),O=f(O,I,D,B,F,7,u[8]),B=f(B,O,I,D,M,12,u[9]),D=f(D,B,O,I,K,17,u[10]),I=f(I,D,B,O,G,22,u[11]),O=f(O,I,D,B,W,7,u[12]),B=f(B,O,I,D,z,12,u[13]),D=f(D,B,O,I,$,17,u[14]),I=f(I,D,B,O,R,22,u[15]),O=h(O,I,D,B,E,5,u[16]),B=h(B,O,I,D,A,9,u[17]),D=h(D,B,O,I,G,14,u[18]),I=h(I,D,B,O,C,20,u[19]),O=h(O,I,D,B,S,5,u[20]),B=h(B,O,I,D,K,9,u[21]),D=h(D,B,O,I,R,14,u[22]),I=h(I,D,B,O,_,20,u[23]),O=h(O,I,D,B,M,5,u[24]),B=h(B,O,I,D,$,9,u[25]),D=h(D,B,O,I,w,14,u[26]),I=h(I,D,B,O,F,20,u[27]),O=h(O,I,D,B,z,5,u[28]),B=h(B,O,I,D,j,9,u[29]),D=h(D,B,O,I,N,14,u[30]),I=h(I,D,B,O,W,20,u[31]),O=p(O,I,D,B,S,4,u[32]),B=p(B,O,I,D,F,11,u[33]),D=p(D,B,O,I,G,16,u[34]),I=p(I,D,B,O,$,23,u[35]),O=p(O,I,D,B,E,4,u[36]),B=p(B,O,I,D,_,11,u[37]),D=p(D,B,O,I,N,16,u[38]),I=p(I,D,B,O,K,23,u[39]),O=p(O,I,D,B,z,4,u[40]),B=p(B,O,I,D,C,11,u[41]),D=p(D,B,O,I,w,16,u[42]),I=p(I,D,B,O,A,23,u[43]),O=p(O,I,D,B,M,4,u[44]),B=p(B,O,I,D,W,11,u[45]),D=p(D,B,O,I,R,16,u[46]),I=p(I,D,B,O,j,23,u[47]),O=x(O,I,D,B,C,6,u[48]),B=x(B,O,I,D,N,10,u[49]),D=x(D,B,O,I,$,15,u[50]),I=x(I,D,B,O,S,21,u[51]),O=x(O,I,D,B,W,6,u[52]),B=x(B,O,I,D,w,10,u[53]),D=x(D,B,O,I,K,15,u[54]),I=x(I,D,B,O,E,21,u[55]),O=x(O,I,D,B,F,6,u[56]),B=x(B,O,I,D,R,10,u[57]),D=x(D,B,O,I,A,15,u[58]),I=x(I,D,B,O,z,21,u[59]),O=x(O,I,D,B,_,6,u[60]),B=x(B,O,I,D,G,10,u[61]),D=x(D,B,O,I,j,15,u[62]),I=x(I,D,B,O,M,21,u[63]),k[0]=k[0]+O|0,k[1]=k[1]+I|0,k[2]=k[2]+D|0,k[3]=k[3]+B|0},_doFinalize:function(){var g=this._data,v=g.words,y=this._nDataBytes*8,m=g.sigBytes*8;v[m>>>5]|=128<<24-m%32;var b=n.floor(y/4294967296),k=y;v[(m+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v[(m+64>>>9<<4)+14]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var C=this._hash,E=C.words,j=0;j<4;j++){var w=E[j];E[j]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}return C},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,v,y,m,b,k,C){var E=g+(v&y|~v&m)+b+C;return(E<<k|E>>>32-k)+v}function h(g,v,y,m,b,k,C){var E=g+(v&m|y&~m)+b+C;return(E<<k|E>>>32-k)+v}function p(g,v,y,m,b,k,C){var E=g+(v^y^m)+b+C;return(E<<k|E>>>32-k)+v}function x(g,v,y,m,b,k,C){var E=g+(y^(v|~m))+b+C;return(E<<k|E>>>32-k)+v}s.MD5=a._createHelper(d),s.HmacMD5=a._createHmacHelper(d)}(Math),r.MD5})}(Ph)),Ph.exports}var Dh={exports:{}},mv;function F2(){return mv||(mv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=s.Hasher,a=n.algo,c=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,f){for(var h=this._hash.words,p=h[0],x=h[1],g=h[2],v=h[3],y=h[4],m=0;m<80;m++){if(m<16)c[m]=d[f+m]|0;else{var b=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=b<<1|b>>>31}var k=(p<<5|p>>>27)+y+c[m];m<20?k+=(x&g|~x&v)+1518500249:m<40?k+=(x^g^v)+1859775393:m<60?k+=(x&g|x&v|g&v)-1894007588:k+=(x^g^v)-899497514,y=v,v=g,g=x<<30|x>>>2,x=p,p=k}h[0]=h[0]+p|0,h[1]=h[1]+x|0,h[2]=h[2]+g|0,h[3]=h[3]+v|0,h[4]=h[4]+y|0},_doFinalize:function(){var d=this._data,f=d.words,h=this._nDataBytes*8,p=d.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(p+64>>>9<<4)+15]=h,d.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA1=o._createHelper(u),n.HmacSHA1=o._createHmacHelper(u)}(),r.SHA1})}(Dh)),Dh.exports}var Th={exports:{}},xv;function bg(){return xv||(xv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){return function(n){var s=r,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=[],d=[];(function(){function p(y){for(var m=n.sqrt(y),b=2;b<=m;b++)if(!(y%b))return!1;return!0}function x(y){return(y-(y|0))*4294967296|0}for(var g=2,v=0;v<64;)p(g)&&(v<8&&(u[v]=x(n.pow(g,1/2))),d[v]=x(n.pow(g,1/3)),v++),g++})();var f=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(p,x){for(var g=this._hash.words,v=g[0],y=g[1],m=g[2],b=g[3],k=g[4],C=g[5],E=g[6],j=g[7],w=0;w<64;w++){if(w<16)f[w]=p[x+w]|0;else{var _=f[w-15],S=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,A=f[w-2],N=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;f[w]=S+f[w-7]+N+f[w-16]}var F=k&C^~k&E,M=v&y^v&m^y&m,K=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),G=(k<<26|k>>>6)^(k<<21|k>>>11)^(k<<7|k>>>25),W=j+G+F+d[w]+f[w],z=K+M;j=E,E=C,C=k,k=b+W|0,b=m,m=y,y=v,v=W+z|0}g[0]=g[0]+v|0,g[1]=g[1]+y|0,g[2]=g[2]+m|0,g[3]=g[3]+b|0,g[4]=g[4]+k|0,g[5]=g[5]+C|0,g[6]=g[6]+E|0,g[7]=g[7]+j|0},_doFinalize:function(){var p=this._data,x=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;return x[v>>>5]|=128<<24-v%32,x[(v+64>>>9<<4)+14]=n.floor(g/4294967296),x[(v+64>>>9<<4)+15]=g,p.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=a._createHelper(h),s.HmacSHA256=a._createHmacHelper(h)}(Math),r.SHA256})}(Th)),Th.exports}var Oh={exports:{}},yv;function L5(){return yv||(yv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),bg())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),r.SHA224})}(Oh)),Oh.exports}var Ih={exports:{}},vv;function R2(){return vv||(vv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),id())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,o=n.x64,a=o.Word,c=o.WordArray,u=n.algo;function d(){return a.create.apply(a,arguments)}var f=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],h=[];(function(){for(var x=0;x<80;x++)h[x]=d()})();var p=u.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(x,g){for(var v=this._hash.words,y=v[0],m=v[1],b=v[2],k=v[3],C=v[4],E=v[5],j=v[6],w=v[7],_=y.high,S=y.low,A=m.high,N=m.low,F=b.high,M=b.low,K=k.high,G=k.low,W=C.high,z=C.low,$=E.high,R=E.low,O=j.high,I=j.low,D=w.high,B=w.low,X=_,J=S,ee=A,re=N,de=F,ge=M,ue=K,ae=G,Q=W,te=z,ie=$,oe=R,be=O,fe=I,xe=D,we=B,De=0;De<80;De++){var Me,ut,Fe=h[De];if(De<16)ut=Fe.high=x[g+De*2]|0,Me=Fe.low=x[g+De*2+1]|0;else{var Ie=h[De-15],Ce=Ie.high,ze=Ie.low,Ft=(Ce>>>1|ze<<31)^(Ce>>>8|ze<<24)^Ce>>>7,Zt=(ze>>>1|Ce<<31)^(ze>>>8|Ce<<24)^(ze>>>7|Ce<<25),vs=h[De-2],Rt=vs.high,dt=vs.low,sn=(Rt>>>19|dt<<13)^(Rt<<3|dt>>>29)^Rt>>>6,bs=(dt>>>19|Rt<<13)^(dt<<3|Rt>>>29)^(dt>>>6|Rt<<26),Pr=h[De-7],cd=Pr.high,ud=Pr.low,tl=h[De-16],rl=tl.high,nl=tl.low;Me=Zt+ud,ut=Ft+cd+(Me>>>0<Zt>>>0?1:0),Me=Me+bs,ut=ut+sn+(Me>>>0<bs>>>0?1:0),Me=Me+nl,ut=ut+rl+(Me>>>0<nl>>>0?1:0),Fe.high=ut,Fe.low=Me}var dd=Q&ie^~Q&be,po=te&oe^~te&fe,hd=X&ee^X&de^ee&de,fd=J&re^J&ge^re&ge,pd=(X>>>28|J<<4)^(X<<30|J>>>2)^(X<<25|J>>>7),sl=(J>>>28|X<<4)^(J<<30|X>>>2)^(J<<25|X>>>7),go=(Q>>>14|te<<18)^(Q>>>18|te<<14)^(Q<<23|te>>>9),il=(te>>>14|Q<<18)^(te>>>18|Q<<14)^(te<<23|Q>>>9),ol=f[De],er=ol.high,al=ol.low,Nt=we+il,Hr=xe+go+(Nt>>>0<we>>>0?1:0),Nt=Nt+po,Hr=Hr+dd+(Nt>>>0<po>>>0?1:0),Nt=Nt+al,Hr=Hr+er+(Nt>>>0<al>>>0?1:0),Nt=Nt+Me,Hr=Hr+ut+(Nt>>>0<Me>>>0?1:0),ll=sl+fd,gd=pd+hd+(ll>>>0<sl>>>0?1:0);xe=be,we=fe,be=ie,fe=oe,ie=Q,oe=te,te=ae+Nt|0,Q=ue+Hr+(te>>>0<ae>>>0?1:0)|0,ue=de,ae=ge,de=ee,ge=re,ee=X,re=J,J=Nt+ll|0,X=Hr+gd+(J>>>0<Nt>>>0?1:0)|0}S=y.low=S+J,y.high=_+X+(S>>>0<J>>>0?1:0),N=m.low=N+re,m.high=A+ee+(N>>>0<re>>>0?1:0),M=b.low=M+ge,b.high=F+de+(M>>>0<ge>>>0?1:0),G=k.low=G+ae,k.high=K+ue+(G>>>0<ae>>>0?1:0),z=C.low=z+te,C.high=W+Q+(z>>>0<te>>>0?1:0),R=E.low=R+oe,E.high=$+ie+(R>>>0<oe>>>0?1:0),I=j.low=I+fe,j.high=O+be+(I>>>0<fe>>>0?1:0),B=w.low=B+we,w.high=D+xe+(B>>>0<we>>>0?1:0)},_doFinalize:function(){var x=this._data,g=x.words,v=this._nDataBytes*8,y=x.sigBytes*8;g[y>>>5]|=128<<24-y%32,g[(y+128>>>10<<5)+30]=Math.floor(v/4294967296),g[(y+128>>>10<<5)+31]=v,x.sigBytes=g.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var x=i.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(Ih)),Ih.exports}var Fh={exports:{}},bv;function M5(){return bv||(bv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),id(),R2())})(pe,function(r){return function(){var n=r,s=n.x64,i=s.Word,o=s.WordArray,a=n.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u)}(),r.SHA384})}(Fh)),Fh.exports}var Rh={exports:{}},wv;function $5(){return wv||(wv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),id())})(pe,function(r){return function(n){var s=r,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.x64,u=c.Word,d=s.algo,f=[],h=[],p=[];(function(){for(var v=1,y=0,m=0;m<24;m++){f[v+5*y]=(m+1)*(m+2)/2%64;var b=y%5,k=(2*v+3*y)%5;v=b,y=k}for(var v=0;v<5;v++)for(var y=0;y<5;y++)h[v+5*y]=y+(2*v+3*y)%5*5;for(var C=1,E=0;E<24;E++){for(var j=0,w=0,_=0;_<7;_++){if(C&1){var S=(1<<_)-1;S<32?w^=1<<S:j^=1<<S-32}C&128?C=C<<1^113:C<<=1}p[E]=u.create(j,w)}})();var x=[];(function(){for(var v=0;v<25;v++)x[v]=u.create()})();var g=d.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],y=0;y<25;y++)v[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,y){for(var m=this._state,b=this.blockSize/2,k=0;k<b;k++){var C=v[y+2*k],E=v[y+2*k+1];C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360;var j=m[k];j.high^=E,j.low^=C}for(var w=0;w<24;w++){for(var _=0;_<5;_++){for(var S=0,A=0,N=0;N<5;N++){var j=m[_+5*N];S^=j.high,A^=j.low}var F=x[_];F.high=S,F.low=A}for(var _=0;_<5;_++)for(var M=x[(_+4)%5],K=x[(_+1)%5],G=K.high,W=K.low,S=M.high^(G<<1|W>>>31),A=M.low^(W<<1|G>>>31),N=0;N<5;N++){var j=m[_+5*N];j.high^=S,j.low^=A}for(var z=1;z<25;z++){var S,A,j=m[z],$=j.high,R=j.low,O=f[z];O<32?(S=$<<O|R>>>32-O,A=R<<O|$>>>32-O):(S=R<<O-32|$>>>64-O,A=$<<O-32|R>>>64-O);var I=x[h[z]];I.high=S,I.low=A}var D=x[0],B=m[0];D.high=B.high,D.low=B.low;for(var _=0;_<5;_++)for(var N=0;N<5;N++){var z=_+5*N,j=m[z],X=x[z],J=x[(_+1)%5+5*N],ee=x[(_+2)%5+5*N];j.high=X.high^~J.high&ee.high,j.low=X.low^~J.low&ee.low}var j=m[0],re=p[w];j.high^=re.high,j.low^=re.low}},_doFinalize:function(){var v=this._data,y=v.words;this._nDataBytes*8;var m=v.sigBytes*8,b=this.blockSize*32;y[m>>>5]|=1<<24-m%32,y[(n.ceil((m+1)/b)*b>>>5)-1]|=128,v.sigBytes=y.length*4,this._process();for(var k=this._state,C=this.cfg.outputLength/8,E=C/8,j=[],w=0;w<E;w++){var _=k[w],S=_.high,A=_.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,j.push(A),j.push(S)}return new o.init(j,C)},clone:function(){for(var v=a.clone.call(this),y=v._state=this._state.slice(0),m=0;m<25;m++)y[m]=y[m].clone();return v}});s.SHA3=a._createHelper(g),s.HmacSHA3=a._createHmacHelper(g)}(Math),r.SHA3})}(Rh)),Rh.exports}var Bh={exports:{}},_v;function z5(){return _v||(_v=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,j){for(var w=0;w<16;w++){var _=j+w,S=E[_];E[_]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var A=this._hash.words,N=p.words,F=x.words,M=u.words,K=d.words,G=f.words,W=h.words,z,$,R,O,I,D,B,X,J,ee;D=z=A[0],B=$=A[1],X=R=A[2],J=O=A[3],ee=I=A[4];for(var re,w=0;w<80;w+=1)re=z+E[j+M[w]]|0,w<16?re+=v($,R,O)+N[0]:w<32?re+=y($,R,O)+N[1]:w<48?re+=m($,R,O)+N[2]:w<64?re+=b($,R,O)+N[3]:re+=k($,R,O)+N[4],re=re|0,re=C(re,G[w]),re=re+I|0,z=I,I=O,O=C(R,10),R=$,$=re,re=D+E[j+K[w]]|0,w<16?re+=k(B,X,J)+F[0]:w<32?re+=b(B,X,J)+F[1]:w<48?re+=m(B,X,J)+F[2]:w<64?re+=y(B,X,J)+F[3]:re+=v(B,X,J)+F[4],re=re|0,re=C(re,W[w]),re=re+ee|0,D=ee,ee=J,J=C(X,10),X=B,B=re;re=A[1]+R+J|0,A[1]=A[2]+O+ee|0,A[2]=A[3]+I+D|0,A[3]=A[4]+z+B|0,A[4]=A[0]+$+X|0,A[0]=re},_doFinalize:function(){var E=this._data,j=E.words,w=this._nDataBytes*8,_=E.sigBytes*8;j[_>>>5]|=128<<24-_%32,j[(_+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E.sigBytes=(j.length+1)*4,this._process();for(var S=this._hash,A=S.words,N=0;N<5;N++){var F=A[N];A[N]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return S},clone:function(){var E=a.clone.call(this);return E._hash=this._hash.clone(),E}});function v(E,j,w){return E^j^w}function y(E,j,w){return E&j|~E&w}function m(E,j,w){return(E|~j)^w}function b(E,j,w){return E&w|j&~w}function k(E,j,w){return E^(j|~w)}function C(E,j){return E<<j|E>>>32-j}s.RIPEMD160=a._createHelper(g),s.HmacRIPEMD160=a._createHmacHelper(g)}(),r.RIPEMD160})}(Bh)),Bh.exports}var Lh={exports:{}},kv;function wg(){return kv||(kv=1,function(t,e){(function(r,n){t.exports=n(Pe())})(pe,function(r){(function(){var n=r,s=n.lib,i=s.Base,o=n.enc,a=o.Utf8,c=n.algo;c.HMAC=i.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=a.parse(d));var f=u.blockSize,h=f*4;d.sigBytes>h&&(d=u.finalize(d)),d.clamp();for(var p=this._oKey=d.clone(),x=this._iKey=d.clone(),g=p.words,v=x.words,y=0;y<f;y++)g[y]^=1549556828,v[y]^=909522486;p.sigBytes=x.sigBytes=h,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,f=d.finalize(u);d.reset();var h=d.finalize(this._oKey.clone().concat(f));return h}})})()})}(Lh)),Lh.exports}var Mh={exports:{}},Sv;function U5(){return Sv||(Sv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),bg(),wg())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.Base,o=s.WordArray,a=n.algo,c=a.SHA256,u=a.HMAC,d=a.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var p=this.cfg,x=u.create(p.hasher,f),g=o.create(),v=o.create([1]),y=g.words,m=v.words,b=p.keySize,k=p.iterations;y.length<b;){var C=x.update(h).finalize(v);x.reset();for(var E=C.words,j=E.length,w=C,_=1;_<k;_++){w=x.finalize(w),x.reset();for(var S=w.words,A=0;A<j;A++)E[A]^=S[A]}g.concat(C),m[0]++}return g.sigBytes=b*4,g}});n.PBKDF2=function(f,h,p){return d.create(p).compute(f,h)}}(),r.PBKDF2})}(Mh)),Mh.exports}var $h={exports:{}},Cv;function ys(){return Cv||(Cv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),F2(),wg())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.Base,o=s.WordArray,a=n.algo,c=a.MD5,u=a.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h,p=this.cfg,x=p.hasher.create(),g=o.create(),v=g.words,y=p.keySize,m=p.iterations;v.length<y;){h&&x.update(h),h=x.update(d).finalize(f),x.reset();for(var b=1;b<m;b++)h=x.finalize(h),x.reset();g.concat(h)}return g.sigBytes=y*4,g}});n.EvpKDF=function(d,f,h){return u.create(h).compute(d,f)}}(),r.EvpKDF})}($h)),$h.exports}var zh={exports:{}},jv;function St(){return jv||(jv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),ys())})(pe,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,o=i.Base,a=i.WordArray,c=i.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,f=s.algo,h=f.EvpKDF,p=i.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(S,A){return this.create(this._ENC_XFORM_MODE,S,A)},createDecryptor:function(S,A){return this.create(this._DEC_XFORM_MODE,S,A)},init:function(S,A,N){this.cfg=this.cfg.extend(N),this._xformMode=S,this._key=A,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var A=this._doFinalize();return A},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(A){return typeof A=="string"?_:E}return function(A){return{encrypt:function(N,F,M){return S(F).encrypt(A,N,F,M)},decrypt:function(N,F,M){return S(F).decrypt(A,N,F,M)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var x=s.mode={},g=i.BlockCipherMode=o.extend({createEncryptor:function(S,A){return this.Encryptor.create(S,A)},createDecryptor:function(S,A){return this.Decryptor.create(S,A)},init:function(S,A){this._cipher=S,this._iv=A}}),v=x.CBC=function(){var S=g.extend();S.Encryptor=S.extend({processBlock:function(N,F){var M=this._cipher,K=M.blockSize;A.call(this,N,F,K),M.encryptBlock(N,F),this._prevBlock=N.slice(F,F+K)}}),S.Decryptor=S.extend({processBlock:function(N,F){var M=this._cipher,K=M.blockSize,G=N.slice(F,F+K);M.decryptBlock(N,F),A.call(this,N,F,K),this._prevBlock=G}});function A(N,F,M){var K,G=this._iv;G?(K=G,this._iv=n):K=this._prevBlock;for(var W=0;W<M;W++)N[F+W]^=K[W]}return S}(),y=s.pad={},m=y.Pkcs7={pad:function(S,A){for(var N=A*4,F=N-S.sigBytes%N,M=F<<24|F<<16|F<<8|F,K=[],G=0;G<F;G+=4)K.push(M);var W=a.create(K,F);S.concat(W)},unpad:function(S){var A=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=A}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:m}),reset:function(){var S;p.reset.call(this);var A=this.cfg,N=A.iv,F=A.mode;this._xformMode==this._ENC_XFORM_MODE?S=F.createEncryptor:(S=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,N&&N.words):(this._mode=S.call(F,this,N&&N.words),this._mode.__creator=S)},_doProcessBlock:function(S,A){this._mode.processBlock(S,A)},_doFinalize:function(){var S,A=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(A.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),A.unpad(S)),S},blockSize:128/32});var b=i.CipherParams=o.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),k=s.format={},C=k.OpenSSL={stringify:function(S){var A,N=S.ciphertext,F=S.salt;return F?A=a.create([1398893684,1701076831]).concat(F).concat(N):A=N,A.toString(d)},parse:function(S){var A,N=d.parse(S),F=N.words;return F[0]==1398893684&&F[1]==1701076831&&(A=a.create(F.slice(2,4)),F.splice(0,4),N.sigBytes-=16),b.create({ciphertext:N,salt:A})}},E=i.SerializableCipher=o.extend({cfg:o.extend({format:C}),encrypt:function(S,A,N,F){F=this.cfg.extend(F);var M=S.createEncryptor(N,F),K=M.finalize(A),G=M.cfg;return b.create({ciphertext:K,key:N,iv:G.iv,algorithm:S,mode:G.mode,padding:G.padding,blockSize:S.blockSize,formatter:F.format})},decrypt:function(S,A,N,F){F=this.cfg.extend(F),A=this._parse(A,F.format);var M=S.createDecryptor(N,F).finalize(A.ciphertext);return M},_parse:function(S,A){return typeof S=="string"?A.parse(S,this):S}}),j=s.kdf={},w=j.OpenSSL={execute:function(S,A,N,F,M){if(F||(F=a.random(64/8)),M)var K=h.create({keySize:A+N,hasher:M}).compute(S,F);else var K=h.create({keySize:A+N}).compute(S,F);var G=a.create(K.words.slice(A),N*4);return K.sigBytes=A*4,b.create({key:K,iv:G,salt:F})}},_=i.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:w}),encrypt:function(S,A,N,F){F=this.cfg.extend(F);var M=F.kdf.execute(N,S.keySize,S.ivSize,F.salt,F.hasher);F.iv=M.iv;var K=E.encrypt.call(this,S,A,M.key,F);return K.mixIn(M),K},decrypt:function(S,A,N,F){F=this.cfg.extend(F),A=this._parse(A,F.format);var M=F.kdf.execute(N,S.keySize,S.ivSize,A.salt,F.hasher);F.iv=M.iv;var K=E.decrypt.call(this,S,A,M.key,F);return K}})}()})}(zh)),zh.exports}var Uh={exports:{}},Ev;function V5(){return Ev||(Ev=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize;s.call(this,i,o,c,a),this._prevBlock=i.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=i.slice(o,o+c);s.call(this,i,o,c,a),this._prevBlock=u}});function s(i,o,a,c){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var f=0;f<a;f++)i[o+f]^=u[f]}return n}(),r.mode.CFB})}(Uh)),Uh.exports}var Vh={exports:{}},Nv;function H5(){return Nv||(Nv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var f=d.slice(0);a.encryptBlock(f,0),d[c-1]=d[c-1]+1|0;for(var h=0;h<c;h++)i[o+h]^=f[h]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Vh)),Vh.exports}var Hh={exports:{}},Av;function W5(){return Av||(Av=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(a){if((a>>24&255)===255){var c=a>>16&255,u=a>>8&255,d=a&255;c===255?(c=0,u===255?(u=0,d===255?d=0:++d):++u):++c,a=0,a+=c<<16,a+=u<<8,a+=d}else a+=1<<24;return a}function i(a){return(a[0]=s(a[0]))===0&&(a[1]=s(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,c){var u=this._cipher,d=u.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),i(h);var p=h.slice(0);u.encryptBlock(p,0);for(var x=0;x<d;x++)a[c+x]^=p[x]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(Hh)),Hh.exports}var Wh={exports:{}},Pv;function q5(){return Pv||(Pv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(d,0);for(var f=0;f<c;f++)i[o+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Wh)),Wh.exports}var qh={exports:{}},Dv;function K5(){return Dv||(Dv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(qh)),qh.exports}var Kh={exports:{}},Tv;function G5(){return Tv||(Tv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,o=s*4,a=o-i%o,c=i+a-1;n.clamp(),n.words[c>>>2]|=a<<24-c%4*8,n.sigBytes+=a},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Kh)),Kh.exports}var Gh={exports:{}},Ov;function Y5(){return Ov||(Ov=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,o=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Gh)),Gh.exports}var Yh={exports:{}},Iv;function J5(){return Iv||(Iv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Yh)),Yh.exports}var Jh={exports:{}},Fv;function X5(){return Fv||(Fv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Jh)),Jh.exports}var Xh={exports:{}},Rv;function Q5(){return Rv||(Rv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Xh)),Xh.exports}var Qh={exports:{}},Bv;function Z5(){return Bv||(Bv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),St())})(pe,function(r){return function(n){var s=r,i=s.lib,o=i.CipherParams,a=s.enc,c=a.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var f=c.parse(d);return o.create({ciphertext:f})}}}(),r.format.Hex})}(Qh)),Qh.exports}var Zh={exports:{}},Lv;function eT(){return Lv||(Lv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,o=n.algo,a=[],c=[],u=[],d=[],f=[],h=[],p=[],x=[],g=[],v=[];(function(){for(var b=[],k=0;k<256;k++)k<128?b[k]=k<<1:b[k]=k<<1^283;for(var C=0,E=0,k=0;k<256;k++){var j=E^E<<1^E<<2^E<<3^E<<4;j=j>>>8^j&255^99,a[C]=j,c[j]=C;var w=b[C],_=b[w],S=b[_],A=b[j]*257^j*16843008;u[C]=A<<24|A>>>8,d[C]=A<<16|A>>>16,f[C]=A<<8|A>>>24,h[C]=A;var A=S*16843009^_*65537^w*257^C*16843008;p[j]=A<<24|A>>>8,x[j]=A<<16|A>>>16,g[j]=A<<8|A>>>24,v[j]=A,C?(C=w^b[b[b[S^w]]],E^=b[b[E]]):C=E=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],m=o.AES=i.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var k=this._keyPriorReset=this._key,C=k.words,E=k.sigBytes/4,j=this._nRounds=E+6,w=(j+1)*4,_=this._keySchedule=[],S=0;S<w;S++)S<E?_[S]=C[S]:(b=_[S-1],S%E?E>6&&S%E==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[S/E|0]<<24),_[S]=_[S-E]^b);for(var A=this._invKeySchedule=[],N=0;N<w;N++){var S=w-N;if(N%4)var b=_[S];else var b=_[S-4];N<4||S<=4?A[N]=b:A[N]=p[a[b>>>24]]^x[a[b>>>16&255]]^g[a[b>>>8&255]]^v[a[b&255]]}}},encryptBlock:function(b,k){this._doCryptBlock(b,k,this._keySchedule,u,d,f,h,a)},decryptBlock:function(b,k){var C=b[k+1];b[k+1]=b[k+3],b[k+3]=C,this._doCryptBlock(b,k,this._invKeySchedule,p,x,g,v,c);var C=b[k+1];b[k+1]=b[k+3],b[k+3]=C},_doCryptBlock:function(b,k,C,E,j,w,_,S){for(var A=this._nRounds,N=b[k]^C[0],F=b[k+1]^C[1],M=b[k+2]^C[2],K=b[k+3]^C[3],G=4,W=1;W<A;W++){var z=E[N>>>24]^j[F>>>16&255]^w[M>>>8&255]^_[K&255]^C[G++],$=E[F>>>24]^j[M>>>16&255]^w[K>>>8&255]^_[N&255]^C[G++],R=E[M>>>24]^j[K>>>16&255]^w[N>>>8&255]^_[F&255]^C[G++],O=E[K>>>24]^j[N>>>16&255]^w[F>>>8&255]^_[M&255]^C[G++];N=z,F=$,M=R,K=O}var z=(S[N>>>24]<<24|S[F>>>16&255]<<16|S[M>>>8&255]<<8|S[K&255])^C[G++],$=(S[F>>>24]<<24|S[M>>>16&255]<<16|S[K>>>8&255]<<8|S[N&255])^C[G++],R=(S[M>>>24]<<24|S[K>>>16&255]<<16|S[N>>>8&255]<<8|S[F&255])^C[G++],O=(S[K>>>24]<<24|S[N>>>16&255]<<16|S[F>>>8&255]<<8|S[M&255])^C[G++];b[k]=z,b[k+1]=$,b[k+2]=R,b[k+3]=O},keySize:256/32});n.AES=i._createHelper(m)}(),r.AES})}(Zh)),Zh.exports}var e0={exports:{}},Mv;function tT(){return Mv||(Mv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,o=s.BlockCipher,a=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=o.extend({_doReset:function(){for(var y=this._key,m=y.words,b=[],k=0;k<56;k++){var C=c[k]-1;b[k]=m[C>>>5]>>>31-C%32&1}for(var E=this._subKeys=[],j=0;j<16;j++){for(var w=E[j]=[],_=d[j],k=0;k<24;k++)w[k/6|0]|=b[(u[k]-1+_)%28]<<31-k%6,w[4+(k/6|0)]|=b[28+(u[k+24]-1+_)%28]<<31-k%6;w[0]=w[0]<<1|w[0]>>>31;for(var k=1;k<7;k++)w[k]=w[k]>>>(k-1)*4+3;w[7]=w[7]<<5|w[7]>>>27}for(var S=this._invSubKeys=[],k=0;k<16;k++)S[k]=E[15-k]},encryptBlock:function(y,m){this._doCryptBlock(y,m,this._subKeys)},decryptBlock:function(y,m){this._doCryptBlock(y,m,this._invSubKeys)},_doCryptBlock:function(y,m,b){this._lBlock=y[m],this._rBlock=y[m+1],x.call(this,4,252645135),x.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),x.call(this,1,1431655765);for(var k=0;k<16;k++){for(var C=b[k],E=this._lBlock,j=this._rBlock,w=0,_=0;_<8;_++)w|=f[_][((j^C[_])&h[_])>>>0];this._lBlock=j,this._rBlock=E^w}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,x.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),y[m]=this._lBlock,y[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(y,m){var b=(this._lBlock>>>y^this._rBlock)&m;this._rBlock^=b,this._lBlock^=b<<y}function g(y,m){var b=(this._rBlock>>>y^this._lBlock)&m;this._lBlock^=b,this._rBlock^=b<<y}n.DES=o._createHelper(p);var v=a.TripleDES=o.extend({_doReset:function(){var y=this._key,m=y.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=m.slice(0,2),k=m.length<4?m.slice(0,2):m.slice(2,4),C=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=p.createEncryptor(i.create(b)),this._des2=p.createEncryptor(i.create(k)),this._des3=p.createEncryptor(i.create(C))},encryptBlock:function(y,m){this._des1.encryptBlock(y,m),this._des2.decryptBlock(y,m),this._des3.encryptBlock(y,m)},decryptBlock:function(y,m){this._des3.decryptBlock(y,m),this._des2.encryptBlock(y,m),this._des1.decryptBlock(y,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(v)}(),r.TripleDES})}(e0)),e0.exports}var t0={exports:{}},$v;function rT(){return $v||($v=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,o=n.algo,a=o.RC4=i.extend({_doReset:function(){for(var d=this._key,f=d.words,h=d.sigBytes,p=this._S=[],x=0;x<256;x++)p[x]=x;for(var x=0,g=0;x<256;x++){var v=x%h,y=f[v>>>2]>>>24-v%4*8&255;g=(g+p[x]+y)%256;var m=p[x];p[x]=p[g],p[g]=m}this._i=this._j=0},_doProcessBlock:function(d,f){d[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,f=this._i,h=this._j,p=0,x=0;x<4;x++){f=(f+1)%256,h=(h+d[f])%256;var g=d[f];d[f]=d[h],d[h]=g,p|=d[(d[f]+d[h])%256]<<24-x*8}return this._i=f,this._j=h,p}n.RC4=i._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});n.RC4Drop=i._createHelper(u)}(),r.RC4})}(t0)),t0.exports}var r0={exports:{}},zv;function nT(){return zv||(zv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,o=n.algo,a=[],c=[],u=[],d=o.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,x=0;x<4;x++)h[x]=(h[x]<<8|h[x]>>>24)&16711935|(h[x]<<24|h[x]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var x=0;x<4;x++)f.call(this);for(var x=0;x<8;x++)v[x]^=g[x+4&7];if(p){var y=p.words,m=y[0],b=y[1],k=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,C=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,E=k>>>16|C&4294901760,j=C<<16|k&65535;v[0]^=k,v[1]^=E,v[2]^=C,v[3]^=j,v[4]^=k,v[5]^=E,v[6]^=C,v[7]^=j;for(var x=0;x<4;x++)f.call(this)}},_doProcessBlock:function(h,p){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,h[p+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var g=h[x]+p[x],v=g&65535,y=g>>>16,m=((v*v>>>17)+v*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);u[x]=m^b}h[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,h[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,h[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,h[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,h[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,h[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,h[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,h[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=i._createHelper(d)}(),r.Rabbit})}(r0)),r0.exports}var n0={exports:{}},Uv;function sT(){return Uv||(Uv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,o=n.algo,a=[],c=[],u=[],d=o.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,x=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var v=0;v<4;v++)f.call(this);for(var v=0;v<8;v++)g[v]^=x[v+4&7];if(p){var y=p.words,m=y[0],b=y[1],k=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,C=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,E=k>>>16|C&4294901760,j=C<<16|k&65535;g[0]^=k,g[1]^=E,g[2]^=C,g[3]^=j,g[4]^=k,g[5]^=E,g[6]^=C,g[7]^=j;for(var v=0;v<4;v++)f.call(this)}},_doProcessBlock:function(h,p){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,h[p+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var g=h[x]+p[x],v=g&65535,y=g>>>16,m=((v*v>>>17)+v*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);u[x]=m^b}h[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,h[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,h[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,h[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,h[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,h[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,h[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,h[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=i._createHelper(d)}(),r.RabbitLegacy})}(n0)),n0.exports}var s0={exports:{}},Vv;function iT(){return Vv||(Vv=1,function(t,e){(function(r,n,s){t.exports=n(Pe(),oi(),ai(),ys(),St())})(pe,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,o=n.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function f(v,y){let m=y>>24&255,b=y>>16&255,k=y>>8&255,C=y&255,E=v.sbox[0][m]+v.sbox[1][b];return E=E^v.sbox[2][k],E=E+v.sbox[3][C],E}function h(v,y,m){let b=y,k=m,C;for(let E=0;E<a;++E)b=b^v.pbox[E],k=f(v,b)^k,C=b,b=k,k=C;return C=b,b=k,k=C,k=k^v.pbox[a],b=b^v.pbox[a+1],{left:b,right:k}}function p(v,y,m){let b=y,k=m,C;for(let E=a+1;E>1;--E)b=b^v.pbox[E],k=f(v,b)^k,C=b,b=k,k=C;return C=b,b=k,k=C,k=k^v.pbox[1],b=b^v.pbox[0],{left:b,right:k}}function x(v,y,m){for(let j=0;j<4;j++){v.sbox[j]=[];for(let w=0;w<256;w++)v.sbox[j][w]=u[j][w]}let b=0;for(let j=0;j<a+2;j++)v.pbox[j]=c[j]^y[b],b++,b>=m&&(b=0);let k=0,C=0,E=0;for(let j=0;j<a+2;j+=2)E=h(v,k,C),k=E.left,C=E.right,v.pbox[j]=k,v.pbox[j+1]=C;for(let j=0;j<4;j++)for(let w=0;w<256;w+=2)E=h(v,k,C),k=E.left,C=E.right,v.sbox[j][w]=k,v.sbox[j][w+1]=C;return!0}var g=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,y=v.words,m=v.sigBytes/4;x(d,y,m)}},encryptBlock:function(v,y){var m=h(d,v[y],v[y+1]);v[y]=m.left,v[y+1]=m.right},decryptBlock:function(v,y){var m=p(d,v[y],v[y+1]);v[y]=m.left,v[y+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(g)}(),r.Blowfish})}(s0)),s0.exports}(function(t,e){(function(r,n,s){t.exports=n(Pe(),id(),F5(),R5(),oi(),B5(),ai(),F2(),bg(),L5(),R2(),M5(),$5(),z5(),wg(),U5(),ys(),St(),V5(),H5(),W5(),q5(),K5(),G5(),Y5(),J5(),X5(),Q5(),Z5(),eT(),tT(),rT(),nT(),sT(),iT())})(pe,function(r){return r})})(I2);var oT=I2.exports;const mi=qf(oT);class aT{constructor(){this.keyDerivationSalt=this.generateSalt(),this.config={key:this.deriveKey(),algorithm:"AES"}}generateSalt(){return mi.lib.WordArray.random(256/8).toString()}deriveKey(){const r=`your-encryption-secret-here_${this.keyDerivationSalt}`;return mi.PBKDF2(r,this.keyDerivationSalt,{keySize:256/32,iterations:1e4}).toString()}encrypt(e){try{const r=JSON.stringify(e);return mi.AES.encrypt(r,this.config.key).toString()}catch(r){throw console.error("Encryption error:",r),new Error("Failed to encrypt data")}}decrypt(e){try{const n=mi.AES.decrypt(e,this.config.key).toString(mi.enc.Utf8);if(!n)throw new Error("Invalid encrypted data");return JSON.parse(n)}catch(r){throw console.error("Decryption error:",r),new Error("Failed to decrypt data")}}encryptCSVData(e){const r=["account_name","account_categories","preview_data","bucket_assignments","tags"],n={...e};return r.forEach(s=>{n[s]&&(n[s]=this.encrypt(n[s]))}),n}decryptCSVData(e){const r=["account_name","account_categories","preview_data","bucket_assignments","tags"],n={...e};return r.forEach(s=>{if(n[s]&&typeof n[s]=="string")try{n[s]=this.decrypt(n[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),n}encryptPropertyData(e){const r=["name","address","property_type"],n={...e};return r.forEach(s=>{n[s]&&(n[s]=this.encrypt(n[s]))}),n}decryptPropertyData(e){const r=["name","address","property_type"],n={...e};return r.forEach(s=>{if(n[s]&&typeof n[s]=="string")try{n[s]=this.decrypt(n[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),n}encryptOrganizationData(e){const r=["name"],n={...e};return r.forEach(s=>{n[s]&&(n[s]=this.encrypt(n[s]))}),n}decryptOrganizationData(e){const r=["name"],n={...e};return r.forEach(s=>{if(n[s]&&typeof n[s]=="string")try{n[s]=this.decrypt(n[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),n}generateHash(e){const r=JSON.stringify(e);return mi.SHA256(r).toString()}verifyIntegrity(e,r){return this.generateHash(e)===r}anonymizeData(e){const r={...e};r.account_name&&(r.account_name=this.anonymizeString(r.account_name)),r.name&&(r.name=this.anonymizeString(r.name)),r.address&&(r.address=this.anonymizeString(r.address));const n=["id","user_id","created_at","updated_at","file_type","total_records","is_active"],s={};return n.forEach(i=>{r[i]!==void 0&&(s[i]=r[i])}),s}anonymizeString(e){return!e||e.length===0?e:e.length<=2?"*".repeat(e.length):e[0]+"*".repeat(e.length-2)+e[e.length-1]}}const ca=new aT,lT="https://iqwhrvtcrseidfyznqaf.supabase.co",cT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlxd2hydnRjcnNlaWRmeXpucWFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDg1NDQ0NjgsImV4cCI6MjAyNDEyMDQ2OH0.your_actual_anon_key_here",wt=Za(lT,cT);class uT{constructor(){this.currentUser=null,this.initializeAuth()}async initializeAuth(){wt.auth.onAuthStateChange((e,r)=>{e==="SIGNED_IN"&&r?this.currentUser=r.user:e==="SIGNED_OUT"&&(this.currentUser=null)})}async setCurrentUser(e){var r;if(!e){this.currentUser=null;return}try{try{const{data:i,error:o}=await wt.rpc("ensure_user_exists",{user_email:((r=e.emailAddresses[0])==null?void 0:r.emailAddress)||"",user_first_name:e.firstName||"",user_last_name:e.lastName||"",clerk_user_id:e.id});o?console.error("Error ensuring user exists:",o):console.log(" User ensured in database:",i)}catch(i){console.warn("RPC function ensure_user_exists not available, skipping user creation:",i)}const{data:n,error:s}=await wt.from("users").select("*").eq("clerk_user_id",e.id).single();if(s){console.error("Error fetching user data:",s),this.currentUser={id:e.id,clerk_user_id:e.id};return}console.log(" User data fetched:",n),this.currentUser=n}catch(n){console.error("Error setting current user:",n)}}getCurrentUser(){return this.currentUser}async getUserProperties(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:r}=await wt.from("properties").select("*").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching properties:",r),r;return e||[]}async createProperty(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:r,error:n}=await wt.from("properties").insert([{...e,user_id:this.currentUser.id}]).select().single();if(n)throw console.error("Error creating property:",n),n;return r}async getUserCSVUploads(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:r}=await wt.from("csv_uploads").select("*").order("upload_date",{ascending:!1});if(r)throw console.error("Error fetching CSV uploads:",r),r;return e||[]}async createCSVUpload(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:r,error:n}=await wt.from("csv_uploads").insert([{...e,user_id:this.currentUser.id}]).select().single();if(n)throw console.error("Error creating CSV upload:",n),n;return r}async getCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:r,error:n}=await wt.from("csv_data").select("*").eq("csv_upload_id",e).order("row_index",{ascending:!0});if(n)throw console.error("Error fetching CSV data:",n),n;return r||[]}async saveCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const r=e.map(i=>({...i,user_id:this.currentUser.id})),{data:n,error:s}=await wt.from("csv_data").insert(r).select();if(s)throw console.error("Error saving CSV data:",s),s;return n||[]}async getUserBucketTerms(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:r}=await wt.from("user_bucket_terms").select("*");if(r)throw console.error("Error fetching bucket terms:",r),r;const n={};return e==null||e.forEach(s=>{n[s.bucket_key]||(n[s.bucket_key]=[]),n[s.bucket_key].push(s.term)}),n}async saveUserBucketTerms(e){if(!this.currentUser)throw new Error("User not authenticated");await wt.from("user_bucket_terms").delete().eq("user_id",this.currentUser.id);const r=Object.entries(e).flatMap(([n,s])=>s.map(i=>({user_id:this.currentUser.id,bucket_key:n,term:i})));if(r.length>0){const{error:n}=await wt.from("user_bucket_terms").insert(r);if(n)throw console.error("Error saving bucket terms:",n),n}}async getUserCustomBuckets(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:r}=await wt.from("user_custom_buckets").select("*");if(r)throw console.error("Error fetching custom buckets:",r),r;return e||[]}async saveUserCustomBuckets(e){if(!this.currentUser)throw new Error("User not authenticated");if(await wt.from("user_custom_buckets").delete().eq("user_id",this.currentUser.id),e.length>0){const r=e.map(s=>({...s,user_id:this.currentUser.id})),{error:n}=await wt.from("user_custom_buckets").insert(r);if(n)throw console.error("Error saving custom buckets:",n),n}}async createOrganization(e){if(!this.currentUser)throw new Error("User not authenticated");try{const r=ca.encryptOrganizationData({name:e}),{data:n,error:s}=await wt.from("organizations").insert([r]).select().single();if(s)throw console.error("Error creating organization:",s),s;const{error:i}=await wt.from("users").update({organization_id:n.id}).eq("id",this.currentUser.id);if(i)throw console.error("Error updating user with organization:",i),i;const o=ca.decryptOrganizationData(n);return this.currentUser.organization_id=n.id,this.currentUser.organizations=o,o}catch(r){throw console.error("Error creating organization:",r),r}}async getUserOrganization(){if(!this.currentUser)throw new Error("User not authenticated");if(this.currentUser.organization_id){const{data:e,error:r}=await wt.from("organizations").select("*").eq("id",this.currentUser.organization_id).single();return r?(console.error("Error fetching organization:",r),null):ca.decryptOrganizationData(e)}return null}hasOrganization(){return!!(this.currentUser&&this.currentUser.organization_id)}getOrganizationName(){return this.currentUser&&this.currentUser.organizations?this.currentUser.organizations.name:null}clearUser(){this.currentUser=null}}const or=new uT;class dT{constructor(){this.logs=[],this.config={enableLogging:!0,logLevel:"standard",retentionDays:90}}logDataAccess(e,r,n){if(!this.config.enableLogging)return;const s=or.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_ACCESS",resource:e,resourceId:r,details:this.sanitizeDetails(n),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logDataModification(e,r,n){if(!this.config.enableLogging)return;const s=or.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_MODIFICATION",resource:e,resourceId:r,details:this.sanitizeDetails(n),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logDataDeletion(e,r,n){if(!this.config.enableLogging)return;const s=or.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_DELETION",resource:e,resourceId:r,details:this.sanitizeDetails(n),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logAuthentication(e,r){if(!this.config.enableLogging)return;const n=or.getCurrentUser();if(!n)return;const s={userId:n.id,action:`AUTH_${e.toUpperCase()}`,resource:"USER_SESSION",details:this.sanitizeDetails(r),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}logEncryption(e,r,n){if(!this.config.enableLogging||this.config.logLevel==="minimal")return;const s=or.getCurrentUser();if(!s)return;const i={userId:s.id,action:`DATA_${e}`,resource:r,resourceId:n,timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}getUserAuditLogs(e,r=100){return this.logs.filter(n=>n.userId===e).sort((n,s)=>new Date(s.timestamp).getTime()-new Date(n.timestamp).getTime()).slice(0,r)}getResourceAuditLogs(e,r,n=100){return this.logs.filter(s=>s.resource===e&&(!r||s.resourceId===r)).sort((s,i)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,n)}getAllAuditLogs(e=1e3){return this.logs.sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime()).slice(0,e)}exportAuditLogs(e){const r=["Timestamp","User ID","Action","Resource","Resource ID","IP Address","User Agent"],n=e.map(s=>[s.timestamp,s.userId,s.action,s.resource,s.resourceId||"",s.ipAddress||"",s.userAgent||""]);return[r.join(","),...n.map(s=>s.join(","))].join(`
`)}cleanupOldLogs(){const e=new Date;e.setDate(e.getDate()-this.config.retentionDays),this.logs=this.logs.filter(r=>new Date(r.timestamp)>e)}addLog(e){this.logs.push(e);try{const r=JSON.parse(localStorage.getItem("auditLogs")||"[]");r.push(e);const n=r.sort((s,i)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,1e3);localStorage.setItem("auditLogs",JSON.stringify(n))}catch(r){console.warn("Failed to store audit log:",r)}}sanitizeDetails(e){if(!e)return e;const r={...e};return["password","token","key","secret","ssn","credit_card","bank_account"].forEach(s=>{r[s]&&(r[s]="[REDACTED]")}),r}getClientIP(){return"client-side"}loadStoredLogs(){try{const e=JSON.parse(localStorage.getItem("auditLogs")||"[]");this.logs=e}catch(e){console.warn("Failed to load stored audit logs:",e),this.logs=[]}}}const od=new dT;od.loadStoredLogs();const hT="https://iqwhrvtcrseidfyznqaf.supabase.co",fT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlxd2hydnRjcnNlaWRmeXpucWFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDg1NDQ0NjgsImV4cCI6MjAyNDEyMDQ2OH0.your_actual_anon_key_here",ct=Za(hT,fT,{auth:{persistSession:!1}});async function pT(t){ct&&await ct.from("import_runs").insert(t)}async function gT(t){ct&&await ct.from("import_run_events").insert(t)}async function mT(t,e,r="text/csv"){if(!ct)return{path:t};const n={NVM_RC_VERSION:"",VSCODE_CRASH_REPORTER_PROCESS_TYPE:"extensionHost",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",NVM_CD_FLAGS:"-q",TERM:"dumb",SHELL:"/bin/zsh",VSCODE_PROCESS_TITLE:"extension-host  [42-90]",TMPDIR:"/var/folders/kx/6hq4rc5n1pn_11nrxz84862c0000gn/T/",npm_config_global_prefix:"/usr/local",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",CURSOR_TRACE_ID:"0b62bb52c6654bd0b73cba7aaf44a83b",COLOR:"0",NO_COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",PNPM_HOME:"/Users/alexhorton/Library/pnpm",USER:"alexhorton",NVM_DIR:"/Users/alexhorton/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.XPWY3tpbXB/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",ELECTRON_RUN_AS_NODE:"1",PATH:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/node_modules/.bin:/Users/alexhorton/profi7vitelocalstorage/node_modules/.bin:/Users/alexhorton/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/alexhorton/.local/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/alexhorton/Library/pnpm:/Users/alexhorton/.local/bin:~/.local/bin:~/.local/bin",npm_package_json:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/package.json",LaunchInstanceID:"2C40AF3C-9FE0-4514-A21A-0BC8A386C68E",npm_config_userconfig:"/Users/alexhorton/.npmrc",npm_config_init_module:"/Users/alexhorton/.npm-init.js",__CFBundleIdentifier:"com.todesktop.230313mzl4w4u92",npm_command:"run-script",PWD:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",VSCODE_HANDLES_UNCAUGHT_ERRORS:"true",npm_lifecycle_event:"build",EDITOR:"vi",VSCODE_ESM_ENTRYPOINT:"vs/workbench/api/node/extensionHostProcess",npm_package_name:"propfi7vite",CURSOR_AGENT:"1",npm_config_npm_version:"10.1.0",XPC_FLAGS:"0x0",FORCE_COLOR:"0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",XPC_SERVICE_NAME:"0",SHLVL:"2",HOME:"/Users/alexhorton",VSCODE_NLS_CONFIG:'{"userLocale":"en-us","osLocale":"en-us","resolvedLanguage":"en","defaultMessagesFile":"/Applications/Cursor.app/Contents/Resources/app/out/nls.messages.json","locale":"en-us","availableLanguages":{}}',npm_config_cache:"/Users/alexhorton/.npm",LOGNAME:"alexhorton",npm_lifecycle_script:"tsc && vite build",COMPOSER_NO_INTERACTION:"1",VSCODE_IPC_HOOK:"/Users/alexhorton/Library/Application Support/Cursor/1.6.-main.sock",VSCODE_CODE_CACHE_PATH:"/Users/alexhorton/Library/Application Support/Cursor/CachedData/3ccce8f55d8cca49f6d28b491a844c699b8719a0",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",VSCODE_PID:"625",VSCODE_L10N_BUNDLE_LOCATION:"",VSCODE_CWD:"/",SECURITYSESSIONID:"186b1",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",_:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/node_modules/.bin/vite",NODE_ENV:"production"}.SUPABASE_UPLOADS_BUCKET||"uploads";return await ct.storage.from(n).upload(t,e,{upsert:!0,contentType:r}),{path:t}}async function _g(t,e){var r;if(!ct)return console.error("Supabase not available - cannot save data"),null;try{const n=ca.encryptCSVData(t),s=e?{...n,user_id:e}:n,{data:i,error:o}=await ct.from("csv_data").insert([s]).select();return o?(console.error("Error saving CSV data to Supabase:",o),null):(od.logDataModification("CSV_DATA",(r=i[0])==null?void 0:r.id,{fileName:t.file_name,fileType:t.file_type,recordCount:t.total_records}),console.log("CSV data saved to Supabase (encrypted)"),i[0])}catch(n){return console.error("Error saving CSV data:",n),null}}async function Pn(t){if(!ct)return console.error("Supabase not available - cannot load data"),[];try{let e=ct.from("csv_data").select("*").order("uploaded_at",{ascending:!1});t&&(e=e.eq("user_id",t));const{data:r,error:n}=await e;if(n)return console.error("Error fetching CSV data from Supabase:",n),[];const s=(r||[]).map(i=>ca.decryptCSVData(i));return od.logDataAccess("CSV_DATA",void 0,{recordCount:s.length,userId:t}),console.log("CSV data fetched from Supabase (decrypted):",s.length,"records"),s}catch(e){return console.error("Error fetching CSV data:",e),[]}}async function B2(t,e){if(!ct)return console.error("Supabase not available - cannot delete data"),null;try{let r=ct.from("csv_data").delete().eq("id",t);e&&(r=r.eq("user_id",e));const{error:n}=await r;return n?(console.error("Error deleting CSV data from Supabase:",n),null):(od.logDataDeletion("CSV_DATA",t,{userId:e}),console.log("CSV data deleted from Supabase:",t),!0)}catch(r){return console.error("Error deleting CSV data:",r),null}}async function Uf(t,e,r,n){if(!ct)return console.error("Supabase not available - cannot save AI learning"),null;try{const s={file_type:t,account_name:e,user_category:r,confidence_score:1,usage_count:1,updated_at:new Date().toISOString(),...n&&{user_id:n}},{error:i}=await ct.from("ai_learning").upsert(s,{onConflict:n?"file_type,account_name,user_id":"file_type,account_name"});return i?(console.error("Error saving AI learning:",i),null):(console.log(" AI learning saved:",{fileType:t,accountName:e,userCategory:r,userId:n}),!0)}catch(s){return console.error("Error saving AI learning:",s),null}}async function Sc(t,e){if(!ct)return console.error("Supabase not available - cannot get AI learning"),{};try{let r=ct.from("ai_learning").select("account_name, user_category, confidence_score, usage_count").eq("file_type",t);e&&(r=r.eq("user_id",e));const{data:n,error:s}=await r;if(s)return console.error("Error getting AI learning:",s),{};const i={};return n==null||n.forEach(o=>{i[o.account_name]=o.user_category}),console.log(" AI learning loaded for",t,":",Object.keys(i).length,"items"),i}catch(r){return console.error("Error getting AI learning:",r),{}}}async function xT(t,e,r){if(!ct)return console.error("Supabase not available - cannot update AI learning usage"),null;try{let n=ct.from("ai_learning").select("usage_count").eq("file_type",t).eq("account_name",e);r&&(n=n.eq("user_id",r));const{data:s,error:i}=await n.single();if(i)return console.error("Error fetching current usage count:",i),null;let o=ct.from("ai_learning").update({usage_count:((s==null?void 0:s.usage_count)||0)+1,updated_at:new Date().toISOString()}).eq("file_type",t).eq("account_name",e);r&&(o=o.eq("user_id",r));const{error:a}=await o;return a?(console.error("Error updating AI learning usage:",a),null):(console.log(" AI learning usage updated"),!0)}catch(n){return console.error("Error updating AI learning usage:",n),null}}async function L2(t){if(!ct)return console.error("Supabase not available - cannot migrate data"),{success:!1,error:"Supabase not available"};try{console.log(" Starting localStorage to Supabase migration...");const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(console.log(" Found",e.length,"CSVs in localStorage"),e.length===0)return console.log(" No localStorage data to migrate"),{success:!0,migrated:0};let r=0,n=0;for(const s of e)try{const i={file_name:s.fileName,file_type:s.fileType,uploaded_at:s.uploadedAt,total_records:s.totalRecords,account_categories:s.accountCategories,bucket_assignments:s.bucketAssignments,is_active:s.isActive,preview_data:s.previewData,user_id:t};await _g(i,t)?(r++,console.log(` Migrated: ${s.fileName}`)):(n++,console.error(` Failed to migrate: ${s.fileName}`))}catch(i){n++,console.error(` Error migrating ${s.fileName}:`,i)}return r>0&&(localStorage.removeItem("savedCSVs"),console.log(" Cleared localStorage after migration")),console.log(` Migration complete: ${r} migrated, ${n} errors`),{success:!0,migrated:r,errors:n,total:e.length}}catch(e){return console.error("Migration failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}const Hv=Object.freeze(Object.defineProperty({__proto__:null,deleteCSVData:B2,getAILearning:Sc,getCSVData:Pn,logImportEvent:gT,logImportRun:pT,migrateLocalStorageToSupabase:L2,saveAILearning:Uf,saveCSVData:_g,supabase:ct,updateAILearningUsage:xT,uploadRawCSV:mT},Symbol.toStringTag,{value:"Module"})),Cc={income_item:{id:"income_item",name:"Income Item",label:"Income Item",description:"Individual income line items (rent, fees, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Sum of individual income accounts"},income_total:{id:"income_total",name:"Income Total",label:"Income Total",description:"Total income calculations and summaries",category:"income",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Sum of all income accounts"},rental_income:{id:"rental_income",name:"Rental Income",label:"Rental Income",description:"Primary rental revenue from tenants",category:"income",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Sum of rental income accounts"},other_income:{id:"other_income",name:"Other Income",label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Sum of other income accounts"},total_income:{id:"total_income",name:"Total Income",label:"Total Income",description:"Sum of all income sources",category:"income",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Sum of all income accounts"},total_operating_income:{id:"total_operating_income",name:"Total Operating Income",label:"Operating Income",description:"Total operating revenue",category:"income",color:"bg-emerald-100 text-emerald-800",icon:"",emoji:"",calculation:"Sum of operating income accounts"},expense_item:{id:"expense_item",name:"Expense Item",label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",category:"expense",color:"bg-red-100 text-red-800",icon:"",emoji:"",calculation:"Sum of individual expense accounts"},expense_total:{id:"expense_total",name:"Expense Total",label:"Expense Total",description:"Total expense calculations and summaries",category:"expense",color:"bg-red-100 text-red-800",icon:"",emoji:"",calculation:"Sum of all expense accounts"},operating_expenses:{id:"operating_expenses",name:"Operating Expenses",label:"Operating Expenses",description:"Property operating costs",category:"expense",color:"bg-orange-100 text-orange-800",icon:"",emoji:"",calculation:"Sum of operating expense accounts"},maintenance_cost:{id:"maintenance_cost",name:"Maintenance Cost",label:"Maintenance",description:"Property maintenance and repair costs",category:"expense",color:"bg-yellow-100 text-yellow-800",icon:"",emoji:"",calculation:"Sum of maintenance accounts"},utilities_cost:{id:"utilities_cost",name:"Utilities Cost",label:"Utilities",description:"Utility costs (water, electric, gas, etc.)",category:"expense",color:"bg-blue-100 text-blue-800",icon:"",emoji:"",calculation:"Sum of utility accounts"},insurance_cost:{id:"insurance_cost",name:"Insurance Cost",label:"Insurance",description:"Property insurance costs",category:"expense",color:"bg-purple-100 text-purple-800",icon:"",emoji:"",calculation:"Sum of insurance accounts"},property_tax:{id:"property_tax",name:"Property Tax",label:"Property Tax",description:"Property tax expenses",category:"expense",color:"bg-indigo-100 text-indigo-800",icon:"",emoji:"",calculation:"Sum of property tax accounts"},cash_amount:{id:"cash_amount",name:"Cash Amount",label:"Cash Amount",description:"Cash and cash equivalents",category:"cash",color:"bg-purple-100 text-purple-800",icon:"",emoji:"",calculation:"Sum of cash accounts"},occupancy_rate:{id:"occupancy_rate",name:"Occupancy Rate",label:"Occupancy Rate",description:"Percentage of occupied units",category:"metric",color:"bg-blue-100 text-blue-800",icon:"",emoji:"",calculation:"Occupied Units / Total Units * 100"},net_operating_income:{id:"net_operating_income",name:"Net Operating Income",label:"Net Operating Income",description:"NOI - Net Operating Income",category:"metric",color:"bg-emerald-100 text-emerald-800",icon:"",emoji:"",calculation:"Total Operating Income - Total Operating Expenses"},net_income:{id:"net_income",name:"Net Income",label:"Net Income",description:"Total net income",category:"metric",color:"bg-green-100 text-green-800",icon:"",emoji:"",calculation:"Total Income - Total Expenses"}},kg=t=>Cc[t],Wv=t=>{const e=kg(t);return(e==null?void 0:e.emoji)||""},Ns=t=>{const e=kg(t);return(e==null?void 0:e.color)||"bg-gray-100 text-gray-800"},yT=({bucketId:t,size:e="md",showLabel:r=!1,showDescription:n=!1,className:s=""})=>{const i=kg(t);if(!i)return l.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[l.jsx("span",{className:"text-gray-400",children:""}),r&&l.jsx("span",{className:"text-sm text-gray-500",children:"Unknown Bucket"})]});const o={sm:"text-sm",md:"text-base",lg:"text-lg"},a={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return l.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[l.jsx("div",{className:`${a[e]} flex items-center justify-center`,children:l.jsx("span",{className:o[e],children:i.emoji})}),r&&l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:`text-sm font-medium ${i.color.split(" ")[1]}`,children:i.label}),n&&l.jsx("span",{className:"text-xs text-gray-500",children:i.description})]})]})},Sg=({chartId:t,chartName:e,className:r=""})=>{const{getChartBuckets:n,getPrimaryBucket:s}=require("../types/bucketTypes"),i=n(t),o=s(t);return l.jsxs("div",{className:`flex items-center justify-between mb-4 ${r}`,children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),l.jsx("div",{className:"flex items-center space-x-2",children:i.map(a=>l.jsx(yT,{bucketId:a,size:"sm",showLabel:!0,className:a===o?"ring-2 ring-blue-500 ring-opacity-50":""},a))})]})};si.register(no,so,qs,$r,Ju,Xu,Yu,Gu);const vT=({properties:t})=>{const[e,r]=T.useState([]),[n,s]=T.useState(!0),[i,o]=T.useState("all"),[a]=T.useState("revenue"),c=p=>{const x=[];return p.forEach(g=>{const v=g.file_name||g.fileName,y=g.file_type||g.fileType,m=g.account_categories||g.accountCategories,b=g.preview_data||g.previewData;console.log(` Processing CSV: ${v} (${y}) for chart data`),y==="cash_flow"?(console.log(" Processing CASH FLOW CSV for key metrics chart..."),[{name:"Total Income",type:"income"},{name:"Total Expense",type:"expense"},{name:"Net Operating Income",type:"net_income"}].forEach(C=>{const E=b.find(j=>{var _;return(((_=j.account_name)==null?void 0:_.trim().toLowerCase())||"").includes(C.name.toLowerCase())});E&&E.time_series&&(console.log(` Found key metric for chart: ${E.account_name}`),Object.entries(E.time_series).forEach(([j,w])=>{if(!(j.toLowerCase()==="total"||j.toLowerCase()==="sum"||j.toLowerCase()==="grand total")&&typeof w=="number"){let _=x.find(S=>S.date===j);_||(_={id:`${g.id}-${j}`,date:j,month:j,revenue:"0",occupancy_rate:"0",property_name:"Chico"},x.push(_)),C.type==="income"?_.revenue=w.toString():C.type==="expense"?_.revenue=(-w).toString():C.type==="net_income"&&(_.revenue=w.toString())}}))})):Object.entries(m).forEach(([k,C])=>{const E=Array.isArray(b)?b.find(j=>{var w;return((w=j.account_name)==null?void 0:w.trim())===k}):null;E&&E.time_series&&C==="income"&&Object.entries(E.time_series).forEach(([j,w])=>{if(!(j.toLowerCase()==="total"||j.toLowerCase()==="sum"||j.toLowerCase()==="grand total")&&typeof w=="number"&&w>0){let _=x.find(A=>A.date===j);_||(_={id:`${g.id}-${j}`,date:j,month:j,revenue:"0",occupancy_rate:"0",property_name:"Chico"},x.push(_));const S=parseFloat(_.revenue)||0;_.revenue=(S+w).toString()}})})}),x.sort((g,v)=>new Date(g.date).getTime()-new Date(v.date).getTime()),console.log(" Processed chart data:",x),x},u=T.useCallback(async()=>{try{if(s(!0),console.log("Loading chart data from ACTIVE CSVs only:",t),t.length>0){const p=t[0];console.log("Chico property:",p);let x=null;try{const g=await Pn();if(console.log(" Using Supabase data for chart:",g.length,"active CSVs"),console.log(" Active CSVs for chart data:",g.length),g.length>0){const v=c(g);console.log(" CSV chart data processed:",v),v&&v.length>0&&(x=v)}if(!x||x.length===0){console.log(" No active CSV data found, setting empty chart"),r([]),s(!1);return}r(x),s(!1)}catch(g){console.error("Error processing CSV chart data:",g),r([]),s(!1)}}else console.log(" No properties available for chart data"),r([]),s(!1)}catch(p){console.error("Error loading chart data:",p),r([]),s(!1)}},[t]);T.useEffect(()=>{t.length>0&&u()},[t,u]),T.useEffect(()=>{const p=()=>{console.log(" RevenueChart received data update event"),u()};return window.addEventListener("dataUpdated",p),()=>window.removeEventListener("dataUpdated",p)},[u]);const d=i==="all"?e:e.filter(p=>p.property_name===i),f={labels:d.map(p=>p.month||p.date),datasets:[{label:a==="revenue"?"Revenue":"Occupancy Rate",data:d.map(p=>parseFloat(a==="revenue"?p.revenue:p.occupancy_rate)),borderColor:a==="revenue"?"#0EA5E9":"#10B981",backgroundColor:a==="revenue"?"rgba(14, 165, 233, 0.1)":"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:a==="revenue"?"#0EA5E9":"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:a==="revenue"?"rgba(14, 165, 233, 0.5)":"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(p){return a==="revenue"?`Revenue: $${p.parsed.y.toLocaleString()}`:`Occupancy: ${p.parsed.y.toFixed(1)}%`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(p){return a==="revenue"?"$"+p/1e3+"k":p.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return n?l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[l.jsx(Sg,{chartId:"revenue-chart",chartName:a==="revenue"?"Revenue Trend":"Occupancy Rate",className:"mb-4"}),l.jsx("div",{className:"flex items-center justify-end mb-4",children:l.jsxs("select",{value:i,onChange:p=>o(p.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Properties"}),t.map(p=>l.jsx("option",{value:p.name,children:p.name},p.id))]})}),l.jsx("div",{className:"h-64",children:l.jsx(Zu,{data:f,options:h})})]})};si.register(no,so,qs,$r,Ju,Xu,Yu,Gu);const bT=({properties:t})=>{const[e,r]=T.useState([]),[n,s]=T.useState(!0),[i,o]=T.useState("all"),a=h=>{const p=[];return h.forEach(x=>{console.log(` Processing CSV: ${x.fileName} for occupancy chart data`);const g=95;["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach((y,m)=>{p.push({id:`${x.id}-${y}`,date:`2024-${String(m+1).padStart(2,"0")}-01`,month:`${y} 2024`,revenue:"0",occupancy_rate:g.toString(),property_name:"Chico",total_units:26,occupied_units:Math.round(26*(g/100))})})}),console.log(" Processed occupancy chart data:",p),p},c=T.useCallback(async()=>{try{if(s(!0),console.log("Loading occupancy chart data from ACTIVE CSVs only:",t),t.length>0){const h=t[0];console.log("Chico property:",h);let p=null;try{const x=await Pn();if(console.log(" Active CSVs for occupancy chart data:",x.length),x.length>0){const g=a(x);console.log(" CSV occupancy chart data processed:",g),g&&g.length>0&&(p=g)}if(!p||p.length===0){console.log(" No active CSV data found, setting empty occupancy chart"),r([]),s(!1);return}r(p),s(!1)}catch(x){console.error("Error processing CSV occupancy chart data:",x),r([]),s(!1)}}else console.log(" No properties available for occupancy chart data"),r([]),s(!1)}catch(h){console.error("Error loading occupancy chart data:",h),r([]),s(!1)}},[t]);T.useEffect(()=>{t.length>0&&c()},[t,c]),T.useEffect(()=>{const h=()=>{console.log(" OccupancyChart received data update event"),c()};return window.addEventListener("dataUpdated",h),()=>window.removeEventListener("dataUpdated",h)},[c]);const u=i==="all"?e:e.filter(h=>h.property_name===i),d={labels:u.map(h=>h.month||h.date),datasets:[{label:"Occupancy Rate",data:u.map(h=>parseFloat(h.occupancy_rate)),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(h){return`Occupancy: ${h.parsed.y.toFixed(1)}%`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(h){return h.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return n?l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})})}):l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[l.jsx(Sg,{chartId:"occupancy-chart",chartName:"Occupancy Rate",className:"mb-4"}),l.jsx("div",{className:"flex items-center justify-end mb-4",children:l.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"all",children:"All Properties"}),t.map(h=>l.jsx("option",{value:h.name,children:h.name},h.id))]})}),l.jsx("div",{className:"h-64",children:l.jsx(Zu,{data:d,options:f})})]})};si.register(no,so,qs,$r,Ju,Xu,Yu,Gu);const wT=({properties:t=[]})=>{const[e,r]=T.useState(["total_income","total_expense","net_operating_income"]),[n,s]=T.useState(!1),[i,o]=T.useState([]),[a,c]=T.useState(!0),u=(g,v)=>{const y=g.toLowerCase();switch(v){case"total_income":return y.includes("income")||y.includes("revenue")||y.includes("rent")||y.includes("rental")||y.includes("lease")||y.includes("gross")||y.includes("total operating income")||y.includes("monthly revenue");case"total_expense":return y.includes("expense")||y.includes("cost")||y.includes("maintenance")||y.includes("utilities")||y.includes("insurance")||y.includes("tax")||y.includes("operating expense")||y.includes("total operating expense");case"net_operating_income":return y.includes("net")||y.includes("operating")||y.includes("noi")||y.includes("net operating income");case"maintenance_cost":return y.includes("maintenance")||y.includes("repair")||y.includes("repairs");case"utilities_cost":return y.includes("utilities")||y.includes("electric")||y.includes("water")||y.includes("gas")||y.includes("power")||y.includes("sewer");case"insurance_cost":return y.includes("insurance")||y.includes("liability")||y.includes("property insurance");case"property_tax":return y.includes("tax")||y.includes("property")||y.includes("property tax");default:return!1}};T.useEffect(()=>{(async()=>{try{console.log(" Multi-Bucket Chart: Starting data load...");const v=or.getCurrentUser(),y=v==null?void 0:v.id;console.log(" Multi-Bucket Chart: Current user:",v);const m=await Pn(y);console.log(" Multi-Bucket Chart: Supabase data:",m),console.log(" Multi-Bucket Chart: Final data:",m),console.log(" Multi-Bucket Chart: Data structure sample:",m[0]),o(m||[])}catch(v){console.error("Error loading CSV data:",v),o([])}finally{c(!1)}})()},[]);const d=T.useMemo(()=>{if(console.log(" Multi-Bucket Chart: Processing chart data with",i.length,"CSV files"),!i.length)return console.log(" Multi-Bucket Chart: No CSV data available"),{labels:[],datasets:[]};const g=new Set;i.forEach((m,b)=>{console.log(` Multi-Bucket Chart: Processing CSV ${b}:`,m.file_name||m.fileName),m.preview_data&&Array.isArray(m.preview_data)?m.preview_data.forEach((k,C)=>{k.time_series?(console.log(` Multi-Bucket Chart: Row ${C} has time_series:`,Object.keys(k.time_series)),Object.keys(k.time_series).forEach(E=>{E.toLowerCase()!=="total"&&E.toLowerCase()!=="sum"&&E.toLowerCase()!=="grand total"&&g.add(E)})):console.log(` Multi-Bucket Chart: Row ${C} missing time_series:`,k)}):console.log(` Multi-Bucket Chart: CSV ${b} has non-array preview_data:`,typeof m.preview_data)});const v=Array.from(g).sort();if(console.log(" Multi-Bucket Chart: Found months:",v),v.length===0)return console.log(" Multi-Bucket Chart: No valid time series data found, returning empty chart"),{labels:[],datasets:[]};const y=e.map(m=>{const b=Cc[m];if(!b)return console.log(` Multi-Bucket Chart: Bucket ${m} not found in definitions`),null;console.log(` Multi-Bucket Chart: Processing bucket ${b.label} (${m})`);const k=[];return v.forEach(C=>{let E=0;i.forEach(j=>{j.preview_data&&Array.isArray(j.preview_data)&&j.preview_data.forEach(w=>{if(w.time_series&&w.time_series[C]){const _=w.account_name||w.accountName||"",S=parseFloat(w.time_series[C])||0;u(_,m)&&(console.log(` Multi-Bucket Chart: Match found - ${_} (${S}) for ${b.label} in ${C}`),E+=S)}})}),k.push(E)}),console.log(` Multi-Bucket Chart: ${b.label} data:`,k),{label:b.label,data:k,borderColor:Ns(m).includes("green")?"#10B981":Ns(m).includes("red")?"#EF4444":Ns(m).includes("blue")?"#3B82F6":"#6B7280",backgroundColor:Ns(m).includes("green")?"#10B98120":Ns(m).includes("red")?"#EF444420":Ns(m).includes("blue")?"#3B82F620":"#6B728020",fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6}}).filter(m=>m!==null);return{labels:v,datasets:y}},[i,e]),f=Object.entries(Cc).filter(([g])=>!e.includes(g)).map(([g,v])=>({id:g,label:v.label,icon:Wv(g),color:Ns(g)})),h=g=>{r(v=>[...v,g]),s(!1)},p=g=>{r(v=>v.filter(y=>y!==g))},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(g){const v=g.dataset.label||"",y=g.parsed.y;return`${v}: $${y.toLocaleString()}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"}},y:{display:!0,title:{display:!0,text:"Amount ($)"},ticks:{callback:function(g){return"$"+g.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return a?l.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):l.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Bucket Analysis"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>s(!n),className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[l.jsx(zu,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Bucket"}),l.jsx(Gp,{className:"w-4 h-4"})]}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-10",children:l.jsx("div",{className:"p-2",children:f.length>0?f.map(g=>l.jsxs("button",{onClick:()=>h(g.id),className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md transition-colors",children:[l.jsx("span",{className:"text-lg",children:g.icon}),l.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.label})]},g.id)):l.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"All buckets selected"})})})]})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:e.map(g=>{const v=Cc[g];return v?l.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[l.jsx("span",{className:"text-lg",children:Wv(g)}),l.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.label}),l.jsx("button",{onClick:()=>p(g),className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx(co,{className:"w-4 h-4"})})]},g):null})}),l.jsx("div",{className:"h-96",children:d.datasets.length>0?l.jsx(Zu,{data:d,options:x}):l.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{children:"No data available for selected buckets"}),l.jsx("p",{className:"text-sm mt-1",children:"Upload CSV data to see your financial trends"})]})})})]})})},_T="https://iqwhrvtcrseidfyznqaf.supabase.co",kT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlxd2hydnRjcnNlaWRmeXpucWFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDg1NDQ0NjgsImV4cCI6MjAyNDEyMDQ2OH0.your_actual_anon_key_here",rc=Za(_T,kT);class ST{async getProperties(){try{const{data:e,error:r}=await rc.from("properties").select("*").order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getProperties error:",e),{success:!1,error:e.message}}}async getPropertyData(e){try{const{data:r,error:n}=await rc.from("property_data").select("*").eq("property_id",e).order("Date",{ascending:!0});if(n)throw n;return{success:!0,data:r||[]}}catch(r){return console.error("Supabase getPropertyData error:",r),{success:!1,error:r.message}}}async getPropertiesWithData(){try{const{data:e,error:r}=await rc.from("properties").select(`
          *,
          property_data (*)
        `).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getPropertiesWithData error:",e),{success:!1,error:e.message}}}async getFinancialSummary(e,r){try{let n=rc.from("property_data").select("*");e&&(n=n.gte("Date",e)),r&&(n=n.lte("Date",r));const{data:s,error:i}=await n.order("Date",{ascending:!0});if(i)throw i;return{success:!0,data:{totalRevenue:(s==null?void 0:s.reduce((a,c)=>a+(parseFloat(c["Monthly Revenue"])||0),0))||0,totalExpenses:(s==null?void 0:s.reduce((a,c)=>a+(parseFloat(c["Maintenance Cost"])||0)+(parseFloat(c["Utilities Cost"])||0)+(parseFloat(c["Insurance Cost"])||0)+(parseFloat(c["Property Tax"])||0)+(parseFloat(c["Other Expenses"])||0),0))||0,totalNetIncome:(s==null?void 0:s.reduce((a,c)=>a+(parseFloat(c["Net Income"])||0),0))||0,avgOccupancy:(s==null?void 0:s.reduce((a,c)=>a+(parseFloat(c["Occupancy Rate"])||0),0))/((s==null?void 0:s.length)||1)||0,recordCount:(s==null?void 0:s.length)||0}}}catch(n){return console.error("Supabase getFinancialSummary error:",n),{success:!1,error:n.message}}}}const nc=new ST,CT="https://iqwhrvtcrseidfyznqaf.supabase.co/rest/v1",i0="http://localhost:5000/api",xi="http://localhost:5000/api";class jT{async request(e,r={}){const n=`${xi}${e}`,s={headers:{"Content-Type":"application/json",...r.headers},...r};try{if(xi.includes("localhost:5000")||xi.includes("localhost:5001")||xi.includes("localhost:5002"))throw console.warn("Backend server not available, skipping API call to:",e),new Error("Backend server not available - using Supabase directly");const i=new AbortController,o=setTimeout(()=>i.abort(),1e4),a=await fetch(n,{...s,signal:i.signal});if(clearTimeout(o),!a.ok){const c=await a.json().catch(()=>({error:"Network error"}));throw new Error(c.error||`HTTP ${a.status}`)}return await a.json()}catch(i){throw console.error("API request failed:",i),i.name==="AbortError"?new Error("Request timeout - server may be unavailable"):i.message.includes("fetch")?new Error("Network error - unable to connect to server"):(i.message.includes("Backend server not available"),i)}}async getProperties(){try{return await this.request("/properties")}catch{return console.log(" Backend unavailable, using Supabase directly"),await nc.getProperties()}}async getProperty(e){return this.request(`/properties/${e}`)}async getPropertiesWithData(){try{return await this.request("/properties-with-data")}catch{return console.log(" Backend unavailable, using Supabase directly"),await nc.getPropertiesWithData()}}async getFinancialSummary(e,r){try{const n=new URLSearchParams;e&&n.append("startDate",e),r&&n.append("endDate",r);const s=n.toString();return await this.request(`/financial-summary${s?`?${s}`:""}`)}catch{return console.log(" Backend unavailable, using Supabase directly"),await nc.getFinancialSummary(e,r)}}async getPropertyData(e,r=1,n=50){try{return await this.request(`/properties/${e}/data?page=${r}&limit=${n}`)}catch{return console.log(" Backend unavailable, using Supabase directly"),await nc.getPropertyData(e)}}async getPropertyAggregated(e,r,n){const s=new URLSearchParams;r&&s.append("startDate",r),n&&s.append("endDate",n);const i=s.toString();return this.request(`/properties/${e}/aggregated${i?`?${i}`:""}`)}async uploadCSV(e,r){const n=new FormData;n.append("csvFile",e),n.append("propertyId",r);const s=`${xi}/upload-csv`;try{const i=await fetch(s,{method:"POST",body:n});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("CSV upload failed:",i),i}}async processCSVLocal(e,r){const n=new FormData;n.append("file",e),r&&n.append("propertyName",r);const s=`${i0}/api/process-csv-local`;try{const i=await fetch(s,{method:"POST",body:n});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("Local CSV processing failed:",i),i}}async saveLocalData(e,r,n){const s=`${i0}/save-processed-data`;try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,propertyName:r,source:n,timestamp:new Date().toISOString()})});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("Save data failed:",i),i}}async checkBackendStatus(){const e={supabase:!1,local:!1};try{const r=await fetch(`${CT}/health`,{method:"GET",signal:AbortSignal.timeout(2e3)});e.supabase=r.ok}catch{console.log("Supabase backend not available")}try{const r=await fetch(`${i0}/processed-data`,{method:"GET",signal:AbortSignal.timeout(2e3)});e.local=r.ok}catch{console.log("Local backend not available")}return e}async validateCSV(e,r){const n=new FormData;n.append("csvFile",e),r&&n.append("propertyName",r);const s=`${xi}/validate-csv`;try{const i=await fetch(s,{method:"POST",body:n});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("CSV validation failed:",i),i}}async getChartData(e,r,n){const s=new URLSearchParams;e&&s.append("propertyId",e),r&&s.append("startDate",r),n&&s.append("endDate",n);const i=s.toString();return this.request(`/chart-data${i?`?${i}`:""}`)}async getMonthlyData(e){const r=new URLSearchParams;e&&r.append("propertyId",e);const n=r.toString();return this.request(`/monthly-data${n?`?${n}`:""}`)}async getUploadHistory(e){const r=new URLSearchParams;e&&r.append("propertyId",e);const n=r.toString();return this.request(`/upload-history${n?`?${n}`:""}`)}async addProperty(e){return this.request("/properties",{method:"POST",body:JSON.stringify(e)})}async updateProperty(e,r){return this.request(`/properties/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteProperty(e){return this.request(`/properties/${e}`,{method:"DELETE"})}async deleteUpload(e){return this.request(`/uploads/${e}`,{method:"DELETE"})}async deletePropertyDataByUpload(e){return this.request(`/uploads/${e}/data`,{method:"DELETE"})}async reprocessUpload(e){return this.request(`/uploads/${e}/reprocess`,{method:"POST"})}async getHealth(){return this.request("/health")}}const nr=new jT;class ET{constructor(){this.properties=new Map,this.propertyData=new Map,this.lastSync=null}async initialize(){try{await this.loadFromLocalStorage(),await this.syncWithSupabase(),await this.loadPropertyDataFromSupabase(),console.log(" Unified Property Service initialized:",{propertiesCount:this.properties.size,lastSync:this.lastSync})}catch(e){console.error("Failed to initialize unified property service:",e)}}getAllProperties(){return Array.from(this.properties.values()).sort((e,r)=>e.name.localeCompare(r.name))}getProperty(e){return this.properties.get(e)}getPropertyByName(e){return Array.from(this.properties.values()).find(r=>r.name.toLowerCase()===e.toLowerCase())}async addProperty(e){const r=this.getPropertyByName(e.name);if(r){const n={...r,...e,updatedAt:new Date().toISOString(),source:"unified"};return this.properties.set(r.id,n),await this.saveToLocalStorage(),console.log(" Updated existing property:",n.name),n}else{const n={id:this.generateId(),...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),source:"unified"};return this.properties.set(n.id,n),await this.saveToLocalStorage(),console.log(" Created new property:",n.name),n}}async addPropertyData(e){const r=e.propertyId;this.propertyData.has(r)||this.propertyData.set(r,[]);const n={...e,id:this.generateId(),timestamp:new Date().toISOString()},s=this.propertyData.get(r);s.some(o=>o.date===n.date&&o.accountName===n.accountName&&o.month===n.month)?console.log(" Duplicate data skipped:",{property:e.propertyName,account:e.accountName,month:e.month}):(s.push(n),await this.saveToLocalStorage(),console.log(" Added property data:",{property:e.propertyName,account:e.accountName,month:e.month,amount:e.amount}))}getPropertyData(e){return this.propertyData.get(e)||[]}getAllPropertyData(){const e=[],r=Array.from(this.propertyData.values());for(const n of r)e.push(...n);return e}async syncWithSupabase(){try{const e=await nr.getProperties();if(e.success&&e.data){for(const r of e.data)if(!this.getPropertyByName(r.name)){const s={...r,source:"supabase"};this.properties.set(r.id,s)}this.lastSync=new Date,await this.saveToLocalStorage(),console.log(" Synced with Supabase backend")}}catch{console.log(" Supabase sync failed (backend may be unavailable)")}}async loadPropertyDataFromSupabase(){try{const e=this.getAllProperties();for(const r of e)if(r.source==="supabase"){const n=await nr.getPropertyData(r.id);n.success&&n.data&&(this.propertyData.set(r.id,n.data),console.log(` Loaded ${n.data.length} data records for ${r.name}`))}await this.saveToLocalStorage(),console.log(" Property data loaded from Supabase")}catch{console.log(" Failed to load property data from Supabase")}}async saveToLocalStorage(){try{const e={properties:Array.from(this.properties.entries()),propertyData:Array.from(this.propertyData.entries()),lastSync:this.lastSync};localStorage.setItem("unified-properties",JSON.stringify(e))}catch(e){console.error("Failed to save to local storage:",e)}}async loadFromLocalStorage(){try{const e=localStorage.getItem("unified-properties");if(e){const r=JSON.parse(e);r.properties&&(this.properties=new Map(r.properties)),r.propertyData&&(this.propertyData=new Map(r.propertyData)),r.lastSync&&(this.lastSync=new Date(r.lastSync)),console.log(" Loaded from local storage:",{properties:this.properties.size,propertyData:Array.from(this.propertyData.values()).flat().length})}}catch(e){console.error("Failed to load from local storage:",e)}}generateId(){return`prop-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async clearAllData(){this.properties.clear(),this.propertyData.clear(),this.lastSync=null,localStorage.removeItem("unified-properties"),console.log(" Cleared all unified property data")}getStatistics(){const e={},r=Array.from(this.properties.values());for(const n of r)e[n.source]=(e[n.source]||0)+1;return{totalProperties:this.properties.size,totalDataRecords:Array.from(this.propertyData.values()).flat().length,lastSync:this.lastSync,propertiesBySource:e}}}const Rs=new ET,NT=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(null),[s,i]=T.useState(!0),[o,a]=T.useState(null),c=T.useCallback(async()=>{try{const _=(await Pn()).reduce((A,N)=>(A[N.file_name]||(A[N.file_name]=[]),A[N.file_name].push(N),A),{}),S=Object.entries(_).filter(([A,N])=>N.length>1);if(S.length>0){console.warn(" DUPLICATE CSVs detected:",S);const A=S.map(([F])=>F).join(", ");window.confirm(` DUPLICATE DATA DETECTED!

The following CSV files have been uploaded multiple times:
 ${A}

This is causing inflated dashboard values (e.g., $600k instead of $400k).

Would you like to automatically remove the older duplicates and keep only the most recent uploads?

Click "OK" to clean up duplicates, or "Cancel" to handle manually in CSV Management.`)&&await d(S)}}catch(w){console.error("Error checking for duplicate CSVs:",w)}},[]),u=T.useCallback(async()=>{try{i(!0),a(null),console.log(" Loading dashboard data from unified system...");const w=Rs.getAllProperties();console.log(" Unified properties:",w),w&&w.length>0&&(e(w),console.log(" Properties loaded:",w.length)),console.log(" Loading financial data from active CSVs only...");const _=await h();if(console.log(" CSV Metrics calculated:",_),_.totalIncome>0||_.totalExpense>0){const S=_.totalIncome,A=_.totalExpense,N=S-A,F=_.recordCount;console.log(" Financial Summary from CSVs:"),console.log(`  Total Revenue: $${S.toLocaleString()}`),console.log(`  Total Expenses: $${A.toLocaleString()}`),console.log(`  Net Income: $${N.toLocaleString()}`),console.log(`  Total Records: ${F}`),n({totalRevenue:S,totalExpenses:A,totalNetIncome:N,totalRecords:F,dataSource:"csv"})}else console.log(" No active CSV data found. Dashboard will show empty state."),n({totalRevenue:0,totalExpenses:0,totalNetIncome:0,totalRecords:0,dataSource:"none"})}catch(w){console.error("Dashboard: Failed to load data:",w),a("Failed to load dashboard data")}finally{i(!1)}},[]);T.useEffect(()=>{f(),u(),c();const w=_=>{var S;console.log(" Dashboard received data update event:",_.detail),((S=_.detail)==null?void 0:S.action)==="csv_deleted"&&(console.log(" CSV deletion detected, refreshing dashboard data..."),console.log(" Deleted CSV:",_.detail.fileName)),u()};return window.addEventListener("dataUpdated",w),()=>{window.removeEventListener("dataUpdated",w)}},[c,u]);const d=async w=>{try{let _=0;for(const[,S]of w){const N=S.sort((F,M)=>new Date(M.uploaded_at).getTime()-new Date(F.uploaded_at).getTime()).slice(1);for(const F of N)await B2(F.id)&&(_++,console.log(` Removed duplicate CSV: ${F.file_name} (${F.uploaded_at})`))}window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"duplicates_cleaned",removedCount:_}})),alert(` Cleaned up ${_} duplicate CSV(s). Dashboard values should now be accurate.`)}catch(_){console.error("Error cleaning up duplicates:",_),alert("Failed to clean up duplicates. Please handle manually in CSV Management.")}},f=async()=>{try{const w=await L2();w.success&&w.migrated&&w.migrated>0&&console.log(` Migrated ${w.migrated} CSVs from localStorage to Supabase`),await Rs.initialize(),console.log(" Dashboard: Unified service initialized")}catch(w){console.error("Dashboard: Failed to initialize unified service:",w)}},h=async()=>{try{const w=await Pn();console.log(" Using Supabase data:",w.length,"active CSVs");let _=0,S=0,A=0;console.log(" Active CSVs:",w.map(G=>({fileName:G.file_name,isActive:G.is_active,totalRecords:G.total_records})));const N=w.map(G=>G.file_name),F=N.filter((G,W)=>N.indexOf(G)!==W);F.length>0&&console.warn(" DUPLICATE CSVs detected:",F),w.forEach(G=>{const W=G.total_records,z=G.account_categories,$=G.preview_data,R=G.file_type;if(console.log(` Processing CSV: ${G.file_name} (${W} records)`),console.log(" CSV Preview Data Sample:",Array.isArray($)?$.slice(0,3):$),R==="cash_flow"){console.log(" Processing CASH FLOW CSV - Looking for KEY METRICS for dashboard...");const O=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let I=!1;O.forEach(D=>{const B=Array.isArray($)?$.find(X=>{var ee;return(((ee=X.account_name)==null?void 0:ee.trim().toLowerCase())||"").includes(D.name.toLowerCase())}):null;if(B&&B.time_series){I=!0,console.log(` FOUND KEY METRIC: ${B.account_name} (${D.type})`),console.log(" Time Series Data:",B.time_series);const X=Object.entries(B.time_series).filter(([J,ee])=>J.toLowerCase()!=="total"&&J.toLowerCase()!=="sum"&&J.toLowerCase()!=="grand total"&&typeof ee=="number").map(([,J])=>J);if(X.length>0){const J=X.reduce((ee,re)=>ee+re,0);D.type==="income"?(_+=J,console.log(`   ${B.account_name}: Total Income = $${J.toLocaleString()}`)):D.type==="expense"?(S+=J,console.log(`   ${B.account_name}: Total Expense = $${J.toLocaleString()}`)):D.type==="net_income"&&console.log(`   ${B.account_name}: Net Operating Income = $${J.toLocaleString()}`)}}}),I?(console.log(" Using KEY METRICS for dashboard population"),console.log(` Total Income: $${_.toLocaleString()}`),console.log(` Total Expense: $${S.toLocaleString()}`),console.log(` Net Operating Income: $${(_-S).toLocaleString()}`)):(console.log(" Key metrics not found, falling back to individual account categorization..."),Object.entries(z).forEach(([D,B])=>{const X=$.find(J=>{var ee;return((ee=J.account_name)==null?void 0:ee.trim())===D});if(X&&X.time_series){console.log(` Account: ${D} (${B})`);const J=Object.entries(X.time_series).filter(([ee,re])=>ee.toLowerCase()!=="total"&&ee.toLowerCase()!=="sum"&&ee.toLowerCase()!=="grand total"&&typeof re=="number").map(([,ee])=>ee);if(J.length>0){const ee=J.reduce((re,de)=>re+de,0);B==="income"?(_+=ee,console.log(`   ${D}: Income = $${ee.toLocaleString()}`)):B==="expense"&&(S+=ee,console.log(`   ${D}: Expense = $${ee.toLocaleString()}`))}}}))}else Object.entries(z).forEach(([O,I])=>{const D=$.find(B=>{var X;return((X=B.account_name)==null?void 0:X.trim())===O});if(D&&D.time_series){console.log(` Account: ${O} (${I})`),console.log(" Time Series Data:",D.time_series);const B=Object.entries(D.time_series).filter(([X,J])=>X.toLowerCase()!=="total"&&X.toLowerCase()!=="sum"&&X.toLowerCase()!=="grand total"&&typeof J=="number"&&J!==0).map(([,X])=>X);if(B.length>0){let X=0;R==="balance_sheet"?(X=B[B.length-1],console.log(`   ${O} (${I}): Latest value = $${X.toLocaleString()}`)):R==="rent_roll"?(X=B.reduce((J,ee)=>J+ee,0)/B.length,console.log(`   ${O} (${I}): Monthly average = $${X.toLocaleString()}`)):(X=B.reduce((J,ee)=>J+ee,0)/B.length,console.log(`   ${O} (${I}): Monthly average = $${X.toLocaleString()}`)),I==="income"||I==="revenue"?_+=X:I==="expense"?S+=X:I==="asset"?console.log(`   Asset account: ${O} = $${X.toLocaleString()}`):I==="liability"?console.log(`   Liability account: ${O} = $${X.toLocaleString()}`):I==="equity"&&console.log(`   Equity account: ${O} = $${X.toLocaleString()}`)}}});A+=G.totalRecords});const M=w.some(G=>(G.file_type||G.fileType)==="cash_flow");console.log(" Cash Flow Detection Debug:"),console.log("  Active CSVs:",w.length),console.log("  CSV file types:",w.map(G=>G.file_type||G.fileType)),console.log("  Has cash flow:",M);const K={totalIncome:_,totalExpense:S,netOperatingIncome:_-S,recordCount:A};return console.log(" Final CSV metrics:",K),console.log(" Has cash flow data:",M),K}catch(w){return console.error("Error calculating CSV metrics:",w),{totalIncome:0,totalExpense:0,netOperatingIncome:0,recordCount:0}}},p=t.length,x=t.reduce((w,_)=>w+(_.total_units||0),0),g=parseFloat((r==null?void 0:r.avgOccupancy)||(r==null?void 0:r.avg_occupancy_rate)||"0"),v=parseFloat((r==null?void 0:r.totalRevenue)||(r==null?void 0:r.total_revenue)||"0"),y=parseFloat((r==null?void 0:r.totalExpenses)||(r==null?void 0:r.total_expenses)||"0"),m=parseFloat((r==null?void 0:r.totalNetIncome)||(r==null?void 0:r.total_net_income)||"0"),b=parseInt((r==null?void 0:r.recordCount)||(r==null?void 0:r.total_records)||"0");console.log(" Dashboard calculated values:"),console.log("  - totalProperties:",p),console.log("  - totalUnits:",x),console.log("  - avgOccupancy:",g),console.log("  - totalRevenue:",v),console.log("  - totalExpenses:",y),console.log("  - totalNetIncome:",m),console.log("  - totalRecords:",b);const k=b>0?v/b:0,C=v>0?m/v*100:0,E=[{title:"Total Properties",value:p.toString(),change:p>0?"Active":"None",changeType:p>0?"positive":"neutral",icon:Nr,color:"blue"},{title:"Total Revenue",value:`$${v.toLocaleString()}`,change:`$${k.toLocaleString()}/month avg`,changeType:"positive",icon:en,color:"green"},{title:"Net Income",value:`$${m.toLocaleString()}`,change:`${C.toFixed(1)}% margin`,changeType:"positive",icon:ds,color:"purple"},{title:"Occupancy Rate",value:`${g.toFixed(1)}%`,change:`${x} total units`,changeType:"positive",icon:tn,color:"orange"}],j=[{id:1,type:"data",message:`${b} CSV records uploaded for Chico property`,time:"Current",icon:Zi},{id:2,type:"property",message:`${p} active property in system`,time:"Current",icon:Nr},{id:3,type:"revenue",message:`Total revenue: $${v.toLocaleString()}`,time:"Current",icon:en},{id:4,type:"income",message:`Net income: $${m.toLocaleString()} (${C.toFixed(1)}% margin)`,time:"Current",icon:ds},{id:5,type:"occupancy",message:`Average occupancy: ${g.toFixed(1)}%`,time:"Current",icon:tn}];return s?l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Welcome back! Here's what's happening with your properties."}),o&&l.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center",children:[l.jsx(Qs,{className:"w-4 h-4 mr-1"}),o]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:u,disabled:s,className:"btn-secondary flex items-center",children:[l.jsx(Da,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),l.jsx("button",{className:"btn-secondary",children:"Export"}),l.jsx("button",{className:"btn-primary",children:"Add Property"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map((w,_)=>{const S=w.icon;return l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:w.title}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:w.value}),l.jsxs("p",{className:`text-sm mt-1 ${w.changeType==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[w.change," from last month"]})]}),l.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":w.color==="green"?"bg-green-100 dark:bg-green-900/20":w.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"}`,children:l.jsx(S,{className:`w-6 h-6 ${w.color==="blue"?"text-blue-600 dark:text-blue-400":w.color==="green"?"text-green-600 dark:text-green-400":w.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})})]})},_)})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Trend"}),l.jsx(vT,{properties:t})]}),l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Occupancy Rate"}),l.jsx(bT,{properties:t})]})]}),l.jsx("div",{className:"mt-6",children:l.jsx(wT,{properties:t})}),l.jsx("div",{className:"grid grid-cols-1 gap-6",children:l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),l.jsx("div",{className:"space-y-4",children:j.map(w=>{const _=w.icon;return l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(_,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:w.message}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:w.time})]})]},w.id)})})]})})]})},qv=()=>{const[t,e]=T.useState(""),[r,n]=T.useState("all"),[s,i]=T.useState([]),[o,a]=T.useState(!0),[c,u]=T.useState(null);T.useEffect(()=>{d();const h=()=>{d()};return window.addEventListener("dataUpdated",h),()=>{window.removeEventListener("dataUpdated",h)}},[]);const d=async()=>{try{a(!0),u(null);let h=[];try{const p=await fetch("http://localhost:5002/api/processed-data");if(p.ok){const x=await p.json();if(console.log(" Local properties data loaded:",x),x.success&&x.data){const g=new Set;Object.keys(x.data).forEach(y=>{g.add(y)});const v=Array.from(g).map(y=>({id:`local-${y.toLowerCase()}`,name:y,address:"Local Data Source",type:"Apartment Complex",total_units:26,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));h=[...v],console.log(" Local properties converted:",v)}}}catch{console.log(" Local properties not available, trying API...")}if(h.length===0){const p=await nr.getProperties();if(p.success&&p.data)h=p.data,console.log(" Properties loaded from API:",p.data);else{u("Failed to load properties"),i([]);return}}i(h)}catch(h){console.error("Error loading properties:",h),u("Failed to load properties"),i([])}finally{a(!1)}},f=s.filter(h=>{const p=h.name.toLowerCase().includes(t.toLowerCase())||h.address.toLowerCase().includes(t.toLowerCase()),x=r==="all"||h.type===r;return p&&x});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Properties"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage and monitor all your properties"})]}),l.jsxs("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[l.jsx(zu,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Property"})]})]}),l.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(e_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),l.jsx("input",{type:"text",placeholder:"Search properties...",value:t,onChange:h=>e(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zw,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsxs("select",{value:r,onChange:h=>n(h.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"Apartment Complex",children:"Apartment Complex"}),l.jsx("option",{value:"Townhouse Complex",children:"Townhouse Complex"}),l.jsx("option",{value:"Single Family",children:"Single Family"}),l.jsx("option",{value:"Condo Complex",children:"Condo Complex"})]})]})]})}),o&&l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading properties..."})]})}),c&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading properties"}),l.jsx("div",{className:"mt-2 text-sm text-red-700",children:l.jsx("p",{children:c})}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{onClick:d,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Try again"})})]})]})}),!o&&!c&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(h=>l.jsxs("div",{className:"card hover:shadow-lg transition-shadow duration-200 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.name}),l.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm mt-1",children:[l.jsx(Jp,{className:"w-4 h-4 mr-1"}),h.address]})]}),l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300",children:"Active"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[l.jsx(Nr,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:h.type})]}),l.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[h.total_units," units"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[l.jsx(tn,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:"Occupied"})]}),l.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[h.total_units," units"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[l.jsx(en,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:"Monthly Revenue"})]}),l.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Data"})]})]}),l.jsxs("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[l.jsxs("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[l.jsx(Pa,{className:"w-4 h-4"}),l.jsx("span",{children:"View"})]}),l.jsxs("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[l.jsx(ru,{className:"w-4 h-4"}),l.jsx("span",{children:"Edit"})]}),l.jsx("button",{className:"px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:l.jsx(Uu,{className:"w-4 h-4"})})]})]},h.id))}),!o&&!c&&f.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),l.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})},AT="https://iqwhrvtcrseidfyznqaf.supabase.co",PT="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",DT=Za(AT,PT,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"},global:{headers:{"X-Client-Info":"horton-properties-ai-parser"}}}),nt={CSV_FILES:"csv_files_ai",PARSED_DATA:"parsed_data_ai",HEADER_MATCHES:"header_matches_ai",PROPERTIES:"properties_ai",PROCESSING_JOBS:"processing_jobs_ai",USER_SESSIONS:"user_sessions_ai"};class TT{constructor(){this.supabase=DT}async uploadCSVFile(e,r,n){try{const s=`${Date.now()}-${e.name}`,{error:i}=await this.supabase.storage.from("csv-files-ai").upload(s,e);if(i)return{success:!1,error:i.message};const o={file_name:e.name,file_size:e.size,property_id:r,property_name:n,upload_status:"uploading",processing_mode:"ai_parser",format_detected:"traditional",ai_confidence:0},{data:a,error:c}=await this.supabase.from(nt.CSV_FILES).insert(o).select().single();return c?{success:!1,error:c.message}:{success:!0,data:a}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async getCSVFiles(e){try{let r=this.supabase.from(nt.CSV_FILES).select("*").order("created_at",{ascending:!1});e&&(r=r.eq("property_id",e));const{data:n,error:s}=await r;return s?{success:!1,error:s.message}:{success:!0,data:n||[]}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async saveParsedData(e,r){try{const n=r.map(o=>({csv_file_id:e,account_name:o.account_name,period:o.period,amount:o.amount,amount_raw:o.amount_raw,category:o.category,confidence_score:o.confidence_score||.8,bucket_assignment:o.bucket_assignment||"unknown"})),{data:s,error:i}=await this.supabase.from(nt.PARSED_DATA).insert(n).select();return i?{success:!1,error:i.message}:{success:!0,data:s||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async saveHeaderMatches(e,r){try{const n=r.map(o=>({csv_file_id:e,original_header:o.originalHeader,suggested_bucket:o.suggestedBucket,confidence_score:o.confidenceScore,alternative_buckets:o.alternativeBuckets,user_confirmed:!1})),{data:s,error:i}=await this.supabase.from(nt.HEADER_MATCHES).insert(n).select();return i?{success:!1,error:i.message}:{success:!0,data:s||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateHeaderMatchConfirmation(e,r,n){try{const s={user_confirmed:r};n&&(s.user_override=n);const{error:i}=await this.supabase.from(nt.HEADER_MATCHES).update(s).eq("id",e);return i?{success:!1,error:i.message}:{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async createProperty(e){try{const{data:r,error:n}=await this.supabase.from(nt.PROPERTIES).insert({...e,ai_parser_enabled:!0}).select().single();return n?{success:!1,error:n.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getProperties(){try{const{data:e,error:r}=await this.supabase.from(nt.PROPERTIES).select("*").eq("ai_parser_enabled",!0).order("created_at",{ascending:!1});return r?{success:!1,error:r.message}:{success:!0,data:e||[]}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async createProcessingJob(e,r){try{const{data:n,error:s}=await this.supabase.from(nt.PROCESSING_JOBS).insert({csv_file_id:e,status:"processing",progress:0,ai_analysis:r}).select().single();return s?{success:!1,error:s.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProcessingJob(e,r){try{const{error:n}=await this.supabase.from(nt.PROCESSING_JOBS).update(r).eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteCSVFile(e){try{await this.supabase.from(nt.PARSED_DATA).delete().eq("csv_file_id",e),await this.supabase.from(nt.HEADER_MATCHES).delete().eq("csv_file_id",e),await this.supabase.from(nt.PROCESSING_JOBS).delete().eq("csv_file_id",e);const{error:r}=await this.supabase.from(nt.CSV_FILES).delete().eq("id",e);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateCSVFile(e,r){try{const{data:n,error:s}=await this.supabase.from(nt.CSV_FILES).update(r).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProperty(e,r){try{const{data:n,error:s}=await this.supabase.from(nt.PROPERTIES).update(r).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteProperty(e){try{const r=await this.supabase.from(nt.CSV_FILES).select("id").eq("property_id",e);if(r.data)for(const s of r.data)await this.deleteCSVFile(s.id);const{error:n}=await this.supabase.from(nt.PROPERTIES).delete().eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getHeaderMatches(e){try{const{data:r,error:n}=await this.supabase.from(nt.HEADER_MATCHES).select("*").eq("csv_file_id",e).order("confidence_score",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:r||[]}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateHeaderMatch(e,r){try{const{data:n,error:s}=await this.supabase.from(nt.HEADER_MATCHES).update(r).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getParsedData(e){try{const{data:r,error:n}=await this.supabase.from(nt.PARSED_DATA).select("*").eq("csv_file_id",e).order("created_at",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:r||[]}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateParsedData(e,r){try{const{data:n,error:s}=await this.supabase.from(nt.PARSED_DATA).update(r).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async healthCheck(){try{const{error:e}=await this.supabase.from(nt.PROPERTIES).select("count").limit(1);return e?{success:!1,error:e.message}:{success:!0,status:"healthy"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}const sc=new TT,OT=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!1),[s,i]=T.useState(""),[o,a]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState(null),[h,p]=T.useState({name:"",address:"",type:"Apartment",total_units:0}),[x,g]=T.useState(null),[v,y]=T.useState(null);T.useEffect(()=>{m()},[]);const m=async()=>{n(!0);try{const _=await sc.getProperties();_.success&&_.data?e(_.data):g(_.error||"Failed to load properties")}catch(_){console.error("Failed to load properties:",_),g("Failed to load properties")}finally{n(!1)}},b=async _=>{_.preventDefault(),g(null),y(null);try{const S=await sc.createProperty(h);S.success?(y("Property added successfully!"),p({name:"",address:"",type:"Apartment",total_units:0}),a(!1),await m()):g(S.error||"Failed to add property")}catch(S){console.error("Failed to add property:",S),g("Failed to add property")}},k=async _=>{if(_.preventDefault(),!!d){g(null),y(null);try{const S=await sc.updateProperty(d.id,h);S.success?(y("Property updated successfully!"),u(!1),f(null),await m()):g(S.error||"Failed to update property")}catch(S){console.error("Failed to update property:",S),g("Failed to update property")}}},C=async _=>{if(window.confirm("Are you sure you want to delete this property? This will also delete all associated CSV files and data."))try{const S=await sc.deleteProperty(_);S.success?(y("Property deleted successfully!"),await m()):g(S.error||"Failed to delete property")}catch(S){console.error("Failed to delete property:",S),g("Failed to delete property")}},E=_=>{f(_),p({name:_.name,address:_.address,type:_.type,total_units:_.total_units}),u(!0)},j=t.filter(_=>_.name.toLowerCase().includes(s.toLowerCase())||_.address.toLowerCase().includes(s.toLowerCase())||_.type.toLowerCase().includes(s.toLowerCase())),w=["Apartment","Townhouse","Single Family","Condo","Duplex","Commercial","Mixed Use","Other"];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[l.jsx(Nr,{className:"w-8 h-8 mr-3 text-blue-600"}),"Property Management"]}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your properties for AI parser integration"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{onClick:()=>a(!0),className:"btn-primary flex items-center space-x-2",children:[l.jsx(zu,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Property"})]}),l.jsxs("button",{onClick:m,disabled:r,className:"btn-secondary flex items-center space-x-2",children:[l.jsx(Da,{className:`w-4 h-4 ${r?"animate-spin":""}`}),l.jsx("span",{children:"Refresh"})]})]})]}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"relative",children:[l.jsx(e_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"text",placeholder:"Search properties by name, address, or type...",value:s,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),v&&l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 flex items-center space-x-2",children:[l.jsx(Na,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"text-sm text-green-600",children:v})]}),x&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[l.jsx(Qs,{className:"w-4 h-4 text-red-600"}),l.jsx("span",{className:"text-sm text-red-600",children:x})]}),r?l.jsxs("div",{className:"card text-center py-12",children:[l.jsx(Da,{className:"w-8 h-8 animate-spin mx-auto text-blue-600 mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading properties..."})]}):j.length===0?l.jsxs("div",{className:"card text-center py-12",children:[l.jsx(Nr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:s?"No properties match your search criteria.":"Add your first property to get started with AI parser integration."}),l.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"Add Property"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(_=>l.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(_4,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:_.name}),l.jsx("p",{className:"text-sm text-gray-500",children:_.type})]})]}),l.jsx("div",{className:"flex items-center space-x-1",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.ai_parser_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.ai_parser_enabled?"AI Enabled":"Disabled"})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(Jp,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate",children:_.address})]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(tn,{className:"w-4 h-4"}),l.jsxs("span",{children:[_.total_units," units"]})]}),l.jsxs("div",{className:"pt-3 border-t",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Created:"}),l.jsx("p",{className:"text-sm font-medium",children:new Date(_.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>E(_),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Property",children:l.jsx(ru,{className:"w-4 h-4"})})}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>C(_.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Property",children:l.jsx(Uu,{className:"w-4 h-4"})})})]})]},_.id))}),o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),l.jsx("button",{onClick:()=>{a(!1),p({name:"",address:"",type:"Apartment",total_units:0}),g(null)},className:"text-gray-400 hover:text-gray-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),l.jsx("input",{type:"text",required:!0,value:h.name,onChange:_=>p({...h,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),l.jsx("input",{type:"text",required:!0,value:h.address,onChange:_=>p({...h,address:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property address"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),l.jsx("select",{required:!0,value:h.type,onChange:_=>p({...h,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:w.map(_=>l.jsx("option",{value:_,children:_},_))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),l.jsx("input",{type:"number",required:!0,min:"1",value:h.total_units,onChange:_=>p({...h,total_units:parseInt(_.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total units"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>{a(!1),p({name:"",address:"",type:"Apartment",total_units:0}),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Property"})]})]})]})})}),c&&d&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Property"}),l.jsx("button",{onClick:()=>{u(!1),f(null),p({name:"",address:"",type:"Apartment",total_units:0}),g(null)},className:"text-gray-400 hover:text-gray-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("form",{onSubmit:k,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),l.jsx("input",{type:"text",required:!0,value:h.name,onChange:_=>p({...h,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),l.jsx("input",{type:"text",required:!0,value:h.address,onChange:_=>p({...h,address:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),l.jsx("select",{required:!0,value:h.type,onChange:_=>p({...h,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:w.map(_=>l.jsx("option",{value:_,children:_},_))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),l.jsx("input",{type:"number",required:!0,min:"1",value:h.total_units,onChange:_=>p({...h,total_units:parseInt(_.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>{u(!1),f(null),p({name:"",address:"",type:"Apartment",total_units:0}),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Property"})]})]})]})})})]})},IT=()=>{var s;const[t,e]=T.useState("list"),r=[{id:"list",label:"Property List",icon:C4,description:"View and manage your properties"},{id:"management",label:"Property Management",icon:T4,description:"Advanced property management features"}],n=()=>{switch(t){case"list":return l.jsx(qv,{});case"management":return l.jsx(OT,{});default:return l.jsx(qv,{})}};return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your property portfolio and settings"})]}),l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8",children:r.map(i=>l.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===i.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[l.jsx(i.icon,{className:"w-4 h-4"}),l.jsx("span",{children:i.label})]},i.id))})}),l.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:l.jsx("p",{className:"text-sm text-gray-600",children:(s=r.find(i=>i.id===t))==null?void 0:s.description})}),l.jsx("div",{className:"p-6",children:n()})]})})},FT=()=>{const[t,e]=T.useState("12m"),[r,n]=T.useState(null),[s,i]=T.useState(null),[o,a]=T.useState(!1),c=T.useCallback(()=>{setTimeout(()=>{n({totalRevenue:125e3,totalExpenses:85e3,netIncome:4e4,revenuePerUnit:4807,totalUnits:26,timeRange:t,occupancyRate:100,averageRent:1850,maintenanceCosts:12e3,propertyTax:15e3,insurance:8e3,utilities:1e4,managementFees:5e3,expenseRatio:.68,avgMaintenance:12e3,avgUtilities:1e4,avgInsurance:8e3,avgPropertyTax:15e3,avgOtherExpenses:4e4,revenueTrend:5e3,monthlyData:[{Date:"2024-01","Monthly Revenue":1e4,"Occupancy Rate":95},{Date:"2024-02","Monthly Revenue":10500,"Occupancy Rate":96},{Date:"2024-03","Monthly Revenue":11e3,"Occupancy Rate":98}],totalMonths:12,avgOccupancy:96,occupancyTrend:2.5,profitMargin:32})},1e3)},[t]);T.useEffect(()=>{c()},[c]);const u=x=>{i(x),a(!0)},d=x=>{var v,y,m,b;if(!r||!x)return null;const g={title:x.title,currentData:{},benchmarks:{},calculations:{},recommendations:[],riskFactors:[],opportunities:[]};switch(x.title){case"Rent Optimization Opportunity":g.currentData={revenuePerUnit:r.revenuePerUnit,totalRevenue:r.totalRevenue,totalUnits:r.totalUnits,timePeriod:r.timeRange,monthlyRevenue:((v=r.monthlyData)==null?void 0:v.map(_=>parseFloat(_["Monthly Revenue"])||0))||[]};const C=r.totalRevenue/r.totalMonths/r.totalUnits;g.benchmarks={chicoMarketRate:Math.round(C*.92),chicoAverage:Math.round(C*.96),chicoPremium:Math.round(C*1.08),yourCurrent:Math.round(C),location:"Chico, CA - College Town Market"};const E=Math.round(C*.92);g.calculations={currentVsChicoMarket:((r.revenuePerUnit-E)/E*100).toFixed(1),potentialIncrease:r.revenuePerUnit>E?"2-4%":"5-8%",revenueImpact:r.revenuePerUnit>E?`$${(r.totalRevenue*.03).toLocaleString()} annually (conservative Chico increase)`:`$${(r.totalRevenue*.065).toLocaleString()} annually (Chico market adjustment)`,marketPosition:r.revenuePerUnit>E?"Above Chico Market":"Below Chico Market"},g.recommendations=["Research Chico State University student housing demand patterns","Compare rates with nearby complexes on Nord Ave and Mangrove Ave","Consider seasonal rent adjustments aligned with academic calendar","Leverage proximity to campus and downtown Chico for premium positioning","Monitor Chico rental market trends and new construction impacts"],g.riskFactors=["Student population fluctuations affecting demand in Chico","Competition from new student housing developments near CSU Chico","Seasonal vacancy patterns during summer months","Economic impact on college-age renters and families","Chico housing market sensitivity to university enrollment"],g.opportunities=["Target CSU Chico students and young professionals","Capitalize on Chico's growing tech and healthcare sectors","Offer furnished units for student market premium","Partner with local businesses for tenant perks and retention","Position as premium alternative to on-campus housing"];break;case"Expense Management Alert":g.currentData={expenseRatio:r.expenseRatio,totalExpenses:r.totalExpenses,totalRevenue:r.totalRevenue,avgMaintenance:r.avgMaintenance,avgUtilities:r.avgUtilities,avgInsurance:r.avgInsurance,avgPropertyTax:r.avgPropertyTax,avgOtherExpenses:r.avgOtherExpenses},g.benchmarks={chicoStandard:.55,efficientThreshold:.45,highCostThreshold:.65,californiaAverage:.62,location:"Chico, CA - Moderate Climate Advantage"};const j=.55;g.calculations={currentVsChicoBenchmark:((r.expenseRatio-j)/j*100).toFixed(1),costSavings:r.expenseRatio<j?`$${(r.totalRevenue*(j-r.expenseRatio)).toLocaleString()} saved vs Chico benchmark`:`$${(r.totalRevenue*(r.expenseRatio-j)).toLocaleString()} over Chico benchmark`,chicoAdvantage:"Chico's mild climate reduces heating/cooling costs vs CA average",expenseBreakdown:{maintenance:`${(r.avgMaintenance/r.totalExpenses*100).toFixed(1)}%`,utilities:`${(r.avgUtilities/r.totalExpenses*100).toFixed(1)}%`,insurance:`${(r.avgInsurance/r.totalExpenses*100).toFixed(1)}%`,propertyTax:`${(r.avgPropertyTax/r.totalExpenses*100).toFixed(1)}%`,other:`${(r.avgOtherExpenses/r.totalExpenses*100).toFixed(1)}%`}},g.recommendations=r.expenseRatio>j?["Leverage Chico's mild climate for reduced HVAC costs","Partner with local Chico contractors for competitive maintenance rates","Implement water-saving measures (Chico water conservation incentives)","Consider solar installation (Chico solar rebate programs)","Review property tax assessments with Butte County"]:["Excellent cost management for Chico market conditions","Use efficiency as marketing advantage over competitors","Consider reinvesting savings in tenant amenities","Document strategies for potential portfolio expansion in Chico"],g.riskFactors=r.expenseRatio>j?["Chico wildfire risk may increase insurance premiums","California utility rate increases affecting Chico properties","Butte County property tax reassessments","Aging infrastructure in older Chico neighborhoods"]:["Over-optimization may impact tenant satisfaction","Chico market competition may require amenity investments","Climate change impacts on Chico area operating costs"],g.opportunities=["Chico solar incentive programs and net metering","Butte County water conservation rebates","Partner with CSU Chico facilities management for bulk purchasing","Leverage local Chico contractors for competitive rates","Implement smart thermostats for Chico's variable climate"];break;case"Revenue Trend Analysis":g.currentData={revenueTrend:r.revenueTrend,totalRevenue:r.totalRevenue,monthlyRevenue:((y=r.monthlyData)==null?void 0:y.map(_=>parseFloat(_["Monthly Revenue"])||0))||[],timePeriod:r.timeRange,occupancyRates:((m=r.monthlyData)==null?void 0:m.map(_=>parseFloat(_["Occupancy Rate"])||0))||[]},g.benchmarks={chicoHealthyGrowth:3e3,chicoStableThreshold:500,chicoDeclineThreshold:-1500,seasonalVariation:8,location:"Chico, CA - University Town Dynamics"},g.calculations={trendPercentage:r.totalRevenue>0?(r.revenueTrend/r.totalRevenue*100).toFixed(1):"0",monthlyAverage:r.monthlyData?(r.totalRevenue/r.monthlyData.length).toLocaleString():"0",occupancyCorrelation:r.monthlyData?r.monthlyData.map(_=>({month:_.Date||_.month,revenue:parseFloat(_["Monthly Revenue"])||0,occupancy:parseFloat(_["Occupancy Rate"])||0})):[]},g.recommendations=r.revenueTrend>0?["Capitalize on Chico's growing job market and CSU enrollment","Market to incoming CSU Chico students and faculty","Consider premium pricing during peak rental season (July-August)","Maintain competitive edge over new Chico developments"]:["Analyze impact of new student housing near CSU Chico campus","Review pricing strategy against Chico market comparables","Consider summer lease incentives for student retention","Evaluate property condition vs. newer Chico complexes"],g.riskFactors=["CSU Chico enrollment fluctuations affecting rental demand","New student housing developments near campus","Seasonal revenue variations during summer months","Chico economic dependence on university and agriculture","Competition from single-family rentals in Chico neighborhoods"],g.opportunities=["Target growing Chico tech sector employees","Develop partnerships with CSU Chico for faculty housing","Offer flexible lease terms for academic calendar alignment","Market to Chico healthcare workers (Enloe Medical Center)","Premium pricing for furnished units targeting students"];break;case"Occupancy Performance":g.currentData={avgOccupancy:r.avgOccupancy,occupancyTrend:r.occupancyTrend,occupancyRates:((b=r.monthlyData)==null?void 0:b.map(_=>parseFloat(_["Occupancy Rate"])||0))||[],timePeriod:r.timeRange,totalUnits:r.totalUnits},g.benchmarks={chicoStandard:92,chicoExcellent:96,chicoConcern:85,summerVariation:-15,location:"Chico, CA - Student Housing Market"};const w=92;g.calculations={currentVsChicoBenchmark:((r.avgOccupancy-w)/w*100).toFixed(1),trendImpact:r.occupancyTrend>0?`Improving by ${r.occupancyTrend.toFixed(1)}% (excellent for Chico)`:`Declining by ${Math.abs(r.occupancyTrend).toFixed(1)}% (monitor seasonal patterns)`,revenueImpact:r.avgOccupancy<w?`$${((w-r.avgOccupancy)/100*r.totalRevenue).toLocaleString()} potential revenue vs Chico benchmark`:`$${((r.avgOccupancy-w)/100*r.totalRevenue).toLocaleString()} revenue advantage in Chico market`,seasonalNote:"Chico occupancy typically drops 10-20% during summer months"},g.recommendations=r.occupancyTrend>0?["Excellent performance for Chico market - maintain strategies","Market early to incoming CSU Chico students (March-May)","Develop summer retention programs for year-round tenants","Consider premium pricing given strong occupancy"]:["Analyze competition from new Chico student housing","Improve marketing to CSU Chico students and young professionals","Consider amenity upgrades (fitness center, study rooms)","Implement summer lease incentives and flexible terms"],g.riskFactors=["Significant summer occupancy drops in Chico student market","CSU Chico enrollment changes affecting rental demand","New purpose-built student housing near campus","Economic impacts on college-age renters and families","Competition from single-family home rentals in Chico"],g.opportunities=["Target CSU Chico graduate students and faculty (stable tenants)","Offer academic year leases (9-month) with summer options","Create study-friendly amenities for student market","Partner with Chico employers for employee housing programs","Develop community events leveraging Chico's college town culture"];break}return g},f=r?[{title:"Revenue per Unit",value:`$${r.revenuePerUnit.toLocaleString()}`,change:r.revenuePerUnit>1500?"Above Market":"Below Market",changeType:r.revenuePerUnit>1500?"positive":"negative",period:`${r.timeRange==="1m"?"current month":`avg over ${r.timeRange}`}`,icon:en,color:"green"},{title:"Expense Ratio",value:`${(r.expenseRatio*100).toFixed(1)}%`,change:r.expenseRatio<.6?"Efficient":"High Costs",changeType:r.expenseRatio<.6?"positive":"negative",period:`of ${r.timeRange==="1m"?"monthly":"total"} revenue`,icon:nu,color:r.expenseRatio<.6?"green":"red"},{title:"Occupancy Trend",value:`${r.occupancyTrend>0?"+":""}${r.occupancyTrend.toFixed(1)}%`,change:r.occupancyTrend>0?"Improving":r.occupancyTrend<0?"Declining":"Stable",changeType:r.occupancyTrend>0?"positive":r.occupancyTrend<0?"negative":"neutral",period:`vs earlier ${r.timeRange}`,icon:ds,color:r.occupancyTrend>0?"blue":r.occupancyTrend<0?"red":"gray"},{title:"Revenue Trend",value:`${r.revenueTrend>0?"+":""}$${r.revenueTrend.toLocaleString()}`,change:r.revenueTrend>0?"Growing":r.revenueTrend<0?"Declining":"Stable",changeType:r.revenueTrend>0?"positive":r.revenueTrend<0?"negative":"neutral",period:`vs start of ${r.timeRange}`,icon:bn,color:r.revenueTrend>0?"green":r.revenueTrend<0?"red":"gray"}]:[],h=r?[{title:"Rent Optimization Opportunity",description:`Revenue per unit is $${r.revenuePerUnit.toLocaleString()} ${r.timeRange==="1m"?"this month":`over ${r.timeRange}`}. ${r.revenuePerUnit>1500?"Above market rate - consider rent increase of 3-5%.":"Below market rate - potential for 8-12% increase."}`,type:"opportunity",impact:r.revenuePerUnit>1500?"Medium":"High",action:r.revenuePerUnit>1500?"Moderate rent increase":"Significant rent increase",icon:vx},{title:"Expense Management Alert",description:`Expense ratio is ${(r.expenseRatio*100).toFixed(1)}% ${r.timeRange==="1m"?"this month":`over ${r.timeRange}`}. Industry benchmark is 60%. ${r.expenseRatio>.6?`Expenses are ${((r.expenseRatio-.6)*100).toFixed(1)}% above benchmark.`:`Expenses are ${((.6-r.expenseRatio)*100).toFixed(1)}% below benchmark.`}`,type:r.expenseRatio>.6?"warning":"positive",impact:r.expenseRatio>.6?"High":"Low",action:r.expenseRatio>.6?"Review expense categories":"Maintain current efficiency",icon:gx},{title:"Revenue Trend Analysis",description:`Revenue ${r.revenueTrend>0?"increased":r.revenueTrend<0?"decreased":"remained stable"} by $${Math.abs(r.revenueTrend).toLocaleString()} ${r.timeRange==="1m"?"this month":`over ${r.timeRange}`}. ${r.revenueTrend>0?"Strong performance trend.":r.revenueTrend<0?"Declining trend needs attention.":"Stable performance."}`,type:r.revenueTrend>0?"positive":r.revenueTrend<0?"warning":"info",impact:Math.abs(r.revenueTrend)>5e3?"High":"Medium",action:r.revenueTrend>0?"Continue current strategy":r.revenueTrend<0?"Investigate revenue decline":"Monitor performance",icon:bn},{title:"Occupancy Performance",description:`Average occupancy is ${r.avgOccupancy.toFixed(1)}% ${r.timeRange==="1m"?"this month":`over ${r.timeRange}`}. ${r.occupancyTrend>0?`Trend improved by ${r.occupancyTrend.toFixed(1)}%.`:r.occupancyTrend<0?`Trend declined by ${Math.abs(r.occupancyTrend).toFixed(1)}%.`:"Trend is stable."}`,type:r.occupancyTrend>0?"positive":r.occupancyTrend<0?"warning":"info",impact:Math.abs(r.occupancyTrend)>2?"High":"Medium",action:r.occupancyTrend>0?"Maintain current strategy":r.occupancyTrend<0?"Review marketing & retention":"Monitor occupancy",icon:tn}]:[],p=r?[{metric:"Revenue per Unit",current:r.revenuePerUnit,benchmark:1500,status:r.revenuePerUnit>=1500?"above":"below",unit:r.timeRange==="1m"?"$/month":"$/month avg",variance:((r.revenuePerUnit-1500)/1500*100).toFixed(1)},{metric:"Expense Ratio",current:r.expenseRatio*100,benchmark:60,status:r.expenseRatio<=.6?"below":"above",unit:"%",variance:((r.expenseRatio-.6)/.6*100).toFixed(1)},{metric:"Occupancy Rate",current:r.avgOccupancy,benchmark:95,status:r.avgOccupancy>=95?"above":"below",unit:"%",variance:((r.avgOccupancy-95)/95*100).toFixed(1)},{metric:"Profit Margin",current:r.profitMargin,benchmark:25,status:r.profitMargin>=25?"above":"below",unit:"%",variance:((r.profitMargin-25)/25*100).toFixed(1)}]:[];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Property Management Analytics"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Actionable insights for informed property management decisions"})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zi,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsxs("select",{value:t,onChange:x=>e(x.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"1m",children:"Last 1 month"}),l.jsx("option",{value:"3m",children:"Last 3 months"}),l.jsx("option",{value:"6m",children:"Last 6 months"}),l.jsx("option",{value:"12m",children:"Last 12 months"}),l.jsx("option",{value:"24m",children:"Last 24 months"})]})]}),l.jsxs("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600",children:[l.jsx($u,{className:"w-4 h-4"}),l.jsx("span",{children:"Export Report"})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((x,g)=>{const v=x.icon;return l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:x.title}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:x.value}),l.jsxs("div",{className:"flex items-center mt-1",children:[l.jsx("span",{className:`text-sm ${x.changeType==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:x.change}),l.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:x.period})]})]}),l.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${x.color==="green"?"bg-green-100 dark:bg-green-900/20":x.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":x.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"}`,children:l.jsx(v,{className:`w-6 h-6 ${x.color==="green"?"text-green-600 dark:text-green-400":x.color==="blue"?"text-blue-600 dark:text-blue-400":x.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})})]})},g)})}),l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance vs Industry Benchmarks"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((x,g)=>l.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.metric}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.status==="above"?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"}`,children:[x.status==="above"?"Above":"Below"," Benchmark"]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Current:"}),l.jsxs("span",{className:"font-semibold",children:[x.current.toFixed(1),x.unit]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Benchmark:"}),l.jsxs("span",{className:"text-sm text-gray-500",children:[x.benchmark,x.unit]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Variance:"}),l.jsxs("span",{className:`text-sm font-medium ${x.status==="above"?"text-green-600":"text-red-600"}`,children:[parseFloat(x.variance)>0?"+":"",x.variance,"%"]})]})]})]},g))})]}),l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Management Insights & Recommendations"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:h.map((x,g)=>{const v=x.icon;return l.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x.type==="opportunity"?"bg-green-100 dark:bg-green-900/20":x.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":x.type==="positive"?"bg-blue-100 dark:bg-blue-900/20":"bg-gray-100 dark:bg-gray-600"}`,children:l.jsx(v,{className:`w-4 h-4 ${x.type==="opportunity"?"text-green-600 dark:text-green-400":x.type==="warning"?"text-yellow-600 dark:text-yellow-400":x.type==="positive"?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300"}`})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.title}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.impact==="High"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300":x.impact==="Medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300"}`,children:[x.impact," Impact"]})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:x.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:x.action}),l.jsx("button",{onClick:()=>u(x),className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium cursor-pointer transition-colors",children:"Learn More "})]})]})]})},g)})})]}),r&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis Breakdown"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(mx,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Maintenance"}),l.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgMaintenance.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-600",children:r.timeRange==="1m"?"this month":`avg over ${r.timeRange}`})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(bn,{className:"w-6 h-6 text-green-600"})}),l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Utilities"}),l.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgUtilities.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-600",children:r.timeRange==="1m"?"this month":`avg over ${r.timeRange}`})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(gx,{className:"w-6 h-6 text-yellow-600"})}),l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Insurance"}),l.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgInsurance.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-600",children:r.timeRange==="1m"?"this month":`avg over ${r.timeRange}`})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(mx,{className:"w-6 h-6 text-red-600"})}),l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Property Tax"}),l.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgPropertyTax.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-600",children:r.timeRange==="1m"?"this month":`avg over ${r.timeRange}`})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(en,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Total Expenses"}),l.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",r.totalExpenses.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-600",children:r.timeRange==="1m"?"this month":`total over ${r.timeRange}`})]})]})]}),o&&s&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["AI Analysis: ",s.title]}),l.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(co,{className:"w-6 h-6"})})]}),(()=>{const x=d(s);return x?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[l.jsx(k4,{className:"w-5 h-5 mr-2"}),"Current Performance Data"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(x.currentData).map(([g,v])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-blue-700 capitalize",children:[g.replace(/([A-Z])/g," $1").trim(),":"]}),l.jsx("span",{className:"text-sm font-medium text-blue-900",children:Array.isArray(v)?`${v.length} data points`:typeof v=="number"?g.includes("Revenue")||g.includes("Expense")||g.includes("Cost")||g.includes("Unit")?`$${v.toLocaleString()}`:g.includes("Ratio")?`${v.toFixed(1)}%`:`${v.toFixed(1)}`:String(v)})]},g))})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[l.jsx(Na,{className:"w-5 h-5 mr-2"}),"Industry Benchmarks"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(x.benchmarks).map(([g,v])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-green-700 capitalize",children:[g.replace(/([A-Z])/g," $1").trim(),":"]}),l.jsx("span",{className:"text-sm font-medium text-green-900",children:typeof v=="number"?g.includes("Ratio")?`${(v*100).toFixed(1)}%`:g.includes("Rate")&&v<=100?`${v}%`:g.includes("Threshold")&&v<=100?`${v}%`:g.includes("Market")||g.includes("Industry")||g.includes("Premium")||g.includes("Revenue")||g.includes("Expense")||g.includes("Cost")?`$${v.toLocaleString()}`:`${v.toLocaleString()}`:String(v)})]},g))})]}),l.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-yellow-900 mb-3 flex items-center",children:[l.jsx(bn,{className:"w-5 h-5 mr-2"}),"AI Calculations & Analysis"]}),l.jsx("div",{className:"space-y-3",children:Object.entries(x.calculations).map(([g,v])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-yellow-700 capitalize",children:[g.replace(/([A-Z])/g," $1").trim(),":"]}),l.jsx("span",{className:"text-sm font-medium text-yellow-900",children:typeof v=="object"&&v!==null?Object.entries(v).map(([y,m])=>l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:"text-xs text-yellow-600",children:[y,": "]}),l.jsx("span",{className:"text-xs font-medium",children:String(m)})]},y)):String(v)})]},g))})]}),l.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center",children:[l.jsx(vx,{className:"w-5 h-5 mr-2"}),"AI Recommendations"]}),l.jsx("ul",{className:"space-y-2",children:x.recommendations.map((g,v)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-purple-600 mr-2",children:""}),l.jsx("span",{className:"text-sm text-purple-700",children:g})]},v))})]}),l.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-3 flex items-center",children:[l.jsx(Qs,{className:"w-5 h-5 mr-2"}),"Risk Factors to Monitor"]}),l.jsx("ul",{className:"space-y-2",children:x.riskFactors.map((g,v)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-red-600 mr-2",children:""}),l.jsx("span",{className:"text-sm text-red-700",children:g})]},v))})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[l.jsx(ds,{className:"w-5 h-5 mr-2"}),"Growth Opportunities"]}),l.jsx("ul",{className:"space-y-2",children:x.opportunities.map((g,v)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-600 mr-2",children:""}),l.jsx("span",{className:"text-sm text-green-700",children:g})]},v))})]})]}):null})()]})})})]})};class RT{constructor(){this.defaultConfig={percentiles:[20,50,80],sortOrder:"desc",includeZeroAmounts:!1,groupByMonth:!0}}async generateImpactAnalysis(e,r,n,s){const i={...this.defaultConfig,...n};try{const o=await Pn(s);if(!o||o.length===0)throw new Error("No CSV data found for property");const a=this.processCSVDataToLineItems(o,r),c=a.filter(h=>h.category==="income"),u=a.filter(h=>h.category==="expense"),d=this.createImpactBuckets(c,i),f=this.createImpactBuckets(u,i);return{income:d,expenses:f,generatedAt:new Date().toISOString(),dateRange:this.calculateDateRange(o)}}catch(o){throw console.error("Error generating impact analysis:",o),o}}processCSVDataToLineItems(e,r){const n=new Map;return e.forEach(s=>{const i=s.account_categories||{},o=s.preview_data||[];Object.entries(i).forEach(([a,c])=>{const u=o.find(x=>x.account_name===a);if(!u)return;const d=u.time_series||{},f={};let h=0;if(Object.entries(d).forEach(([x,g])=>{const v=this.parseAmount(g);v!==null&&(f[x]=v,h+=Math.abs(v))}),h===0&&!this.defaultConfig.includeZeroAmounts||r&&(r.minAmount&&h<r.minAmount||r.maxAmount&&h>r.maxAmount||r.csvSources&&!r.csvSources.includes(s.file_name)))return;const p=`${a}_${s.file_name}`;if(n.has(p)){const x=n.get(p);x.totalAmount+=h,Object.entries(f).forEach(([g,v])=>{x.monthlyBreakdown[g]=(x.monthlyBreakdown[g]||0)+v})}else n.set(p,{accountName:a,totalAmount:h,percentageOfTotal:0,monthlyBreakdown:f,csvSource:s.file_name,category:this.determineCategory(a,c)})})}),Array.from(n.values())}createImpactBuckets(e,r){if(e.length===0)return{top20:[],top50:[],top80:[],bottom20:[],totalAmount:0,itemCount:0};const n=[...e].sort((u,d)=>r.sortOrder==="desc"?d.totalAmount-u.totalAmount:u.totalAmount-d.totalAmount),s=n.reduce((u,d)=>u+d.totalAmount,0),i=n.length;n.forEach(u=>{u.percentageOfTotal=s>0?u.totalAmount/s*100:0});const o=Math.ceil(i*.2),a=Math.ceil(i*.5),c=Math.ceil(i*.8);return{top20:n.slice(0,o),top50:n.slice(0,a),top80:n.slice(0,c),bottom20:n.slice(c),totalAmount:s,itemCount:i}}generateImpactSummaries(e){const r=[];return[e.top20,e.top50,e.top80,e.bottom20].forEach((n,s)=>{const i=["top20","top50","top80","bottom20"][s],o=n.reduce((c,u)=>c+u.totalAmount,0),a=e.totalAmount>0?o/e.totalAmount*100:0;r.push({percentile:i,totalAmount:o,percentageOfTotal:a,itemCount:n.length,averagePerItem:n.length>0?o/n.length:0})}),r}getMonthlyTrends(e){const r=[],n=e.totalAmount;return Object.entries(e.monthlyBreakdown).forEach(([s,i])=>{r.push({month:s,amount:i,percentage:n>0?i/n*100:0})}),r.sort((s,i)=>s.month.localeCompare(i.month))}exportToCSV(e){const n=[["Category","Percentile","Account Name","Total Amount","Percentage of Total","CSV Source","Monthly Breakdown"].join(",")];return["top20","top50","top80","bottom20"].forEach(s=>{e.income[s].forEach(o=>{const a=Object.entries(o.monthlyBreakdown).map(([c,u])=>`${c}:${u}`).join(";");n.push(["Income",s,`"${o.accountName}"`,o.totalAmount,o.percentageOfTotal.toFixed(2),`"${o.csvSource}"`,`"${a}"`].join(","))})}),["top20","top50","top80","bottom20"].forEach(s=>{e.expenses[s].forEach(o=>{const a=Object.entries(o.monthlyBreakdown).map(([c,u])=>`${c}:${u}`).join(";");n.push(["Expense",s,`"${o.accountName}"`,o.totalAmount,o.percentageOfTotal.toFixed(2),`"${o.csvSource}"`,`"${a}"`].join(","))})}),n.join(`
`)}parseAmount(e){if(e==null||e==="")return null;const r=parseFloat(e.toString().replace(/[,$]/g,""));return isNaN(r)?null:r}determineCategory(e,r){const n=e.toLowerCase();return n.includes("rent")||n.includes("revenue")||n.includes("income")||n.includes("tenant")||n.includes("resident")||n.includes("rental")||n.includes("fee")||n.includes("charge")?"income":n.includes("expense")||n.includes("cost")||n.includes("maintenance")||n.includes("repair")||n.includes("utility")||n.includes("insurance")||n.includes("tax")||n.includes("management")?"expense":typeof r=="string"&&r.toLowerCase().includes("income")?"income":"expense"}calculateDateRange(e){let r=new Date,n=new Date(0);return e.forEach(s=>{(s.preview_data||[]).forEach(o=>{const a=o.time_series||{};Object.keys(a).forEach(c=>{const u=new Date(c);u<r&&(r=u),u>n&&(n=u)})})}),{start:r.toISOString().split("T")[0],end:n.toISOString().split("T")[0]}}}const jc=new RT;si.register(no,so,qs,$r,Ju,Xu,Yu,Gu);const BT=({items:t,title:e,color:r,maxItems:n=5})=>{const s=t.sort((d,f)=>f.totalAmount-d.totalAmount).slice(0,n);if(s.length===0)return l.jsx("div",{className:"card",children:l.jsx("div",{className:"text-center py-8",children:l.jsxs("div",{className:"text-gray-500",children:["No data available for ",e]})})});const i=new Set;s.forEach(d=>{Object.keys(d.monthlyBreakdown).forEach(f=>{i.add(f)})});const o=Array.from(i).sort(),a=s.map((d,f)=>{const h=o.map(v=>d.monthlyBreakdown[v]||0),p=r==="green"?120:0,x=70,g=50-f*8;return{label:d.accountName,data:h,borderColor:`hsl(${p}, ${x}%, ${g}%)`,backgroundColor:`hsla(${p}, ${x}%, ${g}%, 0.1)`,fill:!1,tension:.4,pointRadius:4,pointHoverRadius:6}}),c={labels:o,datasets:a},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:e,font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(d){const f=d.dataset.label||"",h=d.parsed.y;return`${f}: $${h.toLocaleString()}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Amount ($)"},beginAtZero:!0,ticks:{callback:function(d){return"$"+d.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return l.jsxs("div",{className:"card",children:[l.jsx(Sg,{chartId:"impact-trend-chart",chartName:e,className:"mb-4"}),l.jsx("div",{className:"h-80",children:l.jsx(Zu,{data:c,options:u})}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",s.reduce((d,f)=>d+f.totalAmount,0).toLocaleString()]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total Impact"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Top Items"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Months Tracked"})]})]})]})},LT=({propertyId:t,dateRange:e})=>{const[r,n]=T.useState(null),[s,i]=T.useState(!0),[o,a]=T.useState(null),[c,u]=T.useState("income"),[d,f]=T.useState(new Set(["top20"])),[h,p]=T.useState(null),[x,g]=T.useState(!1),v=T.useCallback(async()=>{try{i(!0),a(null);const C=e?{dateRange:e,minAmount:0}:void 0,E=or.getCurrentUser(),j=E==null?void 0:E.id,w=await jc.generateImpactAnalysis(t,C,void 0,j);n(w)}catch(C){console.error("Error loading impact analysis:",C),a("Failed to load impact analysis")}finally{i(!1)}},[t,e]);T.useEffect(()=>{v()},[v]);const y=C=>{const E=new Set(d);E.has(C)?E.delete(C):E.add(C),f(E)},m=()=>{if(!r)return;const C=jc.exportToCSV(r),E=new Blob([C],{type:"text/csv"}),j=window.URL.createObjectURL(E),w=document.createElement("a");w.href=j,w.download=`impact-analysis-${t}-${new Date().toISOString().split("T")[0]}.csv`,w.click(),window.URL.revokeObjectURL(j)};if(s)return l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading impact analysis..."})]})});if(o)return l.jsx("div",{className:"card",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-red-600 mb-2",children:"Error loading impact analysis"}),l.jsx("div",{className:"text-sm text-gray-500",children:o}),l.jsx("button",{onClick:v,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})});if(!r)return l.jsx("div",{className:"card",children:l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-600",children:"No impact analysis data available"})})});const b=c==="income"?r.income:r.expenses,k=jc.generateImpactSummaries(b);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[l.jsx(bn,{className:"w-5 h-5 mr-2"}),"Line Item Impact Analysis"]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Identify the most impactful income and expense items by dollar value"})]}),l.jsxs("button",{onClick:m,className:"flex items-center px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[l.jsx($u,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[l.jsxs("button",{onClick:()=>u("income"),className:`flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="income"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(ds,{className:"w-4 h-4 mr-2"}),"Income Impact"]}),l.jsxs("button",{onClick:()=>u("expenses"),className:`flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="expenses"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(nu,{className:"w-4 h-4 mr-2"}),"Expense Impact"]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(C=>l.jsx(MT,{summary:C,color:c==="income"?"green":"red",onClick:()=>y(C.percentile),isExpanded:d.has(C.percentile)},C.percentile))}),l.jsx(BT,{items:b.top20,title:`Top 20% ${c==="income"?"Income":"Expense"} Items Trend`,color:c==="income"?"green":"red",maxItems:5}),l.jsxs("div",{className:"card",children:[l.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:[c==="income"?"Income":"Expense"," Line Items by Impact"]}),l.jsx("div",{className:"space-y-4",children:k.map(C=>l.jsx($T,{title:`Top ${C.percentile.replace("top","").replace("bottom","Bottom ")}%`,items:b[C.percentile],totalAmount:C.totalAmount,itemCount:C.itemCount,color:c==="income"?"green":"red",icon:c==="income"?l.jsx(ds,{className:"w-4 h-4"}):l.jsx(nu,{className:"w-4 h-4"})},C.percentile))})]}),x&&h&&l.jsx(zT,{item:h,onClose:()=>g(!1)})]})},MT=({summary:t,color:e,onClick:r,isExpanded:n})=>{const s=e==="green"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800";return l.jsxs("div",{className:`card cursor-pointer transition-all hover:shadow-md ${s}`,onClick:r,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium",children:[t.percentile.replace("top","Top ").replace("bottom","Bottom "),"%"]}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",t.totalAmount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-75",children:[t.percentageOfTotal.toFixed(1),"% of total"]})]}),l.jsx("div",{className:"flex items-center",children:n?l.jsx(Gp,{className:"w-5 h-5"}):l.jsx(Yp,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"mt-2 text-xs opacity-75",children:[t.itemCount," items  Avg: $",t.averagePerItem.toLocaleString()]})]})},$T=({title:t,items:e,totalAmount:r,itemCount:n,color:s,icon:i})=>{const[o,a]=T.useState(!1),c=d=>{console.log("Item clicked:",d)};if(e.length===0)return null;const u=s==="green"?"text-green-600 bg-green-50":"text-red-600 bg-red-50";return l.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>a(!o),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[i,l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:t}),l.jsxs("div",{className:"text-sm text-gray-500",children:[n," items  $",r.toLocaleString()]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${u}`,children:[(r/(r+1e3)*100).toFixed(1),"% of total"]}),o?l.jsx(Gp,{className:"w-4 h-4 text-gray-400"}):l.jsx(Yp,{className:"w-4 h-4 text-gray-400"})]})]}),o&&l.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:l.jsx("div",{className:"space-y-2",children:e.map((d,f)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border hover:shadow-sm cursor-pointer",onClick:()=>c(d),children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-gray-900",children:d.accountName}),l.jsx("div",{className:"text-sm text-gray-500",children:d.csvSource})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"font-medium text-gray-900",children:["$",d.totalAmount.toLocaleString()]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[d.percentageOfTotal.toFixed(1),"%"]})]})]},f))})})]})},zT=({item:t,onClose:e})=>{const r=jc.getMonthlyTrends(t);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.accountName}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:""})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),l.jsxs("div",{className:"text-xl font-semibold",children:["$",t.totalAmount.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Percentage of Total"}),l.jsxs("div",{className:"text-xl font-semibold",children:[t.percentageOfTotal.toFixed(1),"%"]})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"CSV Source"}),l.jsx("div",{className:"text-sm font-medium",children:t.csvSource})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Monthly Breakdown"}),l.jsx("div",{className:"space-y-2",children:r.map((n,s)=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[l.jsx("div",{className:"text-sm font-medium",children:n.month}),l.jsxs("div",{className:"text-sm",children:["$",n.amount.toLocaleString()]})]},s))})]})]})]})})})},UT=()=>{const[t,e]=T.useState("2024"),[r,n]=T.useState([]),[s,i]=T.useState(""),[o,a]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(null);T.useEffect(()=>{h()},[]);const h=async()=>{try{let N=[];try{const F=await fetch("http://localhost:5001/api/processed-data");if(F.ok){const M=await F.json();if(console.log(" Local financials data loaded:",M),M.success&&M.data){const K=new Set;Object.keys(M.data).forEach(W=>{K.add(W)});const G=Array.from(K).map(W=>({id:`local-${W.toLowerCase()}`,name:W,address:"Local Data Source",type:"Apartment Complex",total_units:26}));N=[...G],console.log(" Local financials properties:",G)}}}catch{console.log(" Local financials data not available, trying API...")}if(N.length===0){const F=await nr.getProperties();F.success&&F.data&&(N=F.data)}n(N),N.length>0&&i(N[0].id)}catch(N){console.error("Error loading properties:",N),f("Failed to load properties")}},p=T.useCallback(async()=>{try{u(!0),f(null);let N=[];const F=await Pn();console.log(" Using Supabase data for financials:",F.length,"active CSVs"),F.length>0?(console.log(" Processing CSV data for financials:",F.map(M=>M.file_name)),F.forEach(M=>{const K=M.file_name,G=M.account_categories,W=M.preview_data;console.log(` Processing CSV: ${K} for financials`),Object.entries(G).forEach(([z,$])=>{const R=W.find(O=>{var I;return((I=O.account_name)==null?void 0:I.trim())===z});R&&R.time_series&&(console.log(` Processing account: ${z} (${$})`),Object.entries(R.time_series).filter(([I,D])=>I.toLowerCase()!=="total"&&I.toLowerCase()!=="sum"&&I.toLowerCase()!=="grand total"&&typeof D=="number"&&D!==0).forEach(([I,D])=>{let B=N.find(X=>X.date===I);if(B||(B={id:`${M.id}-${I}`,property_id:s,date:I,month:I,revenue:"0",occupancy_rate:"95",maintenance_cost:"0",utilities_cost:"0",insurance_cost:"0",property_tax:"0",other_expenses:"0",expenses:"0",netIncome:"0",notes:"",property_name:"Chico"},N.push(B)),$==="income"){const X=parseFloat(B.revenue)||0;B.revenue=(X+D).toString()}else if($==="expense"){const X=parseFloat(B.expenses||"0")||0;B.expenses=(X+D).toString();const J=z.toLowerCase();if(J.includes("maintenance")||J.includes("repair")){const ee=parseFloat(B.maintenance_cost)||0;B.maintenance_cost=(ee+D).toString()}else if(J.includes("utility")||J.includes("water")||J.includes("garbage")){const ee=parseFloat(B.utilities_cost)||0;B.utilities_cost=(ee+D).toString()}else if(J.includes("insurance")){const ee=parseFloat(B.insurance_cost)||0;B.insurance_cost=(ee+D).toString()}else if(J.includes("tax")){const ee=parseFloat(B.property_tax)||0;B.property_tax=(ee+D).toString()}else{const ee=parseFloat(B.other_expenses)||0;B.other_expenses=(ee+D).toString()}}}))})}),N.forEach(M=>{const K=parseFloat(M.revenue)||0,G=parseFloat(M.expenses||"0")||0;M.netIncome=(K-G).toString()}),N.sort((M,K)=>new Date(K.date).getTime()-new Date(M.date).getTime()),console.log(" Processed financial data:",N.length,"months")):console.log(" No active CSV data found for financials"),a(N)}catch(N){console.error("Error loading property data:",N),f("Failed to load property data"),a([])}finally{u(!1)}},[s]);T.useEffect(()=>{s&&p()},[s,p]);const x=async()=>{try{const{getCSVData:N}=await Cr(()=>Promise.resolve().then(()=>Hv),void 0),F=await N();if(!F||F.length===0)return{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0};const M=F.filter(D=>D.is_active!==!1);let K=0,G=0,W=0;M.forEach(D=>{const B=D.file_name||D.fileName,X=D.total_records||D.totalRecords,J=D.account_categories||D.accountCategories,ee=D.preview_data||D.previewData,re=D.file_type||D.fileType;if(console.log(` Financials processing CSV: ${B} (${X} records)`),re==="cash_flow"){console.log(" Financials processing CASH FLOW CSV - Looking for KEY METRICS...");const de=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let ge=!1;de.forEach(ue=>{const ae=ee.find(Q=>{var ie;return(((ie=Q.account_name)==null?void 0:ie.trim().toLowerCase())||"").includes(ue.name.toLowerCase())});if(ae&&ae.time_series){ge=!0,console.log(` Financials FOUND KEY METRIC: ${ae.account_name} (${ue.type})`);const Q=Object.entries(ae.time_series).filter(([te,ie])=>te.toLowerCase()!=="total"&&te.toLowerCase()!=="sum"&&te.toLowerCase()!=="grand total"&&typeof ie=="number").map(([,te])=>te);if(Q.length>0){const te=Q.reduce((ie,oe)=>ie+oe,0);ue.type==="income"?(K+=te,console.log(`   Financials ${ae.account_name}: Total Income = $${te.toLocaleString()}`)):ue.type==="expense"&&(G+=te,console.log(`   Financials ${ae.account_name}: Total Expense = $${te.toLocaleString()}`))}}}),ge?console.log(" Financials using KEY METRICS for calculation"):(console.log(" Financials key metrics not found, falling back to individual account categorization..."),Object.entries(J).forEach(([ue,ae])=>{const Q=ee.find(te=>{var ie;return((ie=te.account_name)==null?void 0:ie.trim())===ue});if(Q&&Q.time_series){const te=Object.entries(Q.time_series).filter(([ie,oe])=>ie.toLowerCase()!=="total"&&ie.toLowerCase()!=="sum"&&ie.toLowerCase()!=="grand total"&&typeof oe=="number").map(([,ie])=>ie);if(te.length>0){const ie=te.reduce((oe,be)=>oe+be,0);ae==="income"?K+=ie:ae==="expense"&&(G+=ie)}}}))}else Object.entries(J).forEach(([de,ge])=>{const ue=ee.find(ae=>{var Q;return((Q=ae.account_name)==null?void 0:Q.trim())===de});if(ue&&ue.time_series){const ae=Object.entries(ue.time_series).filter(([Q,te])=>Q.toLowerCase()!=="total"&&Q.toLowerCase()!=="sum"&&Q.toLowerCase()!=="grand total"&&typeof te=="number").map(([,Q])=>Q);if(ae.length>0){const Q=ae.reduce((te,ie)=>te+ie,0);ge==="income"?K+=Q:ge==="expense"&&(G+=Q)}}});W+=X});const z=K,$=G,R=K-G,O=z>0?R/z*100:0,I=W>0?z/W:0;return console.log(" Financials calculated metrics:"),console.log(`   Total Revenue (Total Operating Income): $${z.toLocaleString()}`),console.log(`   Total Expenses (Total Operating Expense): $${$.toLocaleString()}`),console.log(`   Net Income (Net Operating Income): $${R.toLocaleString()}`),console.log(`   Profit Margin: ${O.toFixed(2)}%`),{totalRevenue:z,totalExpenses:$,netIncome:R,profitMargin:O,monthlyAverage:I}}catch(N){return console.error("Error calculating financial summary from CSV data:",N),{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}}},g=async()=>{try{console.log(" Generating monthly data from CSV...");const{getCSVData:N}=await Cr(()=>Promise.resolve().then(()=>Hv),void 0),F=await N();if(console.log(" CSV data retrieved:",F.length,"files"),!F||F.length===0)return console.log(" No CSV data found"),[];const M=F.filter(W=>W.is_active!==!1);console.log(" Active CSVs:",M.length);const K=new Map;M.forEach(W=>{const z=W.file_name||W.fileName,$=W.preview_data||W.previewData,R=W.file_type||W.fileType;if(console.log(` Processing CSV: ${z} (${R})`),console.log(" Preview data sample:",$==null?void 0:$.slice(0,2)),R==="cash_flow"){console.log(" Processing CASH FLOW CSV for monthly data...");const O=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let I=!1;if(O.forEach(D=>{const B=$.find(X=>{var re;const J=((re=X.account_name)==null?void 0:re.trim().toLowerCase())||"",ee=D.name.toLowerCase();return console.log(` Checking "${J}" against "${ee}"`),J.includes(ee)});B&&B.time_series?(I=!0,console.log(` FOUND KEY METRIC: ${B.account_name} (${D.type})`),console.log(" Time Series Data:",B.time_series),Object.entries(B.time_series).forEach(([X,J])=>{if(!(X.toLowerCase()==="total"||X.toLowerCase()==="sum"||X.toLowerCase()==="grand total")&&typeof J=="number"){K.has(X)||K.set(X,{revenue:0,expenses:0,netIncome:0,margin:0});const ee=K.get(X);D.type==="income"?(ee.revenue+=J,console.log(`   ${X}: Revenue += ${J}`)):D.type==="expense"&&(ee.expenses+=J,console.log(`   ${X}: Expenses += ${J}`))}})):console.log(` Key metric "${D.name}" not found`)}),!I){console.log(" Key metrics not found, falling back to individual categorization...");const D=W.account_categories||W.accountCategories;Object.entries(D).forEach(([B,X])=>{const J=$.find(ee=>{var re;return((re=ee.account_name)==null?void 0:re.trim())===B});J&&J.time_series&&Object.entries(J.time_series).forEach(([ee,re])=>{if(!(ee.toLowerCase()==="total"||ee.toLowerCase()==="sum"||ee.toLowerCase()==="grand total")&&typeof re=="number"){K.has(ee)||K.set(ee,{revenue:0,expenses:0,netIncome:0,margin:0});const de=K.get(ee);X==="income"?de.revenue+=re:X==="expense"&&(de.expenses+=re)}})})}}else{const O=W.account_categories||W.accountCategories;Object.entries(O).forEach(([I,D])=>{const B=$.find(X=>{var J;return((J=X.account_name)==null?void 0:J.trim())===I});B&&B.time_series&&Object.entries(B.time_series).forEach(([X,J])=>{if(!(X.toLowerCase()==="total"||X.toLowerCase()==="sum"||X.toLowerCase()==="grand total")&&typeof J=="number"){K.has(X)||K.set(X,{revenue:0,expenses:0,netIncome:0,margin:0});const ee=K.get(X);D==="income"?ee.revenue+=J:D==="expense"&&(ee.expenses+=J)}})})}});const G=Array.from(K.entries()).map(([W,z])=>{const $=z.revenue-z.expenses,R=z.revenue>0?$/z.revenue*100:0;return{month:W,revenue:z.revenue,expenses:z.expenses,netIncome:$,margin:R}});return G.sort((W,z)=>{const $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=W.month.split(" ")[0],O=z.month.split(" ")[0];return $.indexOf(R)-$.indexOf(O)}),console.log(" Financials generated monthly data:",G),G}catch(N){return console.error("Error generating monthly data from CSV:",N),[]}},v=T.useCallback(()=>{if(!o||o.length===0)return[];if(o.length===1&&o[0].revenue.includes("479482")){const $=parseFloat(o[0].revenue)*.6,R=$*.25,O=$*.2,I=$*.15,D=$*.25,B=$*.15;return[{category:"Maintenance & Repairs",amount:R,percentage:25,color:"red"},{category:"Utilities",amount:O,percentage:20,color:"blue"},{category:"Insurance",amount:I,percentage:15,color:"green"},{category:"Property Tax",amount:D,percentage:25,color:"purple"},{category:"Other Expenses",amount:B,percentage:15,color:"orange"}]}const N=o.reduce((z,$)=>z+(parseFloat($.maintenance_cost)||0),0),F=o.reduce((z,$)=>z+(parseFloat($.utilities_cost)||0),0),M=o.reduce((z,$)=>z+(parseFloat($.insurance_cost)||0),0),K=o.reduce((z,$)=>z+(parseFloat($.property_tax)||0),0),G=o.reduce((z,$)=>z+(parseFloat($.other_expenses)||0),0),W=N+F+M+K+G;return W===0?[]:[{category:"Maintenance & Repairs",amount:N,percentage:N/W*100,color:"red"},{category:"Utilities",amount:F,percentage:F/W*100,color:"blue"},{category:"Insurance",amount:M,percentage:M/W*100,color:"green"},{category:"Property Tax",amount:K,percentage:K/W*100,color:"purple"},{category:"Other Expenses",amount:G,percentage:G/W*100,color:"orange"}]},[o]),y=T.useCallback(()=>{if(!o||o.length===0)return[];if(o.length===1&&o[0].revenue.includes("479482")){const N=parseFloat(o[0].revenue);return[{source:"Rent Payments",amount:N*.85,percentage:85},{source:"Late Fees",amount:N*.05,percentage:5},{source:"Application Fees",amount:N*.04,percentage:4},{source:"Pet Fees",amount:N*.03,percentage:3},{source:"Other Income",amount:N*.03,percentage:3}]}return[{source:"Rent Payments",amount:5e5,percentage:85},{source:"Late Fees",amount:3e4,percentage:5},{source:"Application Fees",amount:24e3,percentage:4},{source:"Pet Fees",amount:18e3,percentage:3},{source:"Other Income",amount:18e3,percentage:3}]},[o]),[m,b]=T.useState({totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}),[k,C]=T.useState([]),[E,j]=T.useState([]),[w,_]=T.useState([]),S=T.useCallback(async()=>{try{console.log(" Loading financial data from CSV...");const N=await x(),F=await g(),M=v(),K=y();console.log(" Financial summary loaded:",N),console.log(" Monthly data loaded:",F),b(N),C(F),j(M),_(K)}catch(N){console.error("Error loading financial data:",N)}},[v,y]);T.useEffect(()=>{S()},[v,y,S]);const A=N=>({red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",yellow:"bg-yellow-500"})[N]||"bg-gray-500";return console.log(" Financials Debug:",{propertyDataLength:o.length,propertyData:o,financialSummary:m,monthlyDataLength:k.length}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Financials"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Real-time financial data from CSV uploads"})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("select",{value:s,onChange:N=>i(N.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:c,children:[l.jsx("option",{value:"",children:"Select Property"}),r.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zi,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsxs("select",{value:t,onChange:N=>e(N.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"2023",children:"2023"}),l.jsx("option",{value:"2022",children:"2022"})]})]}),l.jsxs("button",{onClick:S,disabled:c,className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[l.jsx(Da,{className:`w-4 h-4 ${c?"animate-spin":""}`}),l.jsx("span",{children:"Refresh"})]}),l.jsxs("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[l.jsx($u,{className:"w-4 h-4"}),l.jsx("span",{children:"Export"})]})]})]}),d&&l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4 flex items-center",children:[l.jsx(Qs,{className:"w-5 h-5 text-red-400 dark:text-red-500 mr-3"}),l.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:d})]}),c&&l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading financial data..."})]})}),!c&&!d&&o.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(en,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Financial Data"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Upload CSV files to see financial data for this property."}),l.jsx("button",{className:"btn-primary",children:"Upload CSV Data"})]}),!c&&!d&&o.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",m.totalRevenue.toLocaleString()]}),l.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+12.5% vs last year"})]}),l.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:l.jsx(en,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Expenses"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",m.totalExpenses.toLocaleString()]}),l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"+3.2% vs last year"})]}),l.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:l.jsx(nu,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Net Income"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",m.netIncome.toLocaleString()]}),l.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+18.7% vs last year"})]}),l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(ds,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Profit Margin"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[m.profitMargin,"%"]}),l.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+2.1% vs last year"})]}),l.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:l.jsx(P4,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),l.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Average"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",m.monthlyAverage.toLocaleString()]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Revenue per month"})]}),l.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:l.jsx(Zi,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Financial Breakdown"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Revenue"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Expenses"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Net Income"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Margin"})]})}),l.jsx("tbody",{children:k.map((N,F)=>l.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:N.month}),l.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",N.revenue.toLocaleString()]}),l.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",N.expenses.toLocaleString()]}),l.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",N.netIncome.toLocaleString()]}),l.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:[N.margin,"%"]})]},F))})]})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expense Breakdown"}),l.jsx("div",{className:"space-y-4",children:E.map((N,F)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-4 h-4 rounded-full ${A(N.color)}`}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.category})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",N.amount.toLocaleString()]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[N.percentage,"%"]})]})]},F))})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Sources"}),l.jsx("div",{className:"space-y-4",children:w.map((N,F)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.source})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",N.amount.toLocaleString()]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[N.percentage,"%"]})]})]},F))})]}),l.jsx(LT,{propertyId:s,dateRange:{start:`${t}-01-01`,end:`${t}-12-31`}})]})]})},VT=()=>{const[t,e]=T.useState("all"),[r,n]=T.useState("all"),s=[{id:"1",title:"Monthly Financial Summary",type:"financial",description:"Complete financial overview including revenue, expenses, and profit margins",createdDate:"2024-01-15",status:"ready",size:"2.4 MB",format:"PDF"},{id:"2",title:"Occupancy Rate Analysis",type:"occupancy",description:"Detailed occupancy rates and trends across all properties",createdDate:"2024-01-14",status:"ready",size:"1.8 MB",format:"Excel"},{id:"3",title:"Maintenance Cost Report",type:"maintenance",description:"Breakdown of maintenance costs and repair history",createdDate:"2024-01-13",status:"ready",size:"3.1 MB",format:"PDF"},{id:"4",title:"Tenant Demographics",type:"tenant",description:"Analysis of tenant demographics and lease patterns",createdDate:"2024-01-12",status:"generating",size:"N/A",format:"CSV"},{id:"5",title:"Annual Property Performance",type:"financial",description:"Year-end performance analysis for all properties",createdDate:"2024-01-10",status:"ready",size:"4.2 MB",format:"PDF"},{id:"6",title:"Rent Roll Analysis",type:"tenant",description:"Current rent roll with lease expiration dates",createdDate:"2024-01-08",status:"failed",size:"N/A",format:"Excel"}],i=[{name:"Financial Summary",description:"Monthly revenue, expenses, and profit analysis",icon:en,color:"green"},{name:"Occupancy Report",description:"Property occupancy rates and trends",icon:Nr,color:"blue"},{name:"Maintenance Report",description:"Maintenance costs and work order history",icon:bn,color:"orange"},{name:"Tenant Report",description:"Tenant demographics and lease information",icon:tn,color:"purple"}],o=u=>{switch(u){case"ready":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},a=u=>{switch(u){case"financial":return en;case"occupancy":return Nr;case"maintenance":return bn;case"tenant":return tn;default:return kn}},c=s.filter(u=>{const d=t==="all"||u.type===t,f=r==="all"||u.format===r;return d&&f});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Generate and manage your property reports"})]}),l.jsxs("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[l.jsx(zu,{className:"w-4 h-4"}),l.jsx("span",{children:"New Report"})]})]}),l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Report Templates"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map((u,d)=>{const f=u.icon;return l.jsxs("button",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 dark:hover:border-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200 text-left bg-gray-50 dark:bg-gray-700",children:[l.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${u.color==="green"?"bg-green-100 dark:bg-green-900/20":u.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":u.color==="orange"?"bg-orange-100 dark:bg-orange-900/20":"bg-purple-100 dark:bg-purple-900/20"}`,children:l.jsx(f,{className:`w-5 h-5 ${u.color==="green"?"text-green-600 dark:text-green-400":u.color==="blue"?"text-blue-600 dark:text-blue-400":u.color==="orange"?"text-orange-600 dark:text-orange-400":"text-purple-600 dark:text-purple-400"}`})}),l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:u.name}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]},d)})})]}),l.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zw,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsxs("select",{value:t,onChange:u=>e(u.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"financial",children:"Financial"}),l.jsx("option",{value:"occupancy",children:"Occupancy"}),l.jsx("option",{value:"maintenance",children:"Maintenance"}),l.jsx("option",{value:"tenant",children:"Tenant"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(kn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),l.jsxs("select",{value:r,onChange:u=>n(u.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"all",children:"All Formats"}),l.jsx("option",{value:"PDF",children:"PDF"}),l.jsx("option",{value:"Excel",children:"Excel"}),l.jsx("option",{value:"CSV",children:"CSV"})]})]})]})}),l.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Reports"}),l.jsx("div",{className:"space-y-4",children:c.map(u=>{const d=a(u.type);return l.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 bg-gray-50 dark:bg-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:l.jsx(d,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description}),l.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[l.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Created: ",new Date(u.createdDate).toLocaleDateString()]}),l.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Size: ",u.size]}),l.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Format: ",u.format]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(u.status)}`,children:u.status}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:l.jsx(Pa,{className:"w-4 h-4"})}),l.jsx("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",disabled:u.status!=="ready",children:l.jsx($u,{className:"w-4 h-4"})})]})]})]},u.id)})})]}),c.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(kn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),l.jsx("p",{className:"text-gray-500",children:"Try adjusting your filter criteria or create a new report."})]})]})},HT=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!1),[s,i]=T.useState(null),[o,a]=T.useState(""),[c,u]=T.useState([]),[d,f]=T.useState(null),[h,p]=T.useState("checking"),[x,g]=T.useState("supabase"),[v,y]=T.useState([]),[m,b]=T.useState(null),[k,C]=T.useState(!1),[E,j]=T.useState("idle"),w=T.useRef(null);T.useEffect(()=>{_(),S(),A(),N()},[]);const _=async()=>{try{await Rs.initialize();const R=Rs.getAllProperties();y(R),console.log(" Unified properties loaded:",R.length)}catch(R){console.error("Failed to initialize unified service:",R)}},S=async()=>{try{const R=await nr.checkBackendStatus();R.supabase||R.local?p("connected"):p("disconnected")}catch{p("disconnected")}},A=async()=>{try{const R=await nr.getProperties();R.success&&R.data&&u(R.data)}catch(R){console.error("Failed to load properties:",R)}},N=async()=>{try{const R=await nr.getUploadHistory();R.success&&e(R.data)}catch(R){console.error("Failed to load upload history:",R)}},F=async R=>{var I;const O=(I=R.target.files)==null?void 0:I[0];if(O){n(!0),i(null),f(null);try{if(!o){i("Please select a property first"),n(!1);return}const D=c.find(ee=>ee.id===o),B=D==null?void 0:D.name;if(x==="local"){console.log(" Using local processing mode..."),await M(O,B);return}console.log(" Using Supabase processing mode...");try{await nr.getHealth()}catch{i("Supabase backend not available. Please switch to Local mode or start the Supabase backend."),n(!1);return}const X=await nr.validateCSV(O,B);if(f(X.data),!X.data.isValid){i(`CSV validation failed: ${X.data.errors.length} errors found`),n(!1);return}const J=await nr.uploadCSV(O,o);J.success?(await N(),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:J.data}})),i(null)):i(J.message||"Upload failed")}catch(D){console.error("Upload error:",D),D instanceof Error&&(D.message.includes("fetch")||D.message.includes("Network"))?(console.warn("Network error, falling back to local processing"),await M(O)):i(D instanceof Error?D.message:"Error processing CSV file")}finally{n(!1),w.current&&(w.current.value="")}}},M=async(R,O)=>{try{console.log(" Processing CSV locally...");let I=!1;try{await nr.getHealth(),I=!0}catch{console.log("Backend not available, using pure local processing"),I=!1}if(I){const D=await nr.processCSVLocal(R,O);D.success?(b(D.data),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:D.data,processingMode:"local"}})),console.log(" Local processing completed:",D.data)):i(D.message||"Local processing failed")}else await K(R,O)}catch(I){console.error("Local processing error:",I),i(I instanceof Error?I.message:"Error processing CSV file locally")}},K=async(R,O)=>{try{console.log(" Pure local processing (no backend)...");const D=(await R.text()).split(`
`).filter(ae=>ae.trim());if(D.length<2)throw new Error("No data rows found in CSV");const B=D[0].split(",").map(ae=>ae.trim());console.log(" Detected columns:",B);const X=B.filter(ae=>{const Q=ae.toLowerCase().trim();return/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{4}$/i.test(Q)}),J=X.length>0;console.log(" Format detected:",J?"month-column":"traditional");const ee=[],re=new Set;let de=0;for(let ae=1;ae<D.length;ae++){const Q=D[ae].split(",").map(ie=>ie.trim());if(Q.length!==B.length)continue;const te=Q[0];if(!(!te||/^(income|expense|totals?)$/i.test(te)))if(re.add(te),J)for(const ie of X){const oe=B.indexOf(ie),be=Q[oe]||"",fe=W(be);fe!==null&&(ee.push({account_name:te,period:ie,amount:fe,amount_raw:be}),de+=fe||0)}else{const ie=B.findIndex(be=>be.toLowerCase().includes("revenue")),oe=ie>=0?W(Q[ie]):0;ee.push({account_name:te,period:"2024-01",amount:oe,amount_raw:Q[ie]||""}),de+=oe||0}}const ge=ee.map(ae=>{const Q=ae.account_name.toLowerCase().trim();let te="other";return Q.includes("rent")||Q.includes("tenant")||Q.includes("resident")||Q.includes("rental")||Q.includes("short term")||Q.includes("application fee")||Q.includes("pet fee")||Q.includes("lock")||Q.includes("key")||Q.includes("insurance svcs income")||Q.includes("credit reporting services income")?te="income":Q.includes("utility")||Q.includes("utilities")||Q.includes("water")||Q.includes("garbage")||Q.includes("electric")||Q.includes("gas")||Q.includes("sewer")||Q.includes("refuse disposal")||Q.includes("pest control")?te="utilities":Q.includes("maintenance")||Q.includes("repair")||Q.includes("cleaning")||Q.includes("damage")||Q.includes("carpet")||Q.includes("r & m")||Q.includes("hvac")||Q.includes("plumbing")||Q.includes("paint")||Q.includes("appliances")||Q.includes("fire & alarm")||Q.includes("computers")||Q.includes("server")||Q.includes("phones")||Q.includes("it")?te="maintenance":Q.includes("insurance")||Q.includes("liability")||Q.includes("coverage")?te="insurance":(Q.includes("property tax")||Q.includes("real property tax"))&&(te="property_tax"),{...ae,category:te}}),ue={totalRows:ee.length,processedRows:ee.length,aiAnalysis:{propertyName:O||"Unknown Property",totalRecords:ee.length,totalAmount:de,uniqueAccounts:re.size,categories:{income:ge.filter(ae=>ae.category==="income").length,utilities:ge.filter(ae=>ae.category==="utilities").length,maintenance:ge.filter(ae=>ae.category==="maintenance").length,insurance:ge.filter(ae=>ae.category==="insurance").length,property_tax:ge.filter(ae=>ae.category==="property_tax").length,other:ge.filter(ae=>ae.category==="other").length},confidence:.85},data:ee,format:J?"month-column":"traditional",status:"processed"};b(ue),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:ue,processingMode:"local"}})),console.log(" Pure local processing completed:",ue)}catch(I){throw console.error("Pure local processing error:",I),I}},G=async()=>{if(!m){i("No data to save");return}C(!0),j("saving");try{console.log(" Saving processed data to unified system...");const R=v.find(D=>D.id===o)||c.find(D=>D.id===o);if(!R){i("Property not found"),C(!1);return}const O=await Rs.addProperty({name:R.name,address:R.address||"",type:R.type||"Unknown",totalUnits:R.totalUnits||0});if(m.data&&Array.isArray(m.data))for(const D of m.data)await Rs.addPropertyData({propertyId:O.id,propertyName:O.name,date:D.date||new Date().toISOString(),accountName:D.account_name||D.accountName||"Unknown",amount:D.amount||0,month:D.month||"Unknown",category:D.category||"other",source:x});const I=await nr.saveLocalData(m,R.name,x);if(I.success){j("saved"),i(null),console.log(" Data saved successfully to unified system:",I);const D=Rs.getAllProperties();y(D),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:I,processingMode:x,saved:!0,unified:!0,source:"local"}})),window.dispatchEvent(new CustomEvent("chartDataUpdated",{detail:{propertyId:o,data:m,source:"local"}})),setTimeout(()=>{window.location.reload()},1e3)}else j("error"),i(I.message||"Failed to save data")}catch(R){console.error("Save data error:",R),j("error"),i(R instanceof Error?R.message:"Error saving data")}finally{C(!1)}},W=R=>{if(!R||R===""||R.toLowerCase()==="n/a")return null;let O=R.replace(/\$/g,"").replace(/,/g,""),I=!1;O.startsWith("(")&&O.endsWith(")")&&(I=!0,O=O.slice(1,-1));const D=Number(O);return Number.isNaN(D)?null:I?-D:D},z=R=>{if(R===0)return"0 Bytes";const O=1024,I=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(R)/Math.log(O));return parseFloat((R/Math.pow(O,D)).toFixed(2))+" "+I[D]},$=R=>{switch(R){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CSV Data Upload"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Upload CSV files to populate your dashboard with real property data"}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${h==="connected"?"bg-green-500":h==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),l.jsx("span",{className:"text-sm text-gray-500",children:h==="connected"?`Backend Connected (${x==="supabase"?"Supabase":"Local"} Mode)`:h==="disconnected"?"No Backend Available":"Checking Connection..."})]}),h==="connected"&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Mode:"}),l.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>g("supabase"),className:`px-3 py-1 text-xs rounded-md transition-colors ${x==="supabase"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Supabase"}),l.jsx("button",{onClick:()=>g("local"),className:`px-3 py-1 text-xs rounded-md transition-colors ${x==="local"?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Local"})]})]})]})]})}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Property Data"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Property"}),l.jsx("button",{onClick:()=>{const R=new CustomEvent("navigateToPage",{detail:{page:"property-management"}});window.dispatchEvent(R)},className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"+ Add Property"})]}),l.jsxs("select",{value:o,onChange:R=>a(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Choose a property..."}),v.length>0?v.map(R=>l.jsxs("option",{value:R.id,children:[R.name," - ",R.address," (",R.source,")"]},R.id)):c.map(R=>l.jsx("option",{value:R.id,children:R.name},R.id))]}),v.length>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Showing ",v.length," unified properties"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors duration-200",children:[l.jsx("input",{ref:w,type:"file",accept:".csv",onChange:F,className:"hidden",disabled:r}),l.jsxs("button",{onClick:()=>{var R;return(R=w.current)==null?void 0:R.click()},disabled:r,className:"btn-primary flex items-center space-x-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[r?l.jsx(yx,{className:"w-4 h-4 animate-spin"}):l.jsx(Xp,{className:"w-4 h-4"}),l.jsx("span",{children:r?"Processing...":"Choose CSV File"})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: CSV files only"}),!o&&l.jsx("p",{className:"text-sm text-orange-600 mt-1",children:" Select a property above for best results"})]})]}),s&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[l.jsx(Qs,{className:"w-4 h-4 text-red-600"}),l.jsx("span",{className:"text-sm text-red-600",children:s})]}),d&&l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Validation Results"}),l.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total Rows:"})," ",d.totalRows]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Valid Rows:"})," ",d.validRows]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Invalid Rows:"})," ",d.invalidRows]}),d.errors&&d.errors.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{children:l.jsx("strong",{children:"Errors:"})}),l.jsxs("ul",{className:"list-disc list-inside ml-4",children:[d.errors.slice(0,3).map((R,O)=>l.jsx("li",{children:R.error},O)),d.errors.length>3&&l.jsxs("li",{children:["... and ",d.errors.length-3," more errors"]})]})]})]})]}),m&&l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[l.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Local Processing Results"}),l.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," ",m.status]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Format:"})," ",m.format]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Records:"})," ",m.totalRows]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Processed Records:"})," ",m.processedRows]}),m.aiAnalysis&&l.jsxs("div",{className:"mt-3",children:[l.jsx("p",{children:l.jsx("strong",{children:"AI Analysis:"})}),l.jsxs("div",{className:"ml-4 space-y-1",children:[l.jsxs("p",{children:[" Property: ",m.aiAnalysis.propertyName]}),l.jsxs("p",{children:[" Confidence: ",(m.aiAnalysis.confidence*100).toFixed(1),"%"]}),m.aiAnalysis.dateRange&&l.jsxs("p",{children:[" Date Range: ",m.aiAnalysis.dateRange.start," to ",m.aiAnalysis.dateRange.end]}),m.aiAnalysis.revenueAnalysis&&l.jsxs("p",{children:[" Total Revenue: $",m.aiAnalysis.revenueAnalysis.total.toLocaleString()]}),m.aiAnalysis.expenseAnalysis&&l.jsxs("p",{children:[" Total Expenses: $",m.aiAnalysis.expenseAnalysis.total.toLocaleString()]}),m.aiAnalysis.anomalies&&m.aiAnalysis.anomalies.length>0&&l.jsxs("div",{children:[l.jsxs("p",{children:[" Anomalies Found: ",m.aiAnalysis.anomalies.length]}),l.jsx("ul",{className:"ml-4",children:m.aiAnalysis.anomalies.slice(0,2).map((R,O)=>l.jsxs("li",{className:"text-orange-600",children:[" ",R.message]},O))})]})]})]})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[E==="saved"&&l.jsxs("div",{className:"flex items-center text-green-600",children:[l.jsx(Na,{className:"w-4 h-4 mr-1"}),l.jsx("span",{className:"text-sm",children:"Data saved successfully!"})]}),E==="error"&&l.jsxs("div",{className:"flex items-center text-red-600",children:[l.jsx(Qs,{className:"w-4 h-4 mr-1"}),l.jsx("span",{className:"text-sm",children:"Save failed"})]})]}),l.jsx("button",{onClick:G,disabled:k||E==="saved",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${k||E==="saved"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:k?l.jsxs(l.Fragment,{children:[l.jsx(yx,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Saving..."]}):E==="saved"?l.jsxs(l.Fragment,{children:[l.jsx(Na,{className:"w-4 h-4 mr-2 inline"}),"Saved"]}):l.jsxs(l.Fragment,{children:[l.jsx(kn,{className:"w-4 h-4 mr-2 inline"}),"Save Data"]})})]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Expected CSV Format:"}),l.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Required Headers:"})," Date, Revenue, Occupancy Rate"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Optional Headers:"})," Property Name (if not selecting property above), Address, Total Units, Occupied Units, Expenses, Net Income"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Example:"})," 2024-01-15, 45600, 95.8, 24, 23, 12000, 33600"]}),l.jsx("p",{className:"text-green-700 font-medium",children:" Property name is optional when you select a property above!"}),l.jsx("div",{className:"mt-3",children:l.jsxs("a",{href:"/correct-chico-data.csv",download:"sample-property-data.csv",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium",children:[l.jsx(kn,{className:"w-4 h-4"}),l.jsx("span",{children:"Download Sample CSV Template"})]})})]})]})]})]}),t.length>0&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload History"}),l.jsx("div",{className:"space-y-3",children:t.map(R=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(kn,{className:"w-5 h-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:R.file_name}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[l.jsx("span",{children:R.property_name}),l.jsx("span",{children:z(R.file_size)}),l.jsx("span",{children:new Date(R.uploaded_at).toLocaleDateString()}),l.jsxs("span",{children:[R.records_processed," processed"]}),R.records_skipped>0&&l.jsxs("span",{className:"text-orange-600",children:[R.records_skipped," skipped"]})]}),R.error_message&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:R.error_message})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$(R.upload_status)}`,children:R.upload_status})})]},R.id))})]})]})};var M2={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(pe,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},c=0,u={};function d(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var S=C(_);S.chunkSize=parseInt(S.chunkSize),_.step||_.chunk||(S.chunkSize=null),this._handle=new g(S),(this._handle.streamer=this)._config=S}).call(this,w),this.parseChunk=function(_,S){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let F=this._config.newline;F||(N=this._config.quoteChar||'"',F=this._handle.guessLineEndings(_,N)),_=[..._.split(F).slice(A)].join(F)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(_))!==void 0&&(_=N),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+_,N=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=N.meta.cursor,A=(this._finished||(this._partialLine=A.substring(_-this._baseIndex),this._baseIndex=_),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:N,workerId:u.WORKER_ID,finished:A});else if(j(this._config.chunk)&&!S){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!A||!j(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(_){j(this._config.error)?this._config.error(_):o&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:_,finished:!1})}}function f(w){var _;(w=w||{}).chunkSize||(w.chunkSize=u.RemoteChunkSize),d.call(this,w),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(S){this._input=S,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=E(this._chunkLoaded,this),_.onerror=E(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var S,A=this._config.downloadRequestHeaders;for(S in A)_.setRequestHeader(S,A[S])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+N));try{_.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(S=>(S=S.getResponseHeader("Content-Range"))!==null?parseInt(S.substring(S.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(S){S=_.statusText||S,this._sendError(new Error(S))}}function h(w){(w=w||{}).chunkSize||(w.chunkSize=u.LocalChunkSize),d.call(this,w);var _,S,A=typeof FileReader<"u";this.stream=function(N){this._input=N,S=N.slice||N.webkitSlice||N.mozSlice,A?((_=new FileReader).onload=E(this._chunkLoaded,this),_.onerror=E(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),N=S.call(N,this._start,F)),_.readAsText(N,this._config.encoding));A||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(_.error)}}function p(w){var _;d.call(this,w=w||{}),this.stream=function(S){return _=S,this._nextChunk()},this._nextChunk=function(){var S,A;if(!this._finished)return S=this._config.chunkSize,_=S?(A=_.substring(0,S),_.substring(S)):(A=_,""),this._finished=!_,this.parseChunk(A)}}function x(w){d.call(this,w=w||{});var _=[],S=!0,A=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):S=!0},this._streamData=E(function(N){try{_.push(typeof N=="string"?N:N.toString(this._config.encoding)),S&&(S=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(F){this._streamError(F)}},this),this._streamError=E(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=E(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(w){var _,S,A,N,F=Math.pow(2,53),M=-F,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,z=0,$=0,R=!1,O=!1,I=[],D={data:[],errors:[],meta:{}};function B(re){return w.skipEmptyLines==="greedy"?re.join("").trim()==="":re.length===1&&re[0].length===0}function X(){if(D&&A&&(ee("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),A=!1),w.skipEmptyLines&&(D.data=D.data.filter(function(ae){return!B(ae)})),J()){let ae=function(Q,te){j(w.transformHeader)&&(Q=w.transformHeader(Q,te)),I.push(Q)};var ue=ae;if(D)if(Array.isArray(D.data[0])){for(var re=0;J()&&re<D.data.length;re++)D.data[re].forEach(ae);D.data.splice(0,1)}else D.data.forEach(ae)}function de(ae,Q){for(var te=w.header?{}:[],ie=0;ie<ae.length;ie++){var oe=ie,be=ae[ie],be=((fe,xe)=>(we=>(w.dynamicTypingFunction&&w.dynamicTyping[we]===void 0&&(w.dynamicTyping[we]=w.dynamicTypingFunction(we)),(w.dynamicTyping[we]||w.dynamicTyping)===!0))(fe)?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&((we=>{if(K.test(we)&&(we=parseFloat(we),M<we&&we<F))return 1})(xe)?parseFloat(xe):G.test(xe)?new Date(xe):xe===""?null:xe):xe)(oe=w.header?ie>=I.length?"__parsed_extra":I[ie]:oe,be=w.transform?w.transform(be,oe):be);oe==="__parsed_extra"?(te[oe]=te[oe]||[],te[oe].push(be)):te[oe]=be}return w.header&&(ie>I.length?ee("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+ie,$+Q):ie<I.length&&ee("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+ie,$+Q)),te}var ge;D&&(w.header||w.dynamicTyping||w.transform)&&(ge=1,!D.data.length||Array.isArray(D.data[0])?(D.data=D.data.map(de),ge=D.data.length):D.data=de(D.data,0),w.header&&D.meta&&(D.meta.fields=I),$+=ge)}function J(){return w.header&&I.length===0}function ee(re,de,ge,ue){re={type:re,code:de,message:ge},ue!==void 0&&(re.row=ue),D.errors.push(re)}j(w.step)&&(N=w.step,w.step=function(re){D=re,J()?X():(X(),D.data.length!==0&&(z+=re.data.length,w.preview&&z>w.preview?S.abort():(D.data=D.data[0],N(D,W))))}),this.parse=function(re,de,ge){var ue=w.quoteChar||'"',ue=(w.newline||(w.newline=this.guessLineEndings(re,ue)),A=!1,w.delimiter?j(w.delimiter)&&(w.delimiter=w.delimiter(re),D.meta.delimiter=w.delimiter):((ue=((ae,Q,te,ie,oe)=>{var be,fe,xe,we;oe=oe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var De=0;De<oe.length;De++){for(var Me,ut=oe[De],Fe=0,Ie=0,Ce=0,ze=(xe=void 0,new y({comments:ie,delimiter:ut,newline:Q,preview:10}).parse(ae)),Ft=0;Ft<ze.data.length;Ft++)te&&B(ze.data[Ft])?Ce++:(Me=ze.data[Ft].length,Ie+=Me,xe===void 0?xe=Me:0<Me&&(Fe+=Math.abs(Me-xe),xe=Me));0<ze.data.length&&(Ie/=ze.data.length-Ce),(fe===void 0||Fe<=fe)&&(we===void 0||we<Ie)&&1.99<Ie&&(fe=Fe,be=ut,we=Ie)}return{successful:!!(w.delimiter=be),bestDelimiter:be}})(re,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=ue.bestDelimiter:(A=!0,w.delimiter=u.DefaultDelimiter),D.meta.delimiter=w.delimiter),C(w));return w.preview&&w.header&&ue.preview++,_=re,S=new y(ue),D=S.parse(_,de,ge),X(),R?{meta:{paused:!0}}:D||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,S.abort(),_=j(w.chunk)?"":_.substring(S.getCharIndex())},this.resume=function(){W.streamer._halted?(R=!1,W.streamer.parseChunk(_,!0)):setTimeout(W.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,S.abort(),D.meta.aborted=!0,j(w.complete)&&w.complete(D),_=""},this.guessLineEndings=function(ae,ue){ae=ae.substring(0,1048576);var ue=new RegExp(v(ue)+"([^]*?)"+v(ue),"gm"),ge=(ae=ae.replace(ue,"")).split("\r"),ue=ae.split(`
`),ae=1<ue.length&&ue[0].length<ge[0].length;if(ge.length===1||ae)return`
`;for(var Q=0,te=0;te<ge.length;te++)ge[te][0]===`
`&&Q++;return Q>=ge.length/2?`\r
`:"\r"}}function v(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(w){var _=(w=w||{}).delimiter,S=w.newline,A=w.comments,N=w.step,F=w.preview,M=w.fastMode,K=null,G=!1,W=w.quoteChar==null?'"':w.quoteChar,z=W;if(w.escapeChar!==void 0&&(z=w.escapeChar),(typeof _!="string"||-1<u.BAD_DELIMITERS.indexOf(_))&&(_=","),A===_)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var $=0,R=!1;this.parse=function(O,I,D){if(typeof O!="string")throw new Error("Input must be a string");var B=O.length,X=_.length,J=S.length,ee=A.length,re=j(N),de=[],ge=[],ue=[],ae=$=0;if(!O)return Fe();if(M||M!==!1&&O.indexOf(W)===-1){for(var Q=O.split(S),te=0;te<Q.length;te++){if(ue=Q[te],$+=ue.length,te!==Q.length-1)$+=S.length;else if(D)return Fe();if(!A||ue.substring(0,ee)!==A){if(re){if(de=[],we(ue.split(_)),Ie(),R)return Fe()}else we(ue.split(_));if(F&&F<=te)return de=de.slice(0,F),Fe(!0)}}return Fe()}for(var ie=O.indexOf(_,$),oe=O.indexOf(S,$),be=new RegExp(v(z)+v(W),"g"),fe=O.indexOf(W,$);;)if(O[$]===W)for(fe=$,$++;;){if((fe=O.indexOf(W,fe+1))===-1)return D||ge.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:de.length,index:$}),Me();if(fe===B-1)return Me(O.substring($,fe).replace(be,W));if(W===z&&O[fe+1]===z)fe++;else if(W===z||fe===0||O[fe-1]!==z){ie!==-1&&ie<fe+1&&(ie=O.indexOf(_,fe+1));var xe=De((oe=oe!==-1&&oe<fe+1?O.indexOf(S,fe+1):oe)===-1?ie:Math.min(ie,oe));if(O.substr(fe+1+xe,X)===_){ue.push(O.substring($,fe).replace(be,W)),O[$=fe+1+xe+X]!==W&&(fe=O.indexOf(W,$)),ie=O.indexOf(_,$),oe=O.indexOf(S,$);break}if(xe=De(oe),O.substring(fe+1+xe,fe+1+xe+J)===S){if(ue.push(O.substring($,fe).replace(be,W)),ut(fe+1+xe+J),ie=O.indexOf(_,$),fe=O.indexOf(W,$),re&&(Ie(),R))return Fe();if(F&&de.length>=F)return Fe(!0);break}ge.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:de.length,index:$}),fe++}}else if(A&&ue.length===0&&O.substring($,$+ee)===A){if(oe===-1)return Fe();$=oe+J,oe=O.indexOf(S,$),ie=O.indexOf(_,$)}else if(ie!==-1&&(ie<oe||oe===-1))ue.push(O.substring($,ie)),$=ie+X,ie=O.indexOf(_,$);else{if(oe===-1)break;if(ue.push(O.substring($,oe)),ut(oe+J),re&&(Ie(),R))return Fe();if(F&&de.length>=F)return Fe(!0)}return Me();function we(Ce){de.push(Ce),ae=$}function De(Ce){var ze=0;return ze=Ce!==-1&&(Ce=O.substring(fe+1,Ce))&&Ce.trim()===""?Ce.length:ze}function Me(Ce){return D||(Ce===void 0&&(Ce=O.substring($)),ue.push(Ce),$=B,we(ue),re&&Ie()),Fe()}function ut(Ce){$=Ce,we(ue),ue=[],oe=O.indexOf(S,$)}function Fe(Ce){if(w.header&&!I&&de.length&&!G){var ze=de[0],Ft=Object.create(null),Zt=new Set(ze);let vs=!1;for(let Rt=0;Rt<ze.length;Rt++){let dt=ze[Rt];if(Ft[dt=j(w.transformHeader)?w.transformHeader(dt,Rt):dt]){let sn,bs=Ft[dt];for(;sn=dt+"_"+bs,bs++,Zt.has(sn););Zt.add(sn),ze[Rt]=sn,Ft[dt]++,vs=!0,(K=K===null?{}:K)[sn]=dt}else Ft[dt]=1,ze[Rt]=dt;Zt.add(dt)}vs&&console.warn("Duplicate headers found and renamed."),G=!0}return{data:de,errors:ge,meta:{delimiter:_,linebreak:S,aborted:R,truncated:!!Ce,cursor:ae+(I||0),renamedHeaders:K}}}function Ie(){N(Fe()),de=[],ge=[]}},this.abort=function(){R=!0},this.getCharIndex=function(){return $}}function m(w){var _=w.data,S=a[_.workerId],A=!1;if(_.error)S.userError(_.error,_.file);else if(_.results&&_.results.data){var N={abort:function(){A=!0,b(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(j(S.userStep)){for(var F=0;F<_.results.data.length&&(S.userStep({data:_.results.data[F],errors:_.results.errors,meta:_.results.meta},N),!A);F++);delete _.results}else j(S.userChunk)&&(S.userChunk(_.results,N,_.file),delete _.results)}_.finished&&!A&&b(_.workerId,_.results)}function b(w,_){var S=a[w];j(S.userComplete)&&S.userComplete(_),S.terminate(),delete a[w]}function k(){throw new Error("Not implemented.")}function C(w){if(typeof w!="object"||w===null)return w;var _,S=Array.isArray(w)?[]:{};for(_ in w)S[_]=C(w[_]);return S}function E(w,_){return function(){w.apply(_,arguments)}}function j(w){return typeof w=="function"}return u.parse=function(w,_){var S=(_=_||{}).dynamicTyping||!1;if(j(S)&&(_.dynamicTypingFunction=S,S={}),_.dynamicTyping=S,_.transform=!!j(_.transform)&&_.transform,!_.worker||!u.WORKERS_SUPPORTED)return S=null,u.NODE_STREAM_INPUT,typeof w=="string"?(w=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(w),S=new(_.download?f:p)(_)):w.readable===!0&&j(w.read)&&j(w.on)?S=new x(_):(n.File&&w instanceof File||w instanceof Object)&&(S=new h(_)),S.stream(w);(S=(()=>{var A;return!!u.WORKERS_SUPPORTED&&(A=(()=>{var N=n.URL||n.webkitURL||null,F=r.toString();return u.BLOB_URL||(u.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(A=new n.Worker(A)).onmessage=m,A.id=c++,a[A.id]=A)})()).userStep=_.step,S.userChunk=_.chunk,S.userComplete=_.complete,S.userError=_.error,_.step=j(_.step),_.chunk=j(_.chunk),_.complete=j(_.complete),_.error=j(_.error),delete _.worker,S.postMessage({input:w,config:_,workerId:S.id})},u.unparse=function(w,_){var S=!1,A=!0,N=",",F=`\r
`,M='"',K=M+M,G=!1,W=null,z=!1,$=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||u.BAD_DELIMITERS.filter(function(I){return _.delimiter.indexOf(I)!==-1}).length||(N=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(S=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(G=_.skipEmptyLines),typeof _.newline=="string"&&(F=_.newline),typeof _.quoteChar=="string"&&(M=_.quoteChar),typeof _.header=="boolean"&&(A=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");W=_.columns}_.escapeChar!==void 0&&(K=_.escapeChar+M),_.escapeFormulae instanceof RegExp?z=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(M),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return R(null,w,G);if(typeof w[0]=="object")return R(W||Object.keys(w[0]),w,G)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||W),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),R(w.fields||[],w.data||[],G);throw new Error("Unable to serialize unrecognized input");function R(I,D,B){var X="",J=(typeof I=="string"&&(I=JSON.parse(I)),typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(I)&&0<I.length),ee=!Array.isArray(D[0]);if(J&&A){for(var re=0;re<I.length;re++)0<re&&(X+=N),X+=O(I[re],re);0<D.length&&(X+=F)}for(var de=0;de<D.length;de++){var ge=(J?I:D[de]).length,ue=!1,ae=J?Object.keys(D[de]).length===0:D[de].length===0;if(B&&!J&&(ue=B==="greedy"?D[de].join("").trim()==="":D[de].length===1&&D[de][0].length===0),B==="greedy"&&J){for(var Q=[],te=0;te<ge;te++){var ie=ee?I[te]:te;Q.push(D[de][ie])}ue=Q.join("").trim()===""}if(!ue){for(var oe=0;oe<ge;oe++){0<oe&&!ae&&(X+=N);var be=J&&ee?I[oe]:oe;X+=O(D[de][be],oe)}de<D.length-1&&(!B||0<ge&&!ae)&&(X+=F)}}return X}function O(I,D){var B,X;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(X=!1,z&&typeof I=="string"&&z.test(I)&&(I="'"+I,X=!0),B=I.toString().replace($,K),(X=X||S===!0||typeof S=="function"&&S(I,D)||Array.isArray(S)&&S[D]||((J,ee)=>{for(var re=0;re<ee.length;re++)if(-1<J.indexOf(ee[re]))return!0;return!1})(B,u.BAD_DELIMITERS)||-1<B.indexOf(N)||B.charAt(0)===" "||B.charAt(B.length-1)===" ")?M+B+M:B)}},u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=g,u.NetworkStreamer=f,u.FileStreamer=h,u.StringStreamer=p,u.ReadableStreamStreamer=x,n.jQuery&&((s=n.jQuery).fn.parse=function(w){var _=w.config||{},S=[];return this.each(function(F){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)S.push({file:this.files[M],inputElem:this,instanceConfig:s.extend({},_)})}),A(),this;function A(){if(S.length===0)j(w.complete)&&w.complete();else{var F,M,K,G,W=S[0];if(j(w.before)){var z=w.before(W.file,W.inputElem);if(typeof z=="object"){if(z.action==="abort")return F="AbortError",M=W.file,K=W.inputElem,G=z.reason,void(j(w.error)&&w.error({name:F},M,K,G));if(z.action==="skip")return void N();typeof z.config=="object"&&(W.instanceConfig=s.extend(W.instanceConfig,z.config))}else if(z==="skip")return void N()}var $=W.instanceConfig.complete;W.instanceConfig.complete=function(R){j($)&&$(R,W.file,W.inputElem),N()},u.parse(W.file,W.instanceConfig)}}function N(){S.splice(0,1),A()}}),o&&(n.onmessage=function(w){w=w.data,u.WORKER_ID===void 0&&w&&(u.WORKER_ID=w.workerId),typeof w.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(w.input,w.config),finished:!0}):(n.File&&w.input instanceof File||w.input instanceof Object)&&(w=u.parse(w.input,w.config))&&n.postMessage({workerId:u.WORKER_ID,results:w,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(h.prototype=Object.create(d.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(x.prototype=Object.create(d.prototype)).constructor=x,u})})(M2);var WT=M2.exports;const Ec=qf(WT),Kv="http://localhost:5000/api",qT={income_item:{label:"Income Item",description:"Individual income line items (rent, fees, etc.)",color:"bg-green-100 text-green-800",icon:"",category:"income"},income_total:{label:"Income Total",description:"Total income calculations and summaries",color:"bg-green-100 text-green-800",icon:"",category:"income"},expense_item:{label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",color:"bg-red-100 text-red-800",icon:"",category:"expense"},expense_total:{label:"Expense Total",description:"Total expense calculations and summaries",color:"bg-red-100 text-red-800",icon:"",category:"expense"},cash_amount:{label:"Cash Amount",description:"Cash and cash equivalents",color:"bg-purple-100 text-purple-800",icon:"",category:"cash"},rental_income:{label:"Rental Income",description:"Primary rental revenue from tenants",color:"bg-green-100 text-green-800",icon:"",category:"income"},other_income:{label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",color:"bg-green-100 text-green-800",icon:"",category:"income"},total_income:{label:"Total Income",description:"Sum of all income sources",color:"bg-green-100 text-green-800",icon:"",category:"income"},total_operating_income:{label:"Total Operating Income",description:"Primary income metric for dashboard",color:"bg-green-100 text-green-800",icon:"",category:"income"},operating_expenses:{label:"Operating Expenses",description:"Day-to-day property operations",color:"bg-red-100 text-red-800",icon:"",category:"expense"},maintenance_expenses:{label:"Maintenance & Repairs",description:"Property maintenance and repair costs",color:"bg-red-100 text-red-800",icon:"",category:"expense"},management_expenses:{label:"Management Expenses",description:"Property management and administrative costs",color:"bg-red-100 text-red-800",icon:"",category:"expense"},total_expenses:{label:"Total Expenses",description:"Sum of all expense categories",color:"bg-red-100 text-red-800",icon:"",category:"expense"},total_operating_expense:{label:"Total Operating Expense",description:"Primary expense metric for dashboard",color:"bg-red-100 text-red-800",icon:"",category:"expense"},net_operating_income:{label:"Net Operating Income",description:"Income minus operating expenses",color:"bg-blue-100 text-blue-800",icon:"",category:"net_income"},net_income:{label:"Net Income",description:"Final profit after all expenses",color:"bg-blue-100 text-blue-800",icon:"",category:"net_income"},cash_change:{label:"Cash Change",description:"Changes in cash position",color:"bg-purple-100 text-purple-800",icon:"",category:"cash"},exclude:{label:"Exclude from Dashboard",description:"Do not include in dashboard calculations",color:"bg-gray-100 text-gray-600",icon:"",category:"exclude"}};function Gv(){const[t,e]=T.useState(null),[r,n]=T.useState("general"),[s,i]=T.useState([]),[o,a]=T.useState({}),[c,u]=T.useState([]),[d,f]=T.useState(!1),[h,p]=T.useState(null),[x,g]=T.useState([]),[v,y]=T.useState({}),[m,b]=T.useState({}),[k,C]=T.useState(!1),[E,j]=T.useState(!1),[w,_]=T.useState(new Set),[S,A]=T.useState(!1),[N,F]=T.useState([]),[M,K]=T.useState(null),[G,W]=T.useState(!1),[z,$]=T.useState(!1),[R,O]=T.useState({}),[I,D]=T.useState({}),[B,X]=T.useState(!0),[J,ee]=T.useState({}),[re,de]=T.useState(!1),[ge,ue]=T.useState(!1),[ae,Q]=T.useState(""),[te,ie]=T.useState(""),[oe,be]=T.useState("income"),[fe,xe]=T.useState({}),[we,De]=T.useState(!1),[Me,ut]=T.useState("");T.useEffect(()=>{(async()=>{if(r&&r!=="general")try{console.log(" Loading AI learning data for file type:",r);const L=await Sc(r),U=Array.isArray(L)?L:[];g(U),console.log(" AI learning data loaded:",U.length,"entries")}catch(L){console.warn("Failed to load AI learning data in useEffect:",L),g([])}else g([])})()},[r]);const Fe=async()=>{try{console.log(" Loading CSVs from backend and localStorage...");const P=await Pn();console.log(" Supabase CSVs:",P.length,"files");const L=JSON.parse(localStorage.getItem("savedCSVs")||"[]");console.log(" LocalStorage CSVs:",L.length,"files");const U=P.map(H=>({...H,fileName:H.file_name,fileType:H.file_type,uploadedAt:H.uploaded_at,totalRecords:H.total_records,accountCategories:H.account_categories,bucketAssignments:H.bucket_assignments,includedItems:H.included_items,isActive:H.is_active!==!1,previewData:H.preview_data}));L.forEach(H=>{if(!P.some(se=>se.id===H.id||se.file_name===H.fileName&&se.uploaded_at===H.uploadedAt)&&H.isActive){const se={id:H.id,file_name:H.fileName,file_type:H.fileType,uploaded_at:H.uploadedAt,total_records:H.totalRecords,account_categories:H.accountCategories,bucket_assignments:H.bucketAssignments,included_items:H.includedItems,tags:H.tags,is_active:H.isActive,preview_data:H.previewData,fileName:H.fileName,fileType:H.fileType,uploadedAt:H.uploadedAt,totalRecords:H.totalRecords,accountCategories:H.accountCategories,bucketAssignments:H.bucketAssignments,includedItems:H.includedItems,isActive:H.isActive,previewData:H.previewData};U.push(se)}});const q=U.filter(H=>H.is_active!==!1&&H.isActive!==!1);F(q),console.log(" Total active CSVs loaded:",q.length,"files"),console.log(" CSV details:",q.map(H=>{var le,se;return{id:H.id,fileName:H.file_name||H.fileName,fileType:H.file_type||H.fileType,totalRecords:H.total_records||H.totalRecords,isActive:H.is_active!==!1&&H.isActive!==!1,hasPreviewData:!!(H.preview_data||H.previewData),previewDataLength:((le=H.preview_data)==null?void 0:le.length)||((se=H.previewData)==null?void 0:se.length)||0,bucketAssignmentsCount:Object.keys(H.bucket_assignments||H.bucketAssignments||{}).length}}));const Z=[...P,...L].filter(H=>H.is_active===!1||H.isActive===!1);Z.length>0&&console.log(" Found inactive CSVs:",Z.length,Z.map(H=>({id:H.id,fileName:H.file_name||H.fileName,isActive:H.is_active!==!1&&H.isActive!==!1})))}catch(P){console.error(" Error loading CSVs:",P);try{const U=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(q=>q.isActive);F(U),console.log(" Fallback to localStorage:",U.length,"files")}catch(L){console.error(" Error loading from localStorage:",L),F([])}}};T.useEffect(()=>{u([]),j(!1),K(null),O({}),b({}),y({}),e(null),p(null),C(!1),console.log(" Cleared preview data on component mount to prevent double-counting"),Fe()},[]),T.useEffect(()=>{const P=L=>{console.log(" Received dataUpdated event:",L.detail),F(U=>[...U])};return window.addEventListener("dataUpdated",P),()=>{window.removeEventListener("dataUpdated",P)}},[]),T.useEffect(()=>{const P={income_item:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income","Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee","Income","Revenue"],income_total:["Total Income","Total Operating Income","Gross Income","Total Revenue","Income Total"],expense_item:["Maintenance","Repair","Fix","Service","Upkeep","Renovation","Utilities","Electric","Water","Gas","Trash","Insurance","Tax","Management","Admin","Administrative","Office","Management Fee","Expense","Cost"],expense_total:["Total Expense","Total Operating Expense","Total Costs","Expense Total"],cash_amount:["Cash","Cash Equivalent","Bank","Checking","Savings","Money Market"],total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};let L=null;if(r){const V=localStorage.getItem(`bucketTerms_${r}`);if(V)try{L=JSON.parse(V)[r],console.log(` Loaded bucket terms for CSV type: ${r}`)}catch(Z){console.error(`Error loading bucket terms for CSV type ${r}:`,Z)}}if(L||(L=localStorage.getItem("bucketTerms")),L)try{const V=typeof L=="string"?JSON.parse(L):L;D({...P,...V})}catch(V){console.error("Error loading saved bucket terms:",V),D(P)}else D(P);const U=localStorage.getItem("customBuckets");if(U)try{const V=JSON.parse(U);ee(V)}catch{ee({})}const q=localStorage.getItem("bucketCategories");if(q)try{const V=JSON.parse(q);xe(V)}catch{xe({})}},[r]);const Ie=P=>P.time_series?Object.values(P.time_series).some(L=>{const U=typeof L=="number"?L:parseFloat(L);return!isNaN(U)&&U!==0}):!1,Ce=P=>P.toLowerCase().includes("total"),ze=(P,L)=>{if((L==null?void 0:L.shiftKey)&&w.size>0){const q=c.map(H=>H.account_name).filter(Boolean),V=q.findIndex(H=>w.has(H)),Z=q.indexOf(P);if(V!==-1&&Z!==-1){const H=Math.min(V,Z),le=Math.max(V,Z);_(se=>{const he=new Set(se);for(let ye=H;ye<=le;ye++)he.add(q[ye]);return A(he.size>0),he});return}}_(q=>{const V=new Set(q);return V.has(P)?V.delete(P):V.add(P),A(V.size>0),V})},Ft=()=>{if(!c||c.length===0)return;const P=c.map(L=>L.account_name).filter(Boolean);_(new Set(P)),A(!0)},Zt=()=>{_(new Set),A(!1)},vs=P=>{w.size!==0&&(b(L=>{const U={...L};return w.forEach(q=>{U[q]=P}),U}),console.log(` Assigned ${w.size} items to bucket: ${P}`),Zt())},Rt=P=>{if(!P.time_series)return 0;const L=Object.keys(P.time_series).filter(U=>U.toLowerCase().includes("total")||U.toLowerCase().includes("sum")||U.toLowerCase().includes("grand total"));if(L.length>0){const U=P.time_series[L[0]],q=typeof U=="number"?U:parseFloat(U);return isNaN(q)?0:q}return Object.values(P.time_series).reduce((U,q)=>{const V=typeof q=="number"?q:parseFloat(q);return isNaN(V)?U:U+V},0)},dt=(P,L)=>{const U={},q={},V={};return P.forEach(Z=>{Z.account_name&&(U[Z.account_name]=Ie(Z),Ie(Z)||console.log(` Auto-deselected ${Z.account_name} (no non-zero values) - but keeping visible`))}),P.forEach(Z=>{if(Z.account_name&&U[Z.account_name]){const H=Rt(Z);if(H!==0){const le=H.toString();V[le]||(V[le]=[]),V[le].push(Z.account_name)}}}),Object.entries(V).forEach(([Z,H])=>{if(H.length>1){console.log(` Found ${H.length} items with same total value ${Z}:`,H);const le=H[0];for(let se=1;se<H.length;se++){const he=H[se];U[he]=!1,console.log(` Deselected ${he} (duplicate total value ${Z}, keeping ${le})`)}console.log(` Kept ${le} for total value ${Z}`)}}),P.forEach(Z=>{if(Z.account_name&&U[Z.account_name]){const H=L[Z.account_name]||Pr(Z.account_name,"unknown");Ce(H)&&(q[H]?(U[Z.account_name]=!1,console.log(` Deselected ${Z.account_name} to prevent double-counting in total bucket: ${H} (${q[H]} already selected)`)):(q[H]=Z.account_name,console.log(` Selected ${Z.account_name} for total bucket: ${H}`)))}}),U},sn=async P=>{if(e(P),p(null),j(!1),C(!1),P.type==="application/pdf"||P.name.toLowerCase().endsWith(".pdf")){n("pdf"),p("PDF processing is coming soon! Please upload a CSV file for now.");return}try{console.log(" Loading AI learning data for file type:",r);const L=await Sc(r),U=Array.isArray(L)?L:[];g(U),console.log(" Loaded AI learning data:",U.length,"entries"),U.length>0&&(console.log(" Available AI learning patterns:"),U.forEach(q=>{console.log(`   ${q.account_name}  ${q.user_category}`)}))}catch(L){console.warn("Failed to load AI learning data:",L),g([])}Ec.parse(P,{header:!0,preview:100,complete:L=>{const U=L.meta.fields||[];L.data.slice(0,5),i(U);const q={};for(const V of U){const Z=V.toLowerCase();/account|name|description|item/.test(Z)?q[V]={field:"",score:1}:/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|q1|q2|q3|q4|total/.test(Z)?q[V]={field:"time_series",score:.9}:q[V]={field:"",score:0}}a(q),Ec.parse(P,{header:!0,complete:async V=>{const Z=V.data.filter(H=>H&&Object.keys(H).length>0);console.log("Processing",Z.length,"total rows from CSV"),O({});try{f(!0);const H=Z.map((se,he)=>{const ye={};Object.entries(q).forEach(([je,Ze])=>{se[je]!==void 0&&(ye[Ze.field]=se[je])});const at=Object.keys(se).find(je=>je.toLowerCase().includes("account")||je.toLowerCase().includes("name")||je.toLowerCase().includes("description")||je.toLowerCase().includes("item"))||Object.keys(se)[0],bt=se[at],Ge={};return Object.keys(se).forEach(je=>{if(je!==at){let Ze=String(se[je]||"").trim();Ze=Ze.replace(/,/g,""),Ze.startsWith("(")&&Ze.endsWith(")")&&(Ze="-"+Ze.slice(1,-1));const Tn=parseFloat(Ze);isNaN(Tn)||(Ge[je]=Tn)}}),ye.account_name=bt,ye.time_series=Ge,ye.ai_category="unknown",ye});u(H),j(!0);const le={};H.forEach(se=>{se.account_name&&(le[se.account_name]=Ie(se),Ie(se)||console.log(` Auto-deselected ${se.account_name} (no non-zero values) - but keeping visible`))}),y(le),f(!1);try{const se=await fetch(`${Kv}/api/categorize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:H,file_type:r})});if(se.ok){const he=await se.json();console.log(" AI categorization complete:",he.summary),u(he.categorized_data);const ye={};he.categorized_data.forEach(bt=>{bt.account_name&&(ye[bt.account_name]=bt.ai_category)}),O(ye);const at={};he.categorized_data.forEach(bt=>{if(bt.account_name){const Ge=Pr(bt.account_name,bt.ai_category);at[bt.account_name]=Ge,console.log(` Auto-assigned ${bt.account_name}  ${Ge} (from AI learning)`)}}),b(at)}}catch(se){console.warn("AI backend error, using manual categorization:",se)}}catch(H){console.error("Data processing error:",H),p(`Data processing failed: ${H}`),f(!1)}}})}})},bs=async(P,L)=>{if(b(U=>({...U,[P]:L})),console.log(` Assigned ${P} to bucket: ${L}`),L!=="exclude"&&P&&L)try{await Uf(r,P,L),console.log(` Learned bucket assignment: ${P}  ${L}`),g(U=>{const q=Array.isArray(U)?U:[],V=q.findIndex(Z=>Z.account_name&&Z.account_name.toLowerCase()===P.toLowerCase());if(V>=0){const Z=[...q];return Z[V]={...Z[V],user_category:L},Z}else return[...q,{account_name:P,user_category:L,file_type:r}]})}catch(U){console.warn("Failed to save bucket assignment to AI learning:",U)}},Pr=(P,L)=>{const U=P.toLowerCase();if(x&&Array.isArray(x)&&x.length>0){const q=x.find(V=>V.account_name&&V.account_name.toLowerCase()===U);if(q&&q.user_category)return console.log(` Using AI learning for ${P}: ${q.user_category} (learned from previous uploads)`),q.user_category}for(const[q,V]of Object.entries(I))for(const Z of V)if(U.toLowerCase().includes(Z.toLowerCase()))return q;if(r==="cash_flow"){if(L==="income")return"income_item";if(L==="expense")return"expense_item";if(L==="cash")return"cash_amount"}return L==="income"?"other_income":L==="expense"?"operating_expenses":"exclude"},cd=(P,L)=>{const U=P.toLowerCase(),q=[];if(x&&Array.isArray(x)&&x.length>0){const V=x.find(Z=>Z.account_name&&Z.account_name.toLowerCase()===U);V&&V.user_category&&(q.push(V.user_category),console.log(` AI learning suggestion for ${P}: ${V.user_category} (learned from previous uploads)`))}for(const[V,Z]of Object.entries(I))for(const H of Z)if(U.toLowerCase().includes(H.toLowerCase())){q.includes(V)||q.push(V);break}return q.length===0&&(r==="cash_flow"?L==="income"?q.push("income_item","income_total","rental_income","other_income"):L==="expense"?q.push("expense_item","expense_total","operating_expenses","maintenance_expenses"):L==="cash"&&q.push("cash_amount","cash_change"):L==="income"?q.push("other_income","rental_income"):L==="expense"&&q.push("operating_expenses","maintenance_expenses","management_expenses")),q.includes("exclude")||q.push("exclude"),q},ud=()=>{const P={};Array.isArray(c)&&c.forEach(L=>{L.account_name&&(P[L.account_name]=!0)}),y(P)},tl=()=>{const P={};Array.isArray(c)&&c.forEach(L=>{L.account_name&&(P[L.account_name]=!1)}),y(P),console.log(" Deselected all items:",P)},rl=P=>{y(L=>{const U={...L};return Object.entries(R).forEach(([q,V])=>{V===P&&(U[q]=!0)}),U})},nl=async()=>{if(t){f(!0),p(null),j(!1),C(!1);try{Ec.parse(t,{header:!0,complete:async P=>{const L=P.data;console.log(` Processing ${L.length} rows`),L.length>0&&(console.log(" Sample raw CSV row:",L[0]),console.log(" Sample raw CSV row keys:",Object.keys(L[0])));const U=L.filter(q=>Object.keys(q).length>1).map((q,V)=>{const Z={};Object.entries(o).forEach(([he,ye])=>{q[he]!==void 0&&(Z[ye.field]=q[he])});const H=Object.keys(q).find(he=>he.toLowerCase().includes("account")||he.toLowerCase().includes("name")||he.toLowerCase().includes("description")||he.toLowerCase().includes("item"))||Object.keys(q)[0],le=q[H],se={};return Object.keys(q).forEach(he=>{if(he!==H){let ye=String(q[he]||"").trim();if(V<3&&console.log(` Raw value for ${he}: "${ye}"`),!ye||ye===""||ye==="-"){se[he]=0;return}let at=!1;ye.startsWith("(")&&ye.endsWith(")")&&(at=!0,ye=ye.slice(1,-1)),ye=ye.replace(/,/g,"");const bt=parseFloat(ye);if(isNaN(bt)){const Ge=ye.match(/-?\d+\.?\d*/);if(Ge){const je=parseFloat(Ge[0]);isNaN(je)?se[he]=0:se[he]=at?-je:je}else se[he]=0}else{const Ge=at?-bt:bt;se[he]=Ge,V<3&&console.log(` Parsed ${he}: ${Ge}`)}}}),Z.account_name=le,Z.time_series=se,Z.row_index=V,Z.file_type=r,Z});try{console.log(" Sending data to AI backend for categorization...");const q=await fetch(`${Kv}/api/categorize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:U,file_type:r})});if(q.ok){const V=await q.json();console.log(" AI categorization complete:",V.summary),console.log(" Sample categorized row:",V.categorized_data[0]),u(V.categorized_data);const Z={};V.categorized_data.forEach(se=>{se.account_name&&(Z[se.account_name]=se.ai_category,se.time_series?console.log(` time_series preserved for ${se.account_name}:`,Object.keys(se.time_series)):console.warn(` Missing time_series for ${se.account_name}`))}),O(Z);const H={};V.categorized_data.forEach(se=>{if(se.account_name){const he=Pr(se.account_name,se.ai_category);H[se.account_name]=he,console.log(` Auto-assigned ${se.account_name}  ${he} (from AI learning)`)}}),b(H);const le=dt(V.categorized_data,H);y(le)}else{console.warn("AI backend not available, using manual categorization"),u(U),O({});const V={};U.forEach(H=>{if(H.account_name){const le=Pr(H.account_name,"unknown");V[H.account_name]=le,console.log(` Auto-assigned ${H.account_name}  ${le} (from AI learning, manual mode)`)}}),b(V);const Z=dt(U,V);y(Z)}}catch(q){console.warn("AI backend error, using manual categorization:",q),u(U),O({});const V={};U.forEach(H=>{if(H.account_name){const le=Pr(H.account_name,"unknown");V[H.account_name]=le,console.log(` Auto-assigned ${H.account_name}  ${le} (from AI learning, AI error fallback)`)}}),b(V);const Z=dt(U,V);y(Z)}j(!0),f(!1)},error:P=>{console.error("CSV parsing error:",P),p(`CSV parsing failed: ${P.message}`),f(!1)}})}catch(P){console.error("Preview error:",P),p(`Preview failed: ${P.message}`),f(!1)}}},dd=async P=>{try{console.log(" Saving bucket assignments to AI learning for file type:",P.fileType);const L=P.bucketAssignments||{},U=P.accountCategories||{};for(const[q,V]of Object.entries(L))if(V&&V!=="exclude"&&q&&typeof V=="string"){const Z=U[q]||"unknown";await Uf(P.fileType,q,V),console.log(` Learned: ${q}  ${V} (${Z})`)}console.log(" Bucket assignments saved to AI learning")}catch(L){console.error(" Error saving bucket assignments to AI:",L)}},po=async()=>{if(!(!c.length||!t)){f(!0),p(null);try{const P=JSON.parse(localStorage.getItem("savedCSVs")||"[]"),L=P.find(H=>H.fileName===t.name&&H.isActive);if(L){if(!window.confirm(`A CSV with the same filename "${t.name}" already exists.

Existing CSV: ${L.totalRecords} records, uploaded ${new Date(L.uploadedAt).toLocaleDateString()}
New CSV: ${c.length} records

Do you want to replace the existing CSV with this new one?

Click "OK" to replace, or "Cancel" to keep both (rename the file to avoid conflicts).`)){p("Upload cancelled. Please rename the file to avoid conflicts.");return}const le=P.filter(se=>se.id!==L.id);localStorage.setItem("savedCSVs",JSON.stringify(le)),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_replaced",oldCsvId:L.id,fileName:t.name}}))}const U=c,q={};Object.entries(R).forEach(([H,le])=>{q[H]=le});let V;M?V={...M,totalRecords:c.length,accountCategories:q,bucketAssignments:Pg(),includedItems:v,tags:Dg(),previewData:U}:V={id:Date.now().toString(),fileName:t.name,fileType:r,uploadedAt:new Date().toISOString(),totalRecords:c.length,accountCategories:q,bucketAssignments:Pg(),includedItems:v,tags:Dg(),isActive:!0,previewData:U},console.log(" Saving CSV record:",{fileName:V.fileName,accountCategoriesCount:Object.keys(V.accountCategories).length,bucketAssignmentsCount:Object.keys(V.bucketAssignments).length,previewDataCount:V.previewData.length,sampleAccountNames:Object.keys(V.accountCategories).slice(0,3),samplePreviewAccountNames:V.previewData.slice(0,3).map(H=>H.account_name)});try{const H=or.getCurrentUser();H&&await _g({id:V.id,file_name:V.fileName,file_type:V.fileType,uploaded_at:V.uploadedAt,total_records:V.totalRecords,account_categories:V.accountCategories,bucket_assignments:V.bucketAssignments,included_items:V.includedItems,tags:V.tags,is_active:V.isActive,preview_data:V.previewData},H.id)&&console.log(" CSV data saved to Supabase successfully")}catch(H){console.warn(" Failed to save to Supabase, using localStorage only:",H)}const Z=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(M){const H=Z.findIndex(le=>le.id===M.id);H!==-1&&(Z[H]=V)}else Z.push(V);localStorage.setItem("savedCSVs",JSON.stringify(Z)),C(!0),console.log("Data saved to database:",c.length,"records"),await dd(V),M?(u([]),j(!1),K(null),await Fe(),ut(`CSV "${V.fileName}" updated successfully!`),De(!0),setTimeout(()=>{De(!1)},3e3)):(u([]),j(!1),O({}),b({}),y({}),e(null),await Fe(),ut('CSV saved successfully! Go to "CSV Management" tab to review and adjust categorizations.'),De(!0),setTimeout(()=>{De(!1)},3e3))}catch(P){console.error("Save error:",P),p(`Save failed: ${P.message}`)}finally{f(!1)}}},hd=P=>{const L={cash_flow:"bg-blue-100 text-blue-800",balance_sheet:"bg-green-100 text-green-800",rent_roll:"bg-purple-100 text-purple-800",income_statement:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"};return L[P]||L.general},fd=P=>{const L=(P.previewData||P.preview_data||[]).filter(V=>(P.includedItems||P.included_items||{})[V.account_name]===!0),U={};Object.entries(P.accountCategories||P.account_categories||{}).forEach(([V,Z])=>{(P.includedItems||P.included_items||{})[V]===!0&&(U[V]=Z)});const q={};Object.entries(P.bucketAssignments||P.bucket_assignments||{}).forEach(([V,Z])=>{(P.includedItems||P.included_items||{})[V]===!0&&(q[V]=Z)}),K(P),W(!0),u(L),O(U),b(q),y(P.includedItems||{}),j(!0),console.log(" Previewing CSV (filtered):",P.fileName,"with",L.length,"included records")},pd=async P=>{console.log(" Editing CSV data:",{fileName:P.fileName||P.file_name,accountCategoriesCount:Object.keys(P.accountCategories||P.account_categories||{}).length,bucketAssignmentsCount:Object.keys(P.bucketAssignments||P.bucket_assignments||{}).length,includedItemsCount:Object.keys(P.includedItems||P.included_items||{}).length,previewDataCount:(P.previewData||P.preview_data||[]).length,sampleAccountCategories:Object.keys(P.accountCategories||P.account_categories||{}).slice(0,3),sampleBucketAssignments:Object.keys(P.bucketAssignments||P.bucket_assignments||{}).slice(0,3),sampleIncludedItems:Object.keys(P.includedItems||P.included_items||{}).slice(0,3),bucketAssignmentsData:P.bucketAssignments||P.bucket_assignments||{},bucketAssignmentsKeys:Object.keys(P.bucketAssignments||P.bucket_assignments||{}),bucketAssignmentsValues:Object.values(P.bucketAssignments||P.bucket_assignments||{})});try{console.log(" Loading AI learning data for editing CSV with file type:",P.fileType||P.file_type);const U=await Sc(P.fileType||P.file_type),q=Array.isArray(U)?U:[];g(q),console.log(" Loaded AI learning data for editing:",q.length,"entries")}catch(U){console.warn("Failed to load AI learning data for editing:",U),g([])}K(P),W(!1),u(P.previewData||P.preview_data||[]),O(P.accountCategories||P.account_categories||{});const L=P.bucketAssignments||P.bucket_assignments||{};console.log(" Loading bucket assignments:",{source:P.bucketAssignments?"bucketAssignments":"bucket_assignments",count:Object.keys(L).length,assignments:L}),b(L),y(P.includedItems||P.included_items||{}),j(!0),console.log(" Editing CSV:",P.fileName||P.file_name,"with",(P.previewData||P.preview_data||[]).length,"records")},sl=async P=>{const L=N.find(q=>q.id===P);if(!(!L||!window.confirm(`Are you sure you want to delete "${L.fileName}"?

This will permanently remove:
 ${L.totalRecords} records
 All categorizations and bucket assignments
 Dashboard data from this CSV

This action cannot be undone.`))){$(!0);try{const V=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(Z=>Z.id!==P);localStorage.setItem("savedCSVs",JSON.stringify(V)),await Fe(),(M==null?void 0:M.id)===P&&K(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_deleted",csvId:P,fileName:L.fileName}})),console.log(` CSV "${L.fileName}" deleted successfully`)}catch(q){console.error("Delete failed:",q),alert("Failed to delete CSV. Please try again.")}finally{$(!1)}}},go=()=>{const P={};return!c||c.length===0||(console.log(" Calculating current session totals for",Array.isArray(c)?c.length:0,"items"),Array.isArray(c)&&c.forEach(L=>{const U=L.account_name,q=R[U],V=m[U]||Pr(U,q),Z=v[U]===!0;if(!Z||!L.time_series)return;let H=0;console.log(` Debug ${U} time_series keys:`,Object.keys(L.time_series)),console.log(` Debug ${U} time_series values:`,L.time_series);const le=Object.keys(L.time_series).find(se=>se.toLowerCase()==="total"||se.toLowerCase()==="totals"||se.toLowerCase()==="grand total"||se.toLowerCase()==="sum");le&&L.time_series[le]!==void 0&&L.time_series[le]!==null?(H=typeof L.time_series[le]=="number"?L.time_series[le]:0,console.log(` ${U}: Using ${le} column = ${H}`)):(H=Object.entries(L.time_series).reduce((se,[he,ye])=>he.toLowerCase().includes("total")||he.toLowerCase().includes("sum")||he.toLowerCase().includes("grand")||typeof ye!="number"?se:se+ye,0),console.log(` ${U}: Summed monthly values = ${H}`)),console.log(` ${U}: bucket=${V}, total=${H}, included=${Z}`),V&&V!=="exclude"&&(P[V]=(P[V]||0)+H)}),console.log(" Current session bucket totals:",P)),P},il=()=>{const P={};console.log(" Calculating combined bucket totals for",N.length,"saved CSVs");const L=M&&c&&c.length>0;if(N.forEach((U,q)=>{var le,se;if(!U.isActive){console.log(` Skipping inactive CSV ${q+1}:`,U.fileName||U.file_name);return}if(L&&U.id===M.id){console.log(" Skipping CSV being edited to avoid double-counting:",U.fileName||U.file_name);return}console.log(` Processing CSV ${q+1}:`,U.fileName||U.file_name,"with",((le=U.previewData)==null?void 0:le.length)||((se=U.preview_data)==null?void 0:se.length)||0,"records");const V=U.previewData||U.preview_data||[];U.accountCategories||U.account_categories;const Z=U.bucketAssignments||U.bucket_assignments||{},H=U.includedItems||U.included_items||{};if(!Array.isArray(V)){console.log(` CSV ${q+1} previewData is not an array:`,typeof V,V);return}V.forEach(he=>{const ye=he.account_name,at=Z[ye];if(!(H[ye]===!0)||!he.time_series)return;let Ge=0;console.log(` Debug ${ye} time_series keys:`,Object.keys(he.time_series)),console.log(` Debug ${ye} time_series values:`,he.time_series);const je=Object.keys(he.time_series).find(Ze=>Ze.toLowerCase()==="total"||Ze.toLowerCase()==="totals"||Ze.toLowerCase()==="grand total"||Ze.toLowerCase()==="sum");je&&he.time_series[je]!==void 0&&he.time_series[je]!==null?(Ge=typeof he.time_series[je]=="number"?he.time_series[je]:0,console.log(` ${ye}: Using ${je} column = ${Ge}`)):(Ge=Object.entries(he.time_series).reduce((Ze,[Tn,cl])=>Tn.toLowerCase().includes("total")||Tn.toLowerCase().includes("sum")||Tn.toLowerCase().includes("grand")||typeof cl!="number"?Ze:Ze+cl,0),console.log(` ${ye}: Summed monthly values = ${Ge}`)),at&&at!=="exclude"&&(P[at]=(P[at]||0)+Ge,console.log(` Added ${Ge} to bucket ${at} from ${ye}`))})}),c&&c.length>0){console.log(" Adding current session totals for",c.length,"preview items");const U=go();Object.entries(U).forEach(([q,V])=>{P[q]=(P[q]||0)+V,console.log(` Added ${V} to bucket ${q} from current session`)})}return console.log(" Final bucket totals:",P),P},ol=Y.useMemo(()=>(console.log(" Recalculating allBucketTotals due to state change"),il()),[N,M,il]),er=Y.useMemo(()=>(console.log(" Recalculating currentSessionTotals"),go()),[go]),al=(P,L)=>{if(!L.trim())return;const U=L.trim().toLowerCase().split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ");D(q=>{const V={...q};return V[P]||(V[P]=[]),V[P].includes(U)||(V[P]=[...V[P],U]),V})},Nt=()=>{if(localStorage.setItem("bucketTerms",JSON.stringify(I)),localStorage.setItem("customBuckets",JSON.stringify(J)),r){const P=JSON.parse(localStorage.getItem(`bucketTerms_${r}`)||"{}");P[r]=I,localStorage.setItem(`bucketTerms_${r}`,JSON.stringify(P)),console.log(` Bucket terms saved for CSV type: ${r}`)}console.log(" Bucket terms and custom buckets saved:",{bucketTerms:I,customBuckets:J})},Hr=()=>{const P={total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};D(P),localStorage.setItem("bucketTerms",JSON.stringify(P))},ll=()=>{if(!ae.trim()||!te.trim())return;const P=ae.toLowerCase().replace(/[^a-z0-9]/g,"_"),L={label:ae.trim(),description:te.trim(),color:Ng(oe),icon:Q2(oe),category:oe};ee(U=>({...U,[P]:L})),D(U=>({...U,[P]:[]})),Q(""),ie(""),be("income"),de(!1)},gd=P=>{var H;const U=((H=li()[P])==null?void 0:H.label)||P;if(!window.confirm(`Are you sure you want to delete the "${U}" bucket? This will also remove all associated terms.`))return;J[P]&&ee(le=>{const se={...le};return delete se[P],se}),D(le=>{const se={...le};return delete se[P],se}),xe(le=>{const se={...le};return delete se[P],se});const q={...I};delete q[P],localStorage.setItem("bucketTerms",JSON.stringify(q));const V={...J};delete V[P],localStorage.setItem("customBuckets",JSON.stringify(V));const Z={...fe};delete Z[P],localStorage.setItem("bucketCategories",JSON.stringify(Z))},li=()=>{const P={...qT,...J};return Object.keys(P).forEach(L=>{fe[L]&&(P[L]={...P[L],category:fe[L],color:Ng(fe[L])})}),P},Ng=P=>{switch(P){case"income":return"bg-green-100 text-green-800";case"expense":return"bg-red-100 text-red-800";case"cash":return"bg-purple-100 text-purple-800";case"net_income":return"bg-blue-100 text-blue-800";case"exclude":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-800"}},Q2=P=>{switch(P){case"income":return"";case"expense":return"";case"cash":return"";case"net_income":return"";case"exclude":return"";default:return""}},Ag=P=>{switch(P){case"income":return"bg-green-100 text-green-800 border-green-200";case"expense":return"bg-red-100 text-red-800 border-red-200";case"cash":return"bg-purple-100 text-purple-800 border-purple-200";case"net_income":return"bg-blue-100 text-blue-800 border-blue-200";case"exclude":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Z2=({value:P,onChange:L,options:U,suggestions:q,className:V,isFromAILearning:Z,disabled:H})=>{const[le,se]=T.useState(!1),[he,ye]=T.useState(""),at=T.useRef(null);T.useEffect(()=>{const je=Ze=>{at.current&&!at.current.contains(Ze.target)&&(se(!1),ye(""))};return le&&document.addEventListener("mousedown",je),()=>{document.removeEventListener("mousedown",je)}},[le]);const bt=U.filter(({bucket:je})=>je.label.toLowerCase().includes(he.toLowerCase())),Ge=U.find(je=>je.key===P);return l.jsxs("div",{className:`relative ${V}`,ref:at,children:[l.jsxs("button",{type:"button",onClick:()=>!H&&se(!le),disabled:H,className:`w-full text-left px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 flex items-center justify-between whitespace-nowrap bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${Ge?Ag(Ge.bucket.category):"bg-white dark:bg-gray-700"} ${Z?"ring-2 ring-blue-300 dark:ring-blue-600":""} ${H?"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800":""}`,children:[l.jsxs("span",{className:"truncate flex items-center",children:[Ge?`${Ge.bucket.icon} ${Ge.bucket.label}`:"Select bucket...",Z&&l.jsx("span",{className:"ml-1 text-blue-500 dark:text-blue-400",title:"Auto-categorized from previous uploads",children:""})]}),l.jsx("span",{className:"text-gray-400 dark:text-gray-500 flex-shrink-0 ml-2",children:""})]}),le&&l.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[l.jsx("div",{className:"p-2",children:l.jsx("input",{type:"text",placeholder:"Search buckets...",value:he,onChange:je=>ye(je.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onClick:je=>je.stopPropagation()})}),bt.map(({key:je,bucket:Ze})=>{const Tn=q.includes(je),cl=Ze.category||"other";return l.jsxs("button",{type:"button",onClick:()=>{L(je),se(!1),ye("")},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-between whitespace-nowrap ${Ag(cl)}`,children:[l.jsxs("span",{className:"truncate",children:[Ze.icon," ",Ze.label]}),Tn&&l.jsx("span",{className:"text-yellow-500 dark:text-yellow-400 flex-shrink-0 ml-2",children:""})]},je)})]})]})},Pg=()=>{const P={};console.log(" Generating bucket assignments for accounts:",Object.keys(R)),console.log(" Current bucket assignments:",m);for(const[L,U]of Object.entries(R)){if(m[L]){P[L]=m[L],console.log(` ${L}  ${m[L]} (existing assignment)`);continue}const q=Pr(L,U);P[L]=q,console.log(` ${L}  ${q} (auto-generated for new account)`)}return console.log(" Final bucket assignments:",P),P},Dg=()=>{const P={};for(const L of Object.keys(R)){const U=L.toLowerCase(),q=[];/rent|rental/.test(U)&&q.push("rental"),/short term/.test(U)&&q.push("short-term"),/utility|water|garbage/.test(U)&&q.push("utility"),/management/.test(U)&&q.push("management"),/fee/.test(U)&&q.push("fee"),/income/.test(U)&&q.push("income"),/expense/.test(U)&&q.push("expense"),q.length>0&&(P[L]=q)}return P};return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"CSV Import with AI Parser"}),h&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4",children:l.jsx("div",{className:"flex",children:l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Error"}),l.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:l.jsx("p",{children:h})})]})})}),l.jsx("div",{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),l.jsxs("select",{value:r,onChange:P=>n(P.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"general",children:"General CSV"}),l.jsx("option",{value:"cash_flow",children:"Cash Flow Statement"}),l.jsx("option",{value:"balance_sheet",children:"Balance Sheet"}),l.jsx("option",{value:"rent_roll",children:"Rent Roll"}),l.jsx("option",{value:"income_statement",children:"Income Statement"}),l.jsx("option",{value:"pdf",children:"PDF Document"})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select the type of financial document to get better AI mapping suggestions"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CSV or PDF File"}),l.jsx("input",{type:"file",accept:".csv,.pdf",onChange:P=>{var U;const L=(U=P.target.files)==null?void 0:U[0];L&&sn(L)},className:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30"},t?t.name+t.lastModified:"file-input")]})]})}),!!s.length&&l.jsx("div",{className:"flex gap-3",children:l.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50",onClick:nl,disabled:d,children:d?"Processing...":" Refresh Preview"})}),!!c.length&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium mb-2 text-gray-900 dark:text-white",children:"CSV Data Preview"}),l.jsx("div",{className:"mb-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md",children:l.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[l.jsx("strong",{children:" Auto-Processed:"})," ",c.length,' records loaded and analyzed automatically. Review the AI categorization below and click "Save to Database" when ready.']})}),E&&!G&&l.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-300",children:"Ready to Save?"}),l.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:"Review your bucket assignments below and save your CSV data to the database."})]}),l.jsx("button",{className:`px-6 py-3 rounded-lg text-white font-semibold transition-colors text-lg ${d?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"}`,onClick:po,disabled:d,children:d?"Saving...":k?" Saved!":" Save to Database"})]})}),l.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[l.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-300",children:" CSV Data with Categorization v.1 beta"}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:'The AI Parser this tool uses isnt yet perfect. Please help by selecting and categorizing line items as "Income" or "Expense".'}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Look for Total Income, Total Expense, and Net Operating Income. Deselect all other Total Items."}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Keep adjusting the income/expense column until the summed total of items matches the selected total."}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Income/Expense items should match Total Income/Expense by the end to correctly populate the data page."}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:`Income/Expense will indicate a "Match" in the Income/Expense Summary Section once the total line items match the user's selected line item nominated as the Total Income/Expense line.`}),l.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[l.jsx("button",{onClick:ud,className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:" Select All"}),l.jsx("button",{onClick:tl,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:" Deselect All"}),l.jsx("div",{className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded",children:" Tip: Hold Shift + click to select ranges"}),l.jsx("button",{onClick:()=>rl("income"),className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:" Select Income Only"}),l.jsx("button",{onClick:()=>rl("expense"),className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:" Select Expense Only"}),l.jsxs("div",{className:"ml-4 pl-4 border-l border-blue-200 dark:border-blue-700",children:[l.jsx("button",{onClick:Ft,className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:" Select All Rows"}),l.jsx("button",{onClick:Zt,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ml-2",children:" Clear Selection"})]})]}),S&&l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[" Bulk Assignment (",w.size," items selected)"]})}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(li()).map(([P,L])=>l.jsxs("button",{onClick:()=>vs(P),className:`px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity whitespace-nowrap flex items-center gap-1 ${L.category==="income"?"bg-green-100 text-green-700":L.category==="expense"?"bg-red-100 text-red-700":L.category==="cash"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[l.jsx("span",{children:L.icon}),l.jsx("span",{className:"truncate",children:L.label})]},P))})]})})]}),l.jsx("div",{className:"overflow-x-auto max-h-[36rem]",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:"Include"}),l.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-gray-50 dark:bg-gray-700 z-10",children:"Select"}),l.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-gray-50 dark:bg-gray-700 z-10",children:"Account Name"}),l.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:"Dashboard Bucket"}),(()=>{const P=c.find(L=>L.time_series&&Object.keys(L.time_series).length>0);return P!=null&&P.time_series?Object.keys(P.time_series).map(L=>l.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:L.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase())},L)):[]})()]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:c.map((P,L)=>{const U=P.account_name,q=P.time_series||{},V=v[U]===!0;return P.time_series||console.warn(` Row ${L} missing time_series:`,P),l.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700 ${V?"":"opacity-50 bg-gray-100 dark:bg-gray-800"}`,children:[l.jsx("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-white dark:bg-gray-800 z-10",children:l.jsx("input",{type:"checkbox",checked:V,disabled:G,onChange:Z=>{G||y(H=>({...H,[U]:Z.target.checked}))},className:`w-4 h-4 text-blue-600 dark:text-blue-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2 ${G?"opacity-50 cursor-not-allowed":""}`})}),l.jsx("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-white dark:bg-gray-800 z-10",children:l.jsx("input",{type:"checkbox",checked:w.has(U),disabled:G,onChange:Z=>{G||ze(U,Z)},className:`w-4 h-4 text-purple-600 dark:text-purple-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-2 ${G?"opacity-50 cursor-not-allowed":""}`})}),l.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-white dark:bg-gray-800 z-10",children:l.jsx("div",{className:"max-w-xs truncate font-medium",title:String(U),children:U||"-"})}),l.jsx("td",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:l.jsx("div",{className:"space-y-1",children:(()=>{const Z=cd(U,R[U]||P.ai_category),H=m[U]||Pr(U,R[U]||P.ai_category);U&&m[U]&&console.log(` Found bucket assignment for ${U}:`,m[U]);const le=li(),se=Object.entries(le).map(([ye,at])=>({key:ye,bucket:at})),he=x&&Array.isArray(x)&&x.length>0&&x.some(ye=>ye.account_name&&ye.account_name.toLowerCase()===U.toLowerCase()&&ye.user_category===H);return l.jsx(Z2,{value:H,onChange:ye=>bs(U,ye),options:se,suggestions:Z,className:"w-full",isFromAILearning:he,disabled:G})})()})}),(()=>{const Z=c.find(le=>le.time_series&&Object.keys(le.time_series).length>0);return(Z!=null&&Z.time_series?Object.keys(Z.time_series):[]).map((le,se)=>l.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 text-right",children:l.jsx("div",{className:"max-w-xs truncate font-mono text-xs",title:String(q[le]||0),children:q[le]!==null&&q[le]!==void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(q[le]):"-"})},se))})()]},L)})})]})}),l.jsxs("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t flex items-center justify-between",children:[l.jsxs("span",{children:["Showing all ",c.length," records"]}),E&&!G&&l.jsx("button",{className:`px-4 py-2 rounded text-white font-semibold transition-colors text-sm ${d?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"}`,onClick:po,disabled:d,children:d?"Saving...":k?" Saved!":" Save to Database"})]})]}),c&&c.length>0&&l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg shadow-sm border border-green-200",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-green-200",children:[l.jsx("h3",{className:"text-base font-semibold text-green-900",children:" Total Amounts"}),l.jsxs("p",{className:"text-green-700 mt-1 text-sm",children:["Live preview of how your current ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV"," will affect dashboard totals"]}),l.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-green-600",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Scroll to browse all sections"})]})]}),l.jsx("div",{className:"p-4",style:{height:"300px",overflowY:"auto"},children:(()=>{const P=ol,L=["income_item","rental_income","other_income"].reduce((le,se)=>le+(er[se]||0),0),U=er.income_total||er.total_income||er.total_operating_income||0,q=["expense_item","operating_expenses","maintenance_expenses","management_expenses"].reduce((le,se)=>le+(er[se]||0),0),V=er.expense_total||er.total_expenses||er.total_operating_expense||0,Z=Math.abs(L-U)>.01,H=Math.abs(q-V)>.01;return console.log(" Real-Time Impact Debug:",{currentSessionTotals:er,incomeItems:L,incomeTotal:U,expenseItems:q,expenseTotal:V,incomeMismatch:Z,expenseMismatch:H}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h4",{className:"text-sm font-semibold text-green-800 flex items-center gap-2",children:[" Income Summary",Z?l.jsx("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:" Mismatch"}):l.jsx("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:" Match"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-3 border-2 border-green-300 bg-green-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-green-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-green-800 text-sm",children:"Income Total"})]}),U>0&&l.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+$",U.toLocaleString()]})]}),l.jsxs("div",{className:"text-lg font-bold text-green-900",children:["$",(P.income_total||P.total_income||P.total_operating_income||0).toLocaleString()]}),l.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Total (all CSVs)"})]}),l.jsxs("div",{className:"p-3 border border-green-200 bg-green-25 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-green-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-green-800 text-sm",children:"Income Items"})]}),L>0&&l.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+$",L.toLocaleString()]})]}),l.jsxs("div",{className:"text-lg font-bold text-green-900",children:["$",L.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["Sum of all income line items (this ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV",")"]})]})]}),Z?l.jsxs("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-1 text-amber-800",children:[l.jsx("span",{className:"text-amber-600 text-xs",children:""}),l.jsx("span",{className:"font-medium text-xs",children:"Income Mismatch Detected"})]}),l.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Income Total ($",U.toLocaleString(),") doesn't match Income Items ($",L.toLocaleString(),"). Please edit your ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):l.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-1 text-green-800",children:[l.jsx("span",{className:"text-green-600 text-xs",children:""}),l.jsx("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h4",{className:"text-sm font-semibold text-red-800 flex items-center gap-2",children:[" Expense Summary",H?l.jsx("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:" Mismatch"}):l.jsx("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:" Match"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-3 border-2 border-red-300 bg-red-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-red-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Total"})]}),V>0&&l.jsxs("span",{className:"text-xs text-red-600 font-medium",children:["+$",V.toLocaleString()]})]}),l.jsxs("div",{className:"text-lg font-bold text-red-900",children:["$",(P.expense_total||P.total_expenses||P.total_operating_expense||0).toLocaleString()]}),l.jsx("div",{className:"text-xs text-red-700 mt-1",children:"Total (all CSVs)"})]}),l.jsxs("div",{className:"p-3 border border-red-200 bg-red-25 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-red-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Items"})]}),q>0&&l.jsxs("span",{className:"text-xs text-red-600 font-medium",children:["+$",q.toLocaleString()]})]}),l.jsxs("div",{className:"text-lg font-bold text-red-900",children:["$",q.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-red-700 mt-1",children:["Sum of all expense line items (this ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV",")"]})]})]}),H?l.jsxs("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-1 text-amber-800",children:[l.jsx("span",{className:"text-amber-600 text-xs",children:""}),l.jsx("span",{className:"font-medium text-xs",children:"Expense Mismatch Detected"})]}),l.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Expense Total ($",V.toLocaleString(),") doesn't match Expense Items ($",q.toLocaleString(),"). Please edit your ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):l.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-1 text-green-800",children:[l.jsx("span",{className:"text-green-600 text-xs",children:""}),l.jsx("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:" Net Income & Cash"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-3 border-2 border-blue-300 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-1",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-blue-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-blue-800 text-sm",children:"Net Operating Income"})]})}),l.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["$",(P.net_operating_income||0).toLocaleString()]}),l.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"Income - Expenses"})]}),l.jsxs("div",{className:"p-3 border-2 border-purple-300 bg-purple-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-purple-600 text-sm",children:""}),l.jsx("span",{className:"font-semibold text-purple-800 text-sm",children:"Cash Amount"})]}),(er.cash_amount||0)>0&&l.jsxs("span",{className:"text-xs text-purple-600 font-medium",children:["+$",(er.cash_amount||0).toLocaleString()]})]}),l.jsxs("div",{className:"text-lg font-bold text-purple-900",children:["$",(P.cash_amount||0).toLocaleString()]}),l.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"Cash and cash equivalents"})]})]}),l.jsxs("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs font-medium",children:"Live Updates"})]}),l.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["These totals update automatically as you change bucket assignments or include/exclude items from your ",r==="cash_flow"?"Cash Flow":r==="balance_sheet"?"Balance Sheet":r==="rent_roll"?"Rent Roll":r==="maintenance_log"?"Maintenance Log":"CSV","."]})]})]})]})})()})]}),M&&l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[G?" Preview Mode":" Edit Mode",": ",M.fileName]}),l.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${hd(M.fileType)}`,children:M.fileType.replace("_"," ")}),l.jsxs("span",{className:"text-sm text-gray-500",children:[M.totalRecords," records"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>K(null),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Close"}),!G&&l.jsx("button",{onClick:()=>{console.log(" Saving changes for:",M.fileName)},className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save Changes"})]})]})}),l.jsx("div",{className:"p-6",children:G?l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Spreadsheet Preview"}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b",children:"Account Name"}),(()=>{const P=M.previewData.find(L=>L.time_series&&Object.keys(L.time_series).length>0);return P!=null&&P.time_series?Object.keys(P.time_series).map(L=>l.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 border-b",children:L.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase())},L)):[]})()]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:M.previewData.slice(0,20).map((P,L)=>{const U=P.time_series||{};return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-3 py-2 text-gray-900 border-b font-medium",children:P.account_name||"-"}),(()=>{const q=M.previewData.find(Z=>Z.time_series&&Object.keys(Z.time_series).length>0);return(q!=null&&q.time_series?Object.keys(q.time_series):[]).map((Z,H)=>l.jsx("td",{className:"px-3 py-2 text-gray-900 border-b text-right font-mono text-xs",children:U[Z]!==null&&U[Z]!==void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(U[Z]):"-"},H))})()]},L)})})]})}),M.previewData.length>20&&l.jsxs("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t",children:["Showing first 20 rows of ",M.previewData.length," total records"]})]})]}):l.jsx("div",{className:"text-center py-8",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[l.jsx("div",{className:"text-blue-600 mb-4",children:l.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:" Editing in Main Interface"}),l.jsx("p",{className:"text-blue-700 mb-4",children:"The CSV data with categorization interface is now active above. You can edit bucket assignments, include/exclude items, and make changes directly in the main categorization table."}),l.jsxs("div",{className:"text-sm text-blue-600",children:[l.jsx("p",{children:" Use the categorization table above to edit your data"}),l.jsx("p",{children:' Changes will be saved when you click "Save to Database"'}),l.jsx("p",{children:" Close this panel when you're done editing"})]})]})})})]}),l.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:" AI Bucket Management"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Customize how the AI parses CSV files and assigns buckets"}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[Object.entries(li()).slice(0,5).map(([P,L])=>{var U;return l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${L.color}`,title:`${L.label}: ${((U=I[P])==null?void 0:U.length)||0} terms`,children:[L.icon,l.jsx("span",{className:"text-xs",children:L.label})]},P)}),Object.entries(li()).length>5&&l.jsx("button",{onClick:()=>ue(!ge),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Click to view all buckets",children:l.jsx("span",{children:"..."})})]}),ge&&l.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"All Active Buckets"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>de(!0),className:"px-2 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700",title:"Add new bucket",children:"+ Add Bucket"}),l.jsx("button",{onClick:()=>ue(!1),className:"text-gray-500 hover:text-gray-700 text-xs",children:""})]})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Object.entries(li()).map(([P,L])=>{var U,q;return l.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${L.color} group hover:shadow-sm transition-shadow`,children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-shrink-0",children:[l.jsx("span",{className:"text-lg",children:L.icon}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium text-sm truncate",children:L.label}),l.jsxs("div",{className:"text-xs opacity-75",children:[((U=I[P])==null?void 0:U.length)||0," terms"]})]})]}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:((q=I[P])==null?void 0:q.map((V,Z)=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white bg-opacity-50 rounded text-xs border group/term hover:bg-opacity-70 transition-colors",children:[V,l.jsx("button",{onClick:()=>{window.confirm(`Remove "${V}" from ${L.label}?`)&&D(H=>{var le;return{...H,[P]:((le=H[P])==null?void 0:le.filter((se,he)=>he!==Z))||[]}})},className:"opacity-0 group-hover/term:opacity-100 hover:bg-red-100 hover:text-red-600 rounded-full p-0.5 transition-all",title:`Remove "${V}"`,children:""})]},Z)))||l.jsx("span",{className:"text-xs opacity-50 italic",children:"No terms defined"})})}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[l.jsx("button",{onClick:()=>{const V=prompt(`Add term to ${L.label}:`);V&&V.trim()&&al(P,V.trim())},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Add term",children:"+"}),l.jsx("button",{onClick:()=>{var V;window.confirm(`Delete "${L.label}" bucket? This will remove all ${((V=I[P])==null?void 0:V.length)||0} terms.`)&&gd(P)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"Delete bucket",children:""})]})]},P)})}),l.jsx("div",{className:"mt-3 pt-2 border-t border-gray-300",children:l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[l.jsx("span",{children:"Hover over buckets to see quick actions"}),l.jsx("button",{onClick:Nt,className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:"Save Changes"})]})})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>X(!B),className:`px-3 py-1.5 rounded text-xs font-medium ${B?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:B?"Hide":"Show"}),l.jsx("button",{onClick:Nt,className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save"}),l.jsx("button",{onClick:()=>de(!re),className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:re?"Cancel":"Add Bucket"}),l.jsx("button",{onClick:Hr,className:"px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 text-xs font-medium",children:"Reset"})]})]})}),B&&l.jsxs("div",{className:"p-6",children:[re&&l.jsxs("div",{className:"mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:" Add New Bucket"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bucket Name"}),l.jsx("input",{type:"text",value:ae,onChange:P=>Q(P.target.value),placeholder:"e.g., Marketing Expenses",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),l.jsxs("select",{value:oe,onChange:P=>be(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:[l.jsx("option",{value:"income",children:"Income"}),l.jsx("option",{value:"expense",children:"Expense"}),l.jsx("option",{value:"net_income",children:"Net Income"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"exclude",children:"Exclude"})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),l.jsx("input",{type:"text",value:te,onChange:P=>ie(P.target.value),placeholder:"Brief description of what this bucket represents",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ll,className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:"Add Bucket"}),l.jsx("button",{onClick:()=>de(!1),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Cancel"})]})]}),l.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" How It Works"}),l.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Add terms:"}),' Type a term and click "Add" to include it in the bucket']}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Remove terms:"}),' Click "Remove" to delete unwanted terms']}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Delete buckets:"})," Click the  trash icon to remove entire buckets"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Adjust categories:"})," Change bucket category to control color coding (Income=Green, Expense=Red, Cash=Purple)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Case insensitive:"})," Terms are automatically converted to lowercase"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Partial matching:"})," AI looks for terms anywhere in account names"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Priority order:"})," First matching bucket wins (order matters)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Save changes:"}),' Click "Save Changes" to persist your settings']})]})]})]})]}),l.jsxs("details",{className:"mt-3",children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:" View Raw JSON Data"}),l.jsx("pre",{className:"text-xs border rounded p-2 max-h-80 overflow-auto bg-gray-50 mt-2",children:JSON.stringify(c,null,2)})]})]}),l.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:[" CSV Files (",N.length,")"]}),l.jsx("div",{className:"flex gap-1",children:l.jsx("button",{onClick:Fe,disabled:z,className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 text-xs flex items-center gap-1",title:"Refresh CSV list",children:l.jsx(Da,{className:`w-3 h-3 ${z?"animate-spin":""}`})})})]}),N.length===0?l.jsx("p",{className:"text-xs text-gray-500",children:"No CSV files found"}):l.jsxs("div",{className:"space-y-1",children:[N.slice(0,3).map(P=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(v4,{className:"w-3 h-3 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-700 truncate max-w-32",children:P.fileName}),l.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${P.isActive?"bg-green-500":"bg-gray-400"}`})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>fd(P),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Preview CSV (excludes deselected items)",children:l.jsx(Pa,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>pd(P),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit CSV (shows all items)",children:l.jsx(A4,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>sl(P.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete CSV",children:l.jsx(Uu,{className:"w-3 h-3"})})]})]},P.id)),N.length>3&&l.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",N.length-3," more files"]})]})]}),!!s.length&&l.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:" Header Mapping"}),l.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:"auto"})]}),l.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[" AI automatically mapped ",s.length," headers"]}),l.jsx("div",{className:"max-h-32 overflow-y-auto",children:l.jsx("div",{className:"space-y-1",children:s.map((P,L)=>l.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-white rounded border",children:[l.jsx("span",{className:"font-medium text-gray-800 truncate max-w-xs",title:P,children:P}),l.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[l.jsx("span",{className:"text-green-500",children:""}),P.toLowerCase().includes("account")||P.toLowerCase().includes("name")?"Auto-categorized by AI":"Auto-mapped to time-series"]})]},L))})})]}),l.jsx("div",{className:"space-y-6"}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[l.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Total Records"}),l.jsx("div",{className:"text-lg font-bold text-blue-900",children:c.length})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[l.jsx("div",{className:"text-sm font-medium text-green-800",children:" Included"}),l.jsx("div",{className:"text-lg font-bold text-green-900",children:Object.values(v).filter(P=>P===!0).length})]}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[l.jsx("div",{className:"text-sm font-medium text-gray-800",children:" Excluded"}),l.jsx("div",{className:"text-lg font-bold text-gray-900",children:Object.values(v).filter(P=>P===!1).length})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[l.jsx("div",{className:"text-sm font-medium text-green-800",children:" Income"}),l.jsx("div",{className:"text-lg font-bold text-green-900",children:Object.entries(R).filter(([P,L])=>L==="income"&&v[P]===!0).length})]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[l.jsx("div",{className:"text-sm font-medium text-red-800",children:" Expense"}),l.jsx("div",{className:"text-lg font-bold text-red-900",children:Object.entries(R).filter(([P,L])=>L==="expense"&&v[P]===!0).length})]})]}),we&&l.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-50 border border-green-200 rounded-md p-4 flex items-center space-x-2 shadow-lg",children:[l.jsx(Na,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{className:"text-green-800 font-medium",children:Me}),l.jsx("button",{onClick:()=>De(!1),className:"ml-2 text-green-600 hover:text-green-800",children:l.jsx(co,{className:"w-4 h-4"})})]})]})})}const KT=()=>{var s;const[t,e]=T.useState("import-flow"),r=[{id:"import-flow",label:"Import Flow",icon:Xp,description:"AI-powered CSV import with smart mapping"},{id:"upload",label:"Basic Upload",icon:kn,description:"Traditional CSV upload"}],n=()=>{switch(t){case"upload":return l.jsx(HT,{});case"import-flow":return l.jsx(Gv,{});default:return l.jsx(Gv,{})}};return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV Upload & Management"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Upload, parse, and manage your property data files"})]})})}),l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8",children:r.map(i=>l.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===i.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[l.jsx(i.icon,{className:"w-4 h-4"}),l.jsx("span",{children:i.label})]},i.id))})}),l.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:l.jsx("p",{className:"text-sm text-gray-600",children:(s=r.find(i=>i.id===t))==null?void 0:s.description})}),l.jsx("div",{className:"p-6",children:n()})]})})},GT=({onClose:t})=>{const[e,r]=T.useState(0),n=[{id:"dashboard",title:"Dashboard Overview",description:"Get a comprehensive view of your property portfolio with key metrics and performance indicators.",image:"/demo-screenshots/dashboard.png",features:["Real-time financial metrics","Property performance charts","Quick access to key data","Visual impact analysis"]},{id:"financials",title:"Financial Analysis",description:"Deep dive into your property finances with detailed breakdowns and trend analysis.",image:"/demo-screenshots/financials.png",features:["Monthly financial breakdowns","Expense categorization","Revenue tracking","Impact-based analysis"]},{id:"csv-import",title:"Smart CSV Import",description:"AI-powered data import with automatic categorization and bucket management.",image:"/demo-screenshots/csv-import.png",features:["AI-powered categorization","Automatic bucket assignment","Data validation","Preview before import"]},{id:"analytics",title:"Advanced Analytics",description:"Comprehensive analytics with benchmarking and market comparisons.",image:"/demo-screenshots/analytics.png",features:["Market benchmarking","Performance comparisons","Trend analysis","Custom reports"]},{id:"properties",title:"Property Management",description:"Manage all your properties with detailed information and performance tracking.",image:"/demo-screenshots/properties.png",features:["Property portfolio view","Individual property details","Performance metrics","Maintenance tracking"]}],s=n[e],i=()=>{r(a=>(a+1)%n.length)},o=()=>{r(a=>(a-1+n.length)%n.length)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs($e,{variant:"ghost",size:"sm",onClick:t,className:"flex items-center space-x-2",children:[l.jsx(x4,{className:"w-4 h-4"}),l.jsx("span",{children:"Back to Landing"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300"}),l.jsx("h2",{className:"text-xl font-semibold",children:"PropFi Demo"})]}),l.jsx($e,{variant:"ghost",size:"sm",onClick:t,children:l.jsx(co,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[l.jsx("div",{className:"w-80 bg-gray-50 p-6 overflow-y-auto",children:l.jsx("div",{className:"space-y-2",children:n.map((a,c)=>l.jsxs("button",{onClick:()=>r(c),className:`w-full text-left p-3 rounded-lg transition-colors ${c===e?"bg-blue-100 text-blue-900 border border-blue-200":"hover:bg-gray-100"}`,children:[l.jsx("div",{className:"font-medium text-sm",children:a.title}),l.jsx("div",{className:"text-xs text-gray-600 mt-1",children:a.description})]},a.id))})}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"p-6 border-b",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),l.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),l.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map((a,c)=>l.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:a},c))})]}),l.jsx("div",{className:"flex-1 p-6 bg-gray-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-full max-h-full overflow-hidden",children:l.jsx("img",{src:s.image,alt:s.title,className:"w-full h-auto",onError:a=>{a.currentTarget.src=`data:image/svg+xml,${encodeURIComponent(`
                      <svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f3f4f6"/>
                        <text x="50%" y="50%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="24" fill="#6b7280">
                          ${s.title} Screenshot
                        </text>
                        <text x="50%" y="60%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="16" fill="#9ca3af">
                          Coming Soon
                        </text>
                      </svg>
                    `)}`}})})}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t",children:[l.jsxs($e,{variant:"outline",onClick:o,disabled:e===0,children:[l.jsx(y4,{className:"w-4 h-4 mr-2"}),"Previous"]}),l.jsx("div",{className:"flex space-x-2",children:n.map((a,c)=>l.jsx("button",{onClick:()=>r(c),className:`w-3 h-3 rounded-full transition-colors ${c===e?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`},c))}),l.jsxs($e,{variant:"outline",onClick:i,disabled:e===n.length-1,children:["Next",l.jsx(Yp,{className:"w-4 h-4 ml-2"})]})]})]})]}),l.jsx("div",{className:"p-6 border-t bg-blue-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to try PropFi?"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Get started with a free month and see how PropFi can transform your property management."}),l.jsx(xc,{mode:"modal",children:l.jsx($e,{size:"lg",className:"px-8",children:"Start Free Trial"})})]})})]})})},o0=()=>{const{isSignedIn:t,user:e}=qa(),[r,n]=T.useState(!1),s=[{icon:l.jsx(kn,{className:"h-6 w-6"}),title:"Smart CSV Import",description:"AI-powered categorization and parsing of financial data with intelligent bucket management"},{icon:l.jsx(bn,{className:"h-6 w-6"}),title:"Real-time Analytics",description:"Live dashboards with interactive charts and comprehensive financial insights"},{icon:l.jsx(Jp,{className:"h-6 w-6"}),title:"AI Powered Metric Benchmarking",description:"Compare your property performance against local market averages with AI-driven insights tailored to your specific geographic area and property type"},{icon:l.jsx(ds,{className:"h-6 w-6"}),title:"Performance Tracking",description:"Monitor income, expenses, and net operating income with automated calculations"},{icon:l.jsx(t_,{className:"h-6 w-6"}),title:"Secure & Reliable",description:"Enterprise-grade security with data encryption and secure cloud storage"},{icon:l.jsx(D4,{className:"h-6 w-6"}),title:"Generate and Print Reports",description:"Create professional financial reports, cash flow statements, and property performance summaries with customizable templates and one-click printing"}];return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[l.jsx("nav",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:l.jsx("div",{className:"container mx-auto px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(zs,{size:"md"}),l.jsx("div",{className:"flex items-center space-x-4",children:t?l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.firstName,"!"]}),l.jsx(IE,{afterSignOutUrl:"/"})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(c4,{mode:"modal",children:l.jsx($e,{variant:"ghost",children:"Sign In"})}),l.jsx(xc,{mode:"modal",children:l.jsx($e,{children:"Get Started"})}),l.jsxs($e,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[l.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Pricing"]})]})})]})})}),l.jsx("section",{className:"py-20 px-4",children:l.jsxs("div",{className:"container mx-auto text-center",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx(zs,{size:"xl",showText:!1})}),l.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Visualize Your Property's",l.jsx("span",{className:"text-primary",children:" Financial Data"})]}),l.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"PropFi is a Data Visualization and AI powered market analysis tool for property investors and managers. Import CSV data with AI-powered categorization, track cash flows, and gain real-time insights into your property portfolio."}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:t?l.jsxs($e,{size:"lg",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Go to Dashboard",l.jsx(Il,{className:"ml-2 h-5 w-5"})]}):l.jsxs(l.Fragment,{children:[l.jsx(xc,{mode:"modal",children:l.jsxs($e,{size:"lg",className:"text-lg px-8 py-6",children:["Get Started",l.jsx(Il,{className:"ml-2 h-5 w-5"})]})}),l.jsx($e,{variant:"outline",size:"lg",className:"text-lg px-8 py-6",onClick:()=>n(!0),children:"Try Demo"})]})})]})}),l.jsx("section",{className:"py-20 px-4 bg-white",children:l.jsxs("div",{className:"container mx-auto",children:[l.jsx("div",{className:"text-center mb-16",children:l.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From AI-powered data import to real-time analytics, PropFi provides all the tools you need for successful property management."})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((i,o)=>l.jsxs(yr,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[l.jsx(Lr,{children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:i.icon}),l.jsx(Mr,{className:"text-xl",children:i.title})]})}),l.jsx(vr,{children:l.jsx(xn,{className:"text-base",children:i.description})})]},o))})]})}),l.jsx("section",{className:"py-20 px-4 bg-primary",children:l.jsxs("div",{className:"container mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Visualize Your Property's Financial Data?"}),l.jsx("p",{className:"text-xl text-primary-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of property professionals who trust PropFi to manage their portfolios with AI-powered insights and real-time analytics."}),t?l.jsxs($e,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Access Dashboard",l.jsx(Il,{className:"ml-2 h-5 w-5"})]}):l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx(xc,{mode:"modal",children:l.jsxs($e,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",children:["Get Started Free",l.jsx(Il,{className:"ml-2 h-5 w-5"})]})}),l.jsxs($e,{size:"lg",variant:"outline",className:"text-lg px-8 py-6 bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[l.jsx(Aa,{className:"mr-2 h-5 w-5"}),"View Pricing"]})]})]})}),l.jsx("footer",{className:"py-12 px-4 bg-gray-900 text-white",children:l.jsxs("div",{className:"container mx-auto",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Nr,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xl font-bold",children:"PropFi"})]}),l.jsx("p",{className:"text-gray-400",children:"The future of property management is here. AI-powered insights for smarter decisions."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),l.jsxs("ul",{className:"space-y-2 text-gray-400",children:[l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Features"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Pricing"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"API"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Integrations"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),l.jsxs("ul",{className:"space-y-2 text-gray-400",children:[l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"About"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Blog"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Careers"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Contact"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),l.jsxs("ul",{className:"space-y-2 text-gray-400",children:[l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Help Center"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Documentation"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Status"})}),l.jsx("li",{children:l.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Security"})})]})]})]}),l.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:l.jsx("p",{children:" 2024 PropFi. All rights reserved."})})]})}),r&&l.jsx(GT,{onClose:()=>n(!1)})]})},YT=({onSubscribe:t})=>{const{user:e}=qa(),[r,n]=T.useState(1),s=a=>a*20,i=a=>{t&&t(a,r)},o=["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support"];return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-12",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Start with a free month, then pay only for what you need. No hidden fees, no surprises."})]}),l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs(yr,{className:"relative border-2 border-primary shadow-xl",children:[l.jsxs(gn,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-white",children:[l.jsx(O4,{className:"w-3 h-3 mr-1"}),"Most Popular"]}),l.jsxs(Lr,{className:"text-center pb-4",children:[l.jsx(Mr,{className:"text-2xl font-bold text-gray-900",children:"PropFi Pro"}),l.jsx(xn,{className:"text-gray-600",children:"Everything you need to manage your properties"}),l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"First month free, then:"}),l.jsxs("div",{className:"text-4xl font-bold text-primary",children:["$",s(r),l.jsx("span",{className:"text-lg text-gray-500",children:"/month"})]}),l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"$20 per property per month"})]})]}),l.jsxs(vr,{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Properties"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx($e,{variant:"outline",size:"sm",onClick:()=>n(Math.max(1,r-1)),disabled:r<=1,children:"-"}),l.jsx("span",{className:"w-16 text-center font-medium",children:r}),l.jsx($e,{variant:"outline",size:"sm",onClick:()=>n(r+1),children:"+"})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"You can change this anytime in your dashboard"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"What's included:"}),l.jsx("ul",{className:"space-y-2",children:o.map((a,c)=>l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx($s,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),a]},c))})]}),l.jsx($e,{className:"w-full",size:"lg",onClick:()=>i("pro"),children:e?"Start Free Trial":"Sign Up for Free Trial"}),l.jsx("div",{className:"text-center text-xs text-gray-500",children:"No credit card required for the first month"})]})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto mt-12 grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx($s,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Cancel Anytime"}),l.jsx("p",{className:"text-sm text-gray-600",children:"No long-term contracts. Cancel your subscription whenever you want."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx($s,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Scale as You Grow"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Add or remove properties anytime. You only pay for what you use."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx($s,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Priority Support"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Get help when you need it with our dedicated support team."})]})]}),l.jsxs("div",{className:"max-w-3xl mx-auto mt-16",children:[l.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Frequently Asked Questions"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"How does the free trial work?"}),l.jsx("p",{className:"text-sm text-gray-600",children:"You get full access to all features for the first month at no cost. No credit card required to start."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Can I change my property count later?"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Yes! You can add or remove properties anytime from your dashboard. Billing updates automatically."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"What happens if I exceed my property limit?"}),l.jsx("p",{className:"text-sm text-gray-600",children:"We'll automatically upgrade your plan and charge the difference. You'll receive an email notification."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Is there a setup fee?"}),l.jsx("p",{className:"text-sm text-gray-600",children:"No setup fees, no hidden costs. Just the transparent monthly pricing you see here."})]})]})]})]})})},JT=()=>{const[t,e]=T.useState(!1);T.useEffect(()=>{const n=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;n==="dark"||!n&&s?(e(!0),document.documentElement.classList.add("dark")):(e(!1),document.documentElement.classList.remove("dark"))},[]);const r=()=>{const n=!t;e(n),n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return l.jsx("div",{className:"fixed bottom-6 right-6 z-50 group",children:l.jsxs("button",{onClick:r,className:"flex items-center space-x-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden","aria-label":"Toggle dark mode",children:[l.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[l.jsx(I4,{className:`w-4 h-4 transition-colors duration-200 ${t?"text-gray-400":"text-yellow-500"}`}),l.jsx("div",{className:`relative w-10 h-5 rounded-full transition-colors duration-300 ${t?"bg-blue-600":"bg-gray-300"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ${t?"translate-x-5":"translate-x-0"}`})}),l.jsx(N4,{className:`w-4 h-4 transition-colors duration-200 ${t?"text-blue-400":"text-gray-400"}`})]}),l.jsx("div",{className:"hidden group-hover:flex items-center space-x-2 px-3 py-2 border-l border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:l.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:t?"Dark Mode":"Light Mode"})})]})})},XT=()=>l.jsxs("div",{className:"p-8 space-y-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"PropFi Logo Test"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"w-20 text-sm text-gray-600",children:"48px:"}),l.jsx(zs,{size:"sm",showText:!1})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"w-20 text-sm text-gray-600",children:"96px:"}),l.jsx(zs,{size:"lg",showText:!1})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"w-20 text-sm text-gray-600",children:"160px:"}),l.jsx(zs,{size:"xl",showText:!1})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"w-20 text-sm text-gray-600",children:"With Text:"}),l.jsx(zs,{size:"lg",showText:!0})]})]}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Test Results:"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" Logo should render consistently at all sizes"}),l.jsx("li",{children:' No distortion or "decomposition"'}),l.jsx("li",{children:" Proper aspect ratio maintained"}),l.jsx("li",{children:" Clean edges and proper scaling"})]})]})]}),$2="showOpenFilePicker"in window||"chooseFileSystemEntries"in window;async function QT(){if($2&&"showOpenFilePicker"in window)try{const[t]=await window.showOpenFilePicker({multiple:!1,types:[{description:"CSV files",accept:{"text/csv":[".csv"],"application/csv":[".csv"]}}]});return await t.getFile()}catch(t){console.log("FS Access API failed, falling back to input:",t)}return new Promise((t,e)=>{const r=document.createElement("input");r.type="file",r.accept=".csv,text/csv,application/csv",r.onchange=()=>{var s;const n=(s=r.files)==null?void 0:s[0];n?t(n):e(new Error("No file selected"))},r.oncancel=()=>e(new Error("File selection cancelled")),r.click()})}async function ZT(){if($2&&"showOpenFilePicker"in window)try{const t=await window.showOpenFilePicker({multiple:!0,types:[{description:"CSV files",accept:{"text/csv":[".csv"],"application/csv":[".csv"]}}]});return await Promise.all(t.map(r=>r.getFile()))}catch(t){console.log("FS Access API failed, falling back to input:",t)}return new Promise((t,e)=>{const r=document.createElement("input");r.type="file",r.accept=".csv,text/csv,application/csv",r.multiple=!0,r.onchange=()=>{const n=Array.from(r.files||[]);n.length>0?t(n):e(new Error("No files selected"))},r.oncancel=()=>e(new Error("File selection cancelled")),r.click()})}async function eO(){if("showDirectoryPicker"in window)try{return await window.showDirectoryPicker()}catch(t){return console.log("Directory picker failed:",t),null}return null}async function tO(t){const e=[];try{for await(const[r,n]of t)if(n.kind==="file"&&r.toLowerCase().endsWith(".csv")){const s=await n.getFile();e.push(s)}}catch(r){console.error("Error reading directory:",r)}return e}const Yv="showDirectoryPicker"in window;function Cg(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function rO(t,e){let r;const n=()=>{if(r)return r;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),r=Cg(s),r.then(i=>{i.onclose=()=>r=void 0},()=>{}),r};return(s,i)=>n().then(o=>i(o.transaction(e,s).objectStore(e)))}let a0;function z2(){return a0||(a0=rO("keyval-store","keyval")),a0}function ad(t,e=z2()){return e("readonly",r=>Cg(r.get(t)))}function ld(t,e,r=z2()){return r("readwrite",n=>(n.put(e,t),Cg(n.transaction)))}const U2="propfi.catalog",nO="propfi.dataset.",La="propfi.outbox";async function V2(){try{return await ad(U2)??[]}catch(t){return console.error("Failed to load catalog:",t),[]}}async function Vf(t){try{await ld(U2,t)}catch(e){throw console.error("Failed to save catalog:",e),e}}async function l0(t){const e=await V2(),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),await Vf(e)}async function sO(t){try{return await ad(`${nO}${t}`)??null}catch(e){return console.error("Failed to load dataset sample:",e),null}}async function As(t){try{const e=await ad(La)??[],r={...t,id:crypto.randomUUID(),retries:0};e.push(r),await ld(La,e)}catch(e){throw console.error("Failed to enqueue outbox item:",e),e}}async function jg(){try{return await ad(La)??[]}catch(t){return console.error("Failed to read outbox:",t),[]}}async function Jv(t){try{const r=(await jg()).filter(n=>n.id!==t);await ld(La,r)}catch(e){throw console.error("Failed to remove outbox item:",e),e}}async function iO(t){try{const e=await jg(),r=e.find(n=>n.id===t);r&&(r.retries=(r.retries||0)+1,await ld(La,e))}catch(e){throw console.error("Failed to increment outbox retries:",e),e}}function c0(t,e=1e3){return new Promise((r,n)=>{const s=[];let i=[],o=0;const a=[];Ec.parse(t,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,worker:!0,step:(c,u)=>{c.errors.length>0&&a.push(...c.errors),c.data&&s.length<e?(s.push(c.data),o++):s.length>=e&&u.abort()},complete:c=>{var u;i=((u=c.meta)==null?void 0:u.fields)??Object.keys(s[0]||{}),r({rows:s,fields:i,totalRows:o,errors:[...a,...c.errors||[]]})},error:c=>{n(c)}})})}function Nc(t){if(t.length===0)return{fieldTypes:{},fieldStats:{}};const e=Object.keys(t[0]),r={},n={};return e.forEach(s=>{const i=t.map(a=>a[s]).filter(a=>a!=null),o=new Set(i);i.length===0?r[s]="empty":i.every(a=>typeof a=="number")?r[s]="number":i.every(a=>!isNaN(Date.parse(a)))?r[s]="date":r[s]="string",n[s]={unique:o.size,nulls:t.length-i.length},r[s]==="number"&&i.length>0&&(n[s].min=Math.min(...i),n[s].max=Math.max(...i))}),{fieldTypes:r,fieldStats:n}}function oO(){const[t,e]=T.useState({catalog:[],busy:!1,error:null,supportsDirectory:Yv});T.useEffect(()=>{V2().then(o=>{e(a=>({...a,catalog:o}))})},[]);const r=T.useCallback(async()=>{if(!Yv){e(o=>({...o,error:"Directory access not supported in this browser. Please use individual file selection instead."}));return}e(o=>({...o,busy:!0,error:null}));try{const o=await eO();if(!o){e(d=>({...d,busy:!1}));return}const a=await tO(o);if(a.length===0){e(d=>({...d,busy:!1,error:"No CSV files found in the selected directory."}));return}const c=[],u=[...t.catalog];for(const d of a)try{const f=u.find(h=>h.name===d.name&&h.source==="local-folder");if(f){if(d.lastModified>(f.modifiedAt||0)){const{rows:h,fields:p,errors:x}=await c0(d,1e3),{fieldTypes:g,fieldStats:v}=Nc(h),y={...f,size:d.size,modifiedAt:d.lastModified,fields:p,schema:g},m=u.findIndex(b=>b.id===f.id);m>=0&&(u[m]=y),await l0(y),await As({type:"UPSERT_DATASET",payload:y,ts:Date.now()}),await As({type:"UPSERT_SAMPLE",payload:{dataset_id:y.id,sample:h},ts:Date.now()}),c.push(y)}}else{const{rows:h,fields:p,errors:x}=await c0(d,1e3),{fieldTypes:g,fieldStats:v}=Nc(h),y=crypto.randomUUID(),m={id:y,name:d.name,source:"local-folder",size:d.size,modifiedAt:d.lastModified,fields:p,schema:g};c.push(m),u.push(m),await l0(m),await As({type:"UPSERT_DATASET",payload:m,ts:Date.now()}),await As({type:"UPSERT_SAMPLE",payload:{dataset_id:y,sample:h},ts:Date.now()})}}catch(f){console.error(`Error processing file ${d.name}:`,f)}await Vf(u),e(d=>({...d,catalog:u,busy:!1,error:c.length===0?"No new or updated files found.":null}))}catch(o){console.error("Error connecting folder:",o),e(a=>({...a,busy:!1,error:o instanceof Error?o.message:"Failed to connect folder"}))}},[t.catalog]),n=T.useCallback(async o=>{e(a=>({...a,busy:!0,error:null}));try{const{rows:a,fields:c,errors:u}=await c0(o,1e3),{fieldTypes:d,fieldStats:f}=Nc(a),h=crypto.randomUUID(),p={id:h,name:o.name,source:"local-file",size:o.size,modifiedAt:o.lastModified,fields:c,schema:d};await l0(p),await As({type:"UPSERT_DATASET",payload:p,ts:Date.now()}),await As({type:"UPSERT_SAMPLE",payload:{dataset_id:h,sample:a},ts:Date.now()});const x=[...t.catalog,p];e(g=>({...g,catalog:x,busy:!1}))}catch(a){console.error("Error adding file:",a),e(c=>({...c,busy:!1,error:a instanceof Error?a.message:"Failed to add file"}))}},[t.catalog]),s=T.useCallback(async o=>{try{const a=t.catalog.filter(c=>c.id!==o);await Vf(a),await As({type:"DELETE_DATASET",payload:{id:o},ts:Date.now()}),e(c=>({...c,catalog:a}))}catch(a){console.error("Error removing dataset:",a),e(c=>({...c,error:a instanceof Error?a.message:"Failed to remove dataset"}))}},[t.catalog]),i=T.useCallback(()=>{e(o=>({...o,error:null}))},[]);return{...t,connectFolder:r,addFile:n,removeDataset:s,clearError:i}}function aO({onDatasetSelect:t,selectedDatasetId:e}){const{catalog:r,connectFolder:n,addFile:s,removeDataset:i,busy:o,error:a,supportsDirectory:c,clearError:u}=oO(),[d,f]=T.useState(!1),h=async()=>{try{const g=await QT();await s(g)}catch(g){console.error("Error adding file:",g)}},p=async()=>{try{const g=await ZT();for(const v of g)await s(v)}catch(g){console.error("Error adding files:",g)}},x=async g=>{window.confirm("Are you sure you want to remove this dataset?")&&await i(g)};return l.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-gray-800",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Data Sources"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>f(!d),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Add Files"}),c&&l.jsx("button",{disabled:o,onClick:n,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Scanning...":"Connect Folder"})]})]}),a&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-red-700 text-sm",children:a}),l.jsx("button",{onClick:u,className:"text-red-500 hover:text-red-700",children:""})]})}),d&&l.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Add CSV files to your local catalog:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Single File"}),l.jsx("button",{onClick:p,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Multiple Files"})]})]}),!c&&l.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsx("p",{className:"text-yellow-700 text-sm",children:"Directory access is not supported in this browser. You can still add individual CSV files."})}),l.jsx("div",{className:"space-y-2",children:r.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[l.jsx("p",{children:"No datasets found."}),l.jsx("p",{className:"text-sm mt-1",children:c?"Connect a folder or add individual files to get started.":"Add individual CSV files to get started."})]}):r.map(g=>{var v;return l.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${e===g.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>t==null?void 0:t(g),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:g.name}),l.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("span",{children:[((v=g.fields)==null?void 0:v.length)||0," fields"]}),l.jsx("span",{children:g.source}),g.size&&l.jsxs("span",{children:[(g.size/1024).toFixed(1)," KB"]}),g.modifiedAt&&l.jsx("span",{children:new Date(g.modifiedAt).toLocaleDateString()})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[g.lastSynced&&l.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Synced"}),l.jsx("button",{onClick:y=>{y.stopPropagation(),x(g.id)},className:"text-red-500 hover:text-red-700 text-sm",title:"Remove dataset",children:""})]})]})},g.id)})}),o&&l.jsxs("div",{className:"mt-4 flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Processing..."})]})]})}let Hf={online:navigator.onLine,lastChecked:Date.now()};const Wf=new Set;function lO(){const t=()=>{const r={online:navigator.onLine,lastChecked:Date.now(),connectionType:cO()};r.online!==Hf.online&&(Hf=r,Wf.forEach(n=>n(r)))};if(window.addEventListener("online",t),window.addEventListener("offline",t),"connection"in navigator){const r=navigator.connection;r&&r.addEventListener("change",t)}const e=setInterval(t,3e4);return()=>{if(window.removeEventListener("online",t),window.removeEventListener("offline",t),"connection"in navigator){const r=navigator.connection;r&&r.removeEventListener("change",t)}clearInterval(e)}}function cO(){if("connection"in navigator){const t=navigator.connection;return(t==null?void 0:t.effectiveType)||(t==null?void 0:t.type)}}function H2(t){return Wf.add(t),t(Hf),()=>{Wf.delete(t)}}function uO(){return navigator.onLine?Promise.resolve():new Promise(t=>{const e=H2(r=>{r.online&&(e(),t())})})}typeof window<"u"&&lO();const dO="https://iqwhrvtcrseidfyznqaf.supabase.co",W2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlxd2hydnRjcnNlaWRmeXpucWFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDg1NDQ0NjgsImV4cCI6MjAyNDEyMDQ2OH0.your_actual_anon_key_here",Ar=Za(dO,W2,{auth:{persistSession:!0,autoRefreshToken:!0}}),Eg=()=>W2!=="your_supabase_anon_key_here",q2=Object.freeze(Object.defineProperty({__proto__:null,isSupabaseConfigured:Eg,supabase:Ar},Symbol.toStringTag,{value:"Module"}));async function K2(t){try{const{data:e,error:r}=await Ar.from("datasets").upsert({id:t.cloudId||t.id,name:t.name,meta:{source:t.source,size:t.size,modifiedAt:t.modifiedAt,fields:t.fields,schema:t.schema,localId:t.id},updated_at:new Date().toISOString()}).select().single();return r?(console.error("Error upserting dataset:",r),{data:null,error:r}):{data:e,error:null}}catch(e){return console.error("Exception upserting dataset:",e),{data:null,error:e}}}async function hO(t){try{const{data:e,error:r}=await Ar.from("datasets").select("*").eq("id",t).single();return r?(console.error("Error getting dataset:",r),{data:null,error:r}):{data:e,error:null}}catch(e){return console.error("Exception getting dataset:",e),{data:null,error:e}}}async function fO(){try{const{data:t,error:e}=await Ar.from("datasets").select("*").order("updated_at",{ascending:!1});return e?(console.error("Error getting user datasets:",e),{data:[],error:e}):{data:t||[],error:null}}catch(t){return console.error("Exception getting user datasets:",t),{data:[],error:t}}}async function G2(t){try{const{error:e}=await Ar.from("datasets").delete().eq("id",t);return e?(console.error("Error deleting dataset:",e),{error:e}):{error:null}}catch(e){return console.error("Exception deleting dataset:",e),{error:e}}}async function Y2(t,e){try{const{data:r,error:n}=await Ar.from("dataset_samples").upsert({dataset_id:t,sample:e,updated_at:new Date().toISOString()}).select().single();return n?(console.error("Error upserting dataset sample:",n),{data:null,error:n}):{data:r,error:null}}catch(r){return console.error("Exception upserting dataset sample:",r),{data:null,error:r}}}async function pO(t){try{const{data:e,error:r}=await Ar.from("dataset_samples").select("*").eq("dataset_id",t).single();return r?(console.error("Error getting dataset sample:",r),{data:null,error:r}):{data:e,error:null}}catch(e){return console.error("Exception getting dataset sample:",e),{data:null,error:e}}}async function gO(t){try{const{error:e}=await Ar.from("dataset_samples").delete().eq("dataset_id",t);return e?(console.error("Error deleting dataset sample:",e),{error:e}):{error:null}}catch(e){return console.error("Exception deleting dataset sample:",e),{error:e}}}async function mO(){try{const{data:{user:t},error:e}=await Ar.auth.getUser();return{user:t,error:e}}catch(t){return console.error("Exception getting current user:",t),{user:null,error:t}}}async function xO(t){try{const{error:e}=await Ar.auth.signInWithOtp({email:t,options:{emailRedirectTo:window.location.origin}});return e?(console.error("Error signing in with email:",e),{error:e}):{error:null}}catch(e){return console.error("Exception signing in with email:",e),{error:e}}}async function yO(){try{const{error:t}=await Ar.auth.signOut();return t?(console.error("Error signing out:",t),{error:t}):{error:null}}catch(t){return console.error("Exception signing out:",t),{error:t}}}async function J2(){try{const{data:{session:t}}=await Ar.auth.getSession();return!!t}catch(t){return console.error("Exception checking authentication:",t),!1}}const Xv=Object.freeze(Object.defineProperty({__proto__:null,deleteCloudDatasetSample:gO,deleteDataset:G2,getCurrentUser:mO,getDataset:hO,getDatasetSample:pO,getUserDatasets:fO,isAuthenticated:J2,signInWithEmail:xO,signOut:yO,upsertDataset:K2,upsertDatasetSample:Y2},Symbol.toStringTag,{value:"Module"})),vO=3;async function bO(){if(!await J2())return{success:!1,processed:0,errors:[],retryable:[]};const e=await jg();if(e.length===0)return{success:!0,processed:0,errors:[],retryable:[]};const r=[],n=[];let s=0;for(const i of e)try{let o=!1;switch(i.type){case"UPSERT_DATASET":const a=await K2(i.payload);if(a.error)throw a.error;o=!0;break;case"UPSERT_SAMPLE":const c=await Y2(i.payload.dataset_id,i.payload.sample);if(c.error)throw c.error;o=!0;break;case"DELETE_DATASET":const u=await G2(i.payload.cloudId||i.payload.id);if(u.error)throw u.error;o=!0;break;default:console.warn("Unknown outbox item type:",i.type),o=!0}o&&(await Jv(i.id),s++)}catch(o){console.error("Error processing outbox item:",i,o);const a=wO(o),c=i.retries||0;a&&c<vO?(await iO(i.id),n.push({...i,retries:c+1})):(await Jv(i.id),r.push({item:i,error:o}))}return{success:r.length===0,processed:s,errors:r,retryable:n}}function wO(t){var e,r;return t?t.name==="NetworkError"||(e=t.message)!=null&&e.includes("network")||t.name==="TimeoutError"||(r=t.message)!=null&&r.includes("timeout")||t.status>=500&&t.status<600||t.status===429?!0:!(t.status===401||t.status===403||t.status>=400&&t.status<500):!1}async function _O(t=1e3,e=3e4){let r=t,n;do n=await bO(),!n.success&&n.retryable.length>0&&(await new Promise(s=>setTimeout(s,r)),r=Math.min(r*2,e));while(!n.success&&n.retryable.length>0&&r<e);return n}class kO{constructor(){this.isRunning=!1,this.syncInterval=null,this.cleanup=null,this.status={isOnline:navigator.onLine,isAuthenticated:!1,isSyncing:!1,pendingItems:0,errors:[]},this.statusListeners=new Set,this.initialize()}async initialize(){this.cleanup=H2(e=>{this.status.isOnline=e.online,this.notifyStatusListeners(),e.online&&this.isRunning&&this.triggerSync()}),await this.updateAuthStatus()}async updateAuthStatus(){try{const{supabase:e}=await Cr(()=>Promise.resolve().then(()=>q2),void 0),{data:{session:r}}=await e.auth.getSession();this.status.isAuthenticated=!!r}catch(e){console.error("Error checking auth status:",e),this.status.isAuthenticated=!1}this.notifyStatusListeners()}notifyStatusListeners(){this.statusListeners.forEach(e=>e({...this.status}))}start(e=3e4){this.isRunning||(this.isRunning=!0,this.triggerSync(),this.syncInterval=window.setInterval(()=>{this.status.isOnline&&this.status.isAuthenticated&&this.triggerSync()},e),console.log("Sync manager started"))}stop(){this.isRunning&&(this.isRunning=!1,this.syncInterval&&(window.clearInterval(this.syncInterval),this.syncInterval=null),this.cleanup&&(this.cleanup(),this.cleanup=null),console.log("Sync manager stopped"))}async triggerSync(){if(!this.status.isOnline||!this.status.isAuthenticated)return{success:!1,processed:0,errors:[],retryable:[]};this.status.isSyncing=!0,this.notifyStatusListeners();try{const e=await _O();return this.status.lastSync=Date.now(),this.status.errors=e.errors,this.status.pendingItems=e.retryable.length,e}catch(e){return console.error("Sync error:",e),{success:!1,processed:0,errors:[{item:null,error:e}],retryable:[]}}finally{this.status.isSyncing=!1,this.notifyStatusListeners()}}async waitForOnlineAndSync(){return this.status.isOnline||await uO(),this.triggerSync()}onStatusChange(e){return this.statusListeners.add(e),e({...this.status}),()=>{this.statusListeners.delete(e)}}getStatus(){return{...this.status}}async checkAuthentication(){await this.updateAuthStatus()}async forceSync(){return this.triggerSync()}}let u0=null;function el(){return u0||(u0=new kO),u0}function SO(t){const e=el();return e.start(t),()=>e.stop()}function CO(){return el().triggerSync()}function jO(t){return el().onStatusChange(t)}function EO(){return el().getStatus()}typeof window<"u"&&el();function X2(){const[t,e]=T.useState(()=>({...EO(),isConfigured:Eg()}));T.useEffect(()=>jO(a=>{e(c=>({...c,...a}))}),[]);const r=T.useCallback(async()=>{try{return await CO()}catch(o){throw console.error("Manual sync failed:",o),o}},[]),n=t.isOnline&&t.isAuthenticated&&t.isConfigured,s=T.useCallback(()=>t.isConfigured?t.isOnline?t.isAuthenticated?t.isSyncing?"Syncing...":t.pendingItems>0?`${t.pendingItems} pending sync`:t.errors.length>0?`${t.errors.length} sync errors`:"Synced":"Local only (not signed in)":"Offline":"Local only (Supabase not configured)",[t]),i=T.useCallback(()=>t.isConfigured?t.isOnline?t.isAuthenticated?t.isSyncing?"text-blue-500":t.errors.length>0?"text-red-500":t.pendingItems>0?"text-yellow-500":"text-green-500":"text-yellow-500":"text-red-500":"text-gray-500",[t]);return{...t,canSync:n,syncNow:r,getStatusText:s,getStatusColor:i}}function NO(){const[t,e]=T.useState({user:null,loading:!0,error:null});T.useEffect(()=>{(async()=>{try{const{supabase:a}=await Cr(()=>Promise.resolve().then(()=>q2),void 0),{data:{user:c},error:u}=await a.auth.getUser();e(u?{user:null,loading:!1,error:u.message}:{user:c,loading:!1,error:null})}catch(a){e({user:null,loading:!1,error:a instanceof Error?a.message:"Auth check failed"})}})();const{supabase:i}=require("../lib/supabaseClient"),{data:{subscription:o}}=i.auth.onAuthStateChange((a,c)=>{e(u=>({...u,user:(c==null?void 0:c.user)||null,loading:!1}))});return()=>{o.unsubscribe()}},[]);const r=T.useCallback(async s=>{e(i=>({...i,loading:!0,error:null}));try{const{signInWithEmail:i}=await Cr(()=>Promise.resolve().then(()=>Xv),void 0),{error:o}=await i(s);if(o)throw e(a=>({...a,loading:!1,error:o.message})),o;e(a=>({...a,loading:!1}))}catch(i){throw e(o=>({...o,loading:!1,error:i instanceof Error?i.message:"Sign in failed"})),i}},[]),n=T.useCallback(async()=>{e(s=>({...s,loading:!0,error:null}));try{const{signOut:s}=await Cr(()=>Promise.resolve().then(()=>Xv),void 0),{error:i}=await s();if(i)throw e(o=>({...o,loading:!1,error:i.message})),i;e(o=>({...o,user:null,loading:!1}))}catch(s){throw e(i=>({...i,loading:!1,error:s instanceof Error?s.message:"Sign out failed"})),s}},[]);return{...t,signIn:r,signOut:n,isConfigured:Eg()}}function AO({showDetails:t=!1,className:e=""}){const{isOnline:r,isAuthenticated:n,isSyncing:s,pendingItems:i,errors:o,canSync:a,syncNow:c,getStatusText:u,getStatusColor:d,isConfigured:f}=X2(),{user:h,signIn:p,signOut:x,loading:g}=NO(),[v,y]=T.useState(!1),[m,b]=T.useState(""),k=async j=>{if(j.preventDefault(),!!m)try{await p(m),y(!1),b("")}catch(w){console.error("Sign in failed:",w)}},C=async()=>{try{await x()}catch(j){console.error("Sign out failed:",j)}},E=async()=>{try{await c()}catch(j){console.error("Sync failed:",j)}};return f?l.jsxs("div",{className:`relative ${e}`,children:[l.jsxs("div",{className:"text-xs px-2 py-1 rounded-full border inline-flex gap-2 items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-red-500"}`}),l.jsx("span",{className:d(),children:u()}),s&&l.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-current"}),a&&!s&&l.jsx("button",{onClick:E,className:"text-blue-500 hover:text-blue-700",title:"Sync now",children:""}),!n&&l.jsx("button",{onClick:()=>y(!0),className:"text-blue-500 hover:text-blue-700",title:"Sign in to enable sync",children:"Sign in"}),n&&l.jsx("button",{onClick:C,className:"text-gray-500 hover:text-gray-700",title:"Sign out",children:"Sign out"})]}),t&&l.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{children:["Online: ",r?"Yes":"No"]}),l.jsxs("div",{children:["Authenticated: ",n?"Yes":"No"]}),l.jsxs("div",{children:["Pending: ",i]}),o.length>0&&l.jsxs("div",{className:"text-red-500",children:["Errors: ",o.length]})]}),v&&l.jsxs("div",{className:"absolute top-full right-0 mt-2 p-4 bg-white dark:bg-gray-800 border rounded-lg shadow-lg z-10 min-w-64",children:[l.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Sign in to enable cloud sync"}),l.jsxs("form",{onSubmit:k,className:"space-y-2",children:[l.jsx("input",{type:"email",value:m,onChange:j=>b(j.target.value),placeholder:"Enter your email",className:"w-full px-3 py-2 border rounded-md text-sm",required:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"submit",disabled:g,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:g?"Sending...":"Send Magic Link"}),l.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]}),h&&l.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Signed in as: ",h.email]})]})]}):l.jsxs("div",{className:`text-xs px-2 py-1 rounded-full border inline-flex gap-2 items-center ${e}`,children:[l.jsx("span",{className:"text-gray-500",children:"Local only"}),l.jsx("span",{children:""}),l.jsx("span",{className:"text-gray-500",children:"Supabase not configured"})]})}function PO(t){const[e,r]=T.useState({sample:null,loading:!1,error:null,structure:null}),n=T.useCallback(async o=>{r(a=>({...a,loading:!0,error:null}));try{const a=await sO(o);if(a&&a.length>0){const c=Nc(a);r(u=>({...u,sample:a,structure:c,loading:!1}))}else r(c=>({...c,sample:null,structure:null,loading:!1}))}catch(a){console.error("Error loading dataset sample:",a),r(c=>({...c,loading:!1,error:a instanceof Error?a.message:"Failed to load dataset"}))}},[]);T.useEffect(()=>{t?n(t):r({sample:null,loading:!1,error:null,structure:null})},[t,n]);const s=T.useCallback(()=>{t&&n(t)},[t,n]),i=T.useCallback(()=>{r(o=>({...o,error:null}))},[]);return{...e,refresh:s,clearError:i}}function DO(){var c,u;const[t,e]=T.useState(null),{sample:r,loading:n,error:s,structure:i}=PO((t==null?void 0:t.id)||null),{isConfigured:o}=X2();T.useEffect(()=>SO(3e4),[]);const a=d=>{e(d)};return l.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"PropFi  Local-First"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Connect local CSV files and visualize your property data"})]}),l.jsx(AO,{showDetails:!1})]}),!o&&l.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Supabase Not Configured"}),l.jsx("p",{className:"text-sm text-yellow-700",children:"To enable cloud sync, please configure your Supabase credentials in the environment variables. The app will work in local-only mode without cloud sync."})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx("div",{className:"space-y-6",children:l.jsx(aO,{onDatasetSelect:a,selectedDatasetId:t==null?void 0:t.id})}),l.jsx("div",{className:"space-y-6",children:t?l.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-gray-800",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Dataset Preview: ",t.name]}),n&&l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading..."})]}),s&&l.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-700 text-sm",children:s})}),r&&r.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Rows:"}),l.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:r.length})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Fields:"}),l.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:((c=t.fields)==null?void 0:c.length)||0})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Source:"}),l.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.source})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Size:"}),l.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.size?`${(t.size/1024).toFixed(1)} KB`:"Unknown"})]})]}),i&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Field Types"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(i.fieldTypes).map(([d,f])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[d,":"]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs ${f==="number"?"bg-blue-100 text-blue-800":f==="date"?"bg-green-100 text-green-800":f==="string"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:f})]},d))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Sample Data"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[(u=t.fields)==null?void 0:u.slice(0,10).map(d=>l.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-400",children:d},d)),t.fields&&t.fields.length>10&&l.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-400",children:"..."})]})}),l.jsx("tbody",{children:r.slice(0,10).map((d,f)=>{var h;return l.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(h=t.fields)==null?void 0:h.slice(0,10).map(p=>{var x,g;return l.jsxs("td",{className:"py-2 px-3 text-gray-900 dark:text-white",children:[((x=d[p])==null?void 0:x.toString().slice(0,50))||"-",((g=d[p])==null?void 0:g.toString().length)>50&&"..."]},p)}),t.fields&&t.fields.length>10&&l.jsx("td",{className:"py-2 px-3 text-gray-500",children:"..."})]},f)})})]})}),r.length>10&&l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Showing first 10 rows of ",r.length," total rows"]})]})]})]}):l.jsxs("div",{className:"p-8 border rounded-xl bg-white dark:bg-gray-800 text-center",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Dataset Selected"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Select a dataset from the left to preview its data and structure."})]})})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[l.jsx("div",{children:"PropFi Local-First Architecture"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{children:"Data stored locally in IndexedDB"}),o&&l.jsx("span",{children:""}),o&&l.jsx("span",{children:"Optional Supabase sync"})]})]})})]})})}function TO(){const[t,e]=T.useState("landing"),[r,n]=T.useState(!0),[s,i]=T.useState(null),[o,a]=T.useState(!1),{isSignedIn:c,isLoaded:u,user:d}=qa(),{signOut:f}=Kj();T.useEffect(()=>{c&&d?(async()=>{try{if(await or.setCurrentUser(d),or.hasOrganization()){const y=await or.getUserOrganization();y&&(i(y.name),localStorage.setItem("organizationName",y.name))}else{const y=localStorage.getItem("organizationName");i(y||"My Organization")}n(!1),e("dashboard")}catch(v){console.error("Error initializing user:",v);const y=localStorage.getItem("organizationName");i(y||"My Organization"),n(!1),e("dashboard")}})():c||(or.clearUser(),i(null),n(!0),e("landing"))},[c,d]),Y.useEffect(()=>{const g=v=>{const y=v.detail.page;y&&(e(y),y!=="landing"&&n(!1))};return window.addEventListener("navigateToPage",g),()=>{window.removeEventListener("navigateToPage",g)}},[]);const h=async()=>{try{await f(),or.clearUser(),localStorage.removeItem("organizationName"),n(!0),e("landing")}catch(g){console.error("Error during logout:",g)}},p=async(g,v)=>{var y;if(d)try{const{createCheckoutSession:m}=await Cr(()=>Promise.resolve().then(()=>zN),void 0);await m({plan:g,properties:v,userId:d.id,userEmail:((y=d.primaryEmailAddress)==null?void 0:y.emailAddress)||"",organizationId:s||void 0})}catch(m){console.error("Error creating checkout session:",m)}},x=()=>{switch(t){case"landing":return l.jsx(o0,{});case"dashboard":return l.jsx(NT,{});case"financials":return l.jsx(UT,{});case"analytics":return l.jsx(FT,{});case"properties":return l.jsx(IT,{});case"csvs":return l.jsx(KT,{});case"reports":return l.jsx(VT,{});case"pricing":return l.jsx(YT,{onSubscribe:p});case"logo-test":return l.jsx(XT,{});case"local-first":return l.jsx(DO,{});default:return l.jsx(o0,{})}};return u?r||!c?l.jsx(o0,{}):l.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[l.jsx(VN,{currentPage:t,setCurrentPage:e,onLogout:h,organizationName:s,isCollapsed:o,onToggleCollapse:()=>a(!o)}),l.jsx("main",{className:`flex-1 overflow-y-auto transition-all duration-300 ${o?"lg:ml-0":""}`,children:l.jsx("div",{className:"p-6 pb-12",children:x()})}),l.jsx(JT,{})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}function OO(){const t="pk_test_your_clerk_publishable_key_here";return l.jsx(Qw,{publishableKey:t,children:l.jsx(TO,{})})}const IO=d0.createRoot(document.getElementById("root"));IO.render(l.jsx(Y.StrictMode,{children:l.jsx(OO,{})}));
//# sourceMappingURL=index-a63d1d6a.js.map
